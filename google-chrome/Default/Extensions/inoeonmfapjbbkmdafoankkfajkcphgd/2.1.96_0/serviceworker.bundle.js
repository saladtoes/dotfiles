!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("undefined"!=typeof exports)t();else{t(),e.unknown={}}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(){function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.apply(this,arguments)}const t=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",DEFAULT:"Default"});class n{constructor(){this.Σ0=function(e){return this.ROTR(2,e)^this.ROTR(13,e)^this.ROTR(22,e)},this.Σ1=function(e){return this.ROTR(6,e)^this.ROTR(11,e)^this.ROTR(25,e)},this.σ0=function(e){return this.ROTR(7,e)^this.ROTR(18,e)^e>>>3},this.σ1=function(e){return this.ROTR(17,e)^this.ROTR(19,e)^e>>>10},this.Ch=function(e,t,n){return e&t^~e&n},this.Maj=function(e,t,n){return e&t^e&n^t&n}}hash(e){e=unescape(encodeURIComponent(e));for(var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=(e+=String.fromCharCode(128)).length/4+2,r=Math.ceil(i/16),a=new Array(r),s=0;s<r;s++){a[s]=new Array(16);for(var o=0;o<16;o++)a[s][o]=e.charCodeAt(64*s+4*o)<<24|e.charCodeAt(64*s+4*o+1)<<16|e.charCodeAt(64*s+4*o+2)<<8|e.charCodeAt(64*s+4*o+3)}a[r-1][14]=8*(e.length-1)/Math.pow(2,32),a[r-1][14]=Math.floor(a[r-1][14]),a[r-1][15]=8*(e.length-1)&4294967295;var c,u,l,d,h,p,g,f,m=new Array(64);for(s=0;s<r;s++){for(var v=0;v<16;v++)m[v]=a[s][v];for(v=16;v<64;v++)m[v]=this.σ1(m[v-2])+m[v-7]+this.σ0(m[v-15])+m[v-16]&4294967295;c=n[0],u=n[1],l=n[2],d=n[3],h=n[4],p=n[5],g=n[6],f=n[7];for(v=0;v<64;v++){var _=f+this.Σ1(h)+this.Ch(h,p,g)+t[v]+m[v],y=this.Σ0(c)+this.Maj(c,u,l);f=g,g=p,p=h,h=d+_&4294967295,d=l,l=u,u=c,c=_+y&4294967295}n[0]=n[0]+c&4294967295,n[1]=n[1]+u&4294967295,n[2]=n[2]+l&4294967295,n[3]=n[3]+d&4294967295,n[4]=n[4]+h&4294967295,n[5]=n[5]+p&4294967295,n[6]=n[6]+g&4294967295,n[7]=n[7]+f&4294967295}return this.toHexStr(n[0])+this.toHexStr(n[1])+this.toHexStr(n[2])+this.toHexStr(n[3])+this.toHexStr(n[4])+this.toHexStr(n[5])+this.toHexStr(n[6])+this.toHexStr(n[7])}ROTR(e,t){return t>>>e|t<<32-e}toHexStr(e){for(var t="",n=7;n>=0;n--)t+=(e>>>4*n&15).toString(16);return t}}class i{constructor(e){const{applicationName:t="",analyticsTrackingCode:i=""}=e;if(t.length<0)throw"The application used when creating an Analytics instance is invalid.";if(!this._isAnalytics(i))throw"The analytics tracking code used when creating an Analytics instance is invalid.";this._applicationName=t,this._analyticsTrackingCode=i,this._analyticsEndpoint="https://www.google-analytics.com/collect",this.AnalyticsAttributes=Object.freeze({TRACKING_CODE:"tid",HIT_TYPE:"t",SCREEN_RESOLUTION:"sr",VIEW_PORT:"vp",APPLICATION_VERSION:"av",LIBRARY_VERSION:"_v",COLOR_DEPTH:"sd",LANGUAGE:"ul",APPLICATION_NAME:"an",PROTOCAL_VERSION:"v",USER_ID:"uid",CLIENT_ID:"cid",SCREEN_NAME:"cd",EVENT_CATEGORY:"ec",EVENT_ACTION:"ea",EVENT_LABEL:"el",EVENT_VALUE:"ev",HOST_NAME:"dh"}),this._libraryVersion=Object.freeze("1.0.74"),this._hasher=new n}sendAppView(e){const{screenName:t="(none)",userId:n=""}=e;if(n.length<1)throw"An analytics screen view must have a user ID.";const i=new URLSearchParams;i.append(this.AnalyticsAttributes.HIT_TYPE,"screenview"),i.append(this.AnalyticsAttributes.LIBRARY_VERSION,this._getLibraryVersion()),i.append(this.AnalyticsAttributes.PROTOCAL_VERSION,"1"),i.append(this.AnalyticsAttributes.APPLICATION_NAME,this._applicationName),i.append(this.AnalyticsAttributes.APPLICATION_VERSION,this._getVersion().toString()),i.append(this.AnalyticsAttributes.TRACKING_CODE,this._analyticsTrackingCode),i.append(this.AnalyticsAttributes.LANGUAGE,this._getLanguage()),i.append(this.AnalyticsAttributes.COLOR_DEPTH,this._getColorDepth()),i.append(this.AnalyticsAttributes.SCREEN_RESOLUTION,this._getScreenResolution()),i.append(this.AnalyticsAttributes.VIEW_PORT,this._getViewportSize()),i.append(this.AnalyticsAttributes.USER_ID,n),i.append(this.AnalyticsAttributes.CLIENT_ID,n),i.append(this.AnalyticsAttributes.SCREEN_NAME,t),fetch(this._analyticsEndpoint,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",DNT:1,Accept:"application/json"},body:i})}sendEvent(e){const{eventCategory:t="",eventAction:n="",eventLabel:i="",eventValue:r=-1,userId:a="",screenName:s="(none)",hostName:o="(none)",customAttributes:c=[]}=e;if(t.length<1)throw"An analytics event must have a category.";if(n.length<1)throw"An analytics event must have an action.";if(a.length<1)throw"An analytics event must have a user ID.";const u=new URLSearchParams;u.append(this.AnalyticsAttributes.EVENT_CATEGORY,t),u.append(this.AnalyticsAttributes.EVENT_ACTION,n),i.length>0&&u.append(this.AnalyticsAttributes.EVENT_LABEL,i),r>-1&&u.append(this.AnalyticsAttributes.EVENT_VALUE,r.toString()),u.append(this.AnalyticsAttributes.HIT_TYPE,"event"),u.append(this.AnalyticsAttributes.LIBRARY_VERSION,this._getLibraryVersion()),u.append(this.AnalyticsAttributes.PROTOCAL_VERSION,"1"),u.append(this.AnalyticsAttributes.APPLICATION_NAME,this._applicationName),u.append(this.AnalyticsAttributes.APPLICATION_VERSION,this._getVersion().toString()),u.append(this.AnalyticsAttributes.TRACKING_CODE,this._analyticsTrackingCode),u.append(this.AnalyticsAttributes.LANGUAGE,this._getLanguage()),u.append(this.AnalyticsAttributes.COLOR_DEPTH,this._getColorDepth()),u.append(this.AnalyticsAttributes.SCREEN_RESOLUTION,this._getScreenResolution()),u.append(this.AnalyticsAttributes.SCREEN_NAME,s),u.append(this.AnalyticsAttributes.HOST_NAME,o),u.append(this.AnalyticsAttributes.VIEW_PORT,this._getViewportSize()),u.append(this.AnalyticsAttributes.USER_ID,a),u.append(this.AnalyticsAttributes.CLIENT_ID,a),c.forEach(((e,t)=>{let n="cd";"m"==e.t&&(n="cm"),u.append(n+e.i.toString(),e.value)})),fetch(this._analyticsEndpoint,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",DNT:1,Accept:"application/json"},body:u})}hash(e){const{stringToHash:t="",salt:n="hfdu9b89';JHK7898hbh;';[/"}=e;if(t.length<1)throw"The string to hash is invalid.";return this._hasher.hash(t+n)}hashEmail(e){let t=(e=e.toLowerCase()).split("@")[0].replace("%",""),n=e.substring(t.length+1);return{email:e,userIemailNamedName:t,emailDomain:n,deIdentifiedEmail:this.hash({stringToHash:t})+"@"+n}}getUTCTimeStamp(){let e=new Date;function t(e){return("0"+e).slice(-2)}return e.getUTCFullYear().toString()+":"+t((e.getUTCMonth()+1).toString())+":"+t(e.getUTCDate().toString())+"    "+t(e.getUTCHours().toString())+":"+t(e.getUTCMinutes().toString())+":"+t(e.getUTCSeconds().toString())}_isAnalytics(e){return/^ua-\d{4,9}-\d{1,4}$/i.test(e.toString())}_getScreenResolution(){throw"virtual function that must have a derived implementation"}_getViewportSize(){throw"virtual function that must have a derived implementation"}_getVersion(){throw"virtual function that must have a derived implementation"}_getColorDepth(){throw"virtual function that must have a derived implementation"}_getLanguage(){throw"virtual function that must have a derived implementation"}_getLibraryVersion(){return this._libraryVersion}}class r extends i{constructor(e){super(e)}_getScreenResolution(){try{return(window.screen.width*window.devicePixelRatio).toString()+"x"+(window.screen.height*window.devicePixelRatio).toString()}catch(e){return"0x0"}}_getViewportSize(){try{return Math.max(document.documentElement.clientWidth,window.innerWidth||0).toString()+"x"+Math.max(document.documentElement.clientHeight,window.innerHeight||0).toString()}catch(e){return"0x0"}}_getVersion(){try{return chrome.runtime.getManifest().version}catch(e){return 0}}_getColorDepth(){try{return window.screen.colorDepth+"-bit"}catch(e){return"0-bit"}}_getLanguage(){try{return navigator.language}catch(e){return""}}}function a(e,t,n,i,r,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function o(e){a(s,i,r,o,c,"next",e)}function c(e){a(s,i,r,o,c,"throw",e)}o(void 0)}))}}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var c={};function u(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:c}var l=Object.assign,d=Object.getOwnPropertyDescriptor,h=Object.defineProperty,p=Object.prototype,g=[];Object.freeze(g);var f={};Object.freeze(f);var m="undefined"!=typeof Proxy,v=Object.toString();function _(){m||o("Proxy not available")}function y(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var b=function(){};function S(e){return"function"==typeof e}function E(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function T(e){return null!==e&&"object"==typeof e}function A(e){if(!T(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===v}function O(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function w(e,t,n){h(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function C(e,t,n){h(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function I(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return T(e)&&!0===e[n]}}function R(e){return e instanceof Map}function N(e){return e instanceof Set}var D=void 0!==Object.getOwnPropertySymbols;var L="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:D?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function k(e){return null===e?null:"object"==typeof e?""+e:e}function P(e,t){return p.hasOwnProperty.call(e,t)}var U=Object.getOwnPropertyDescriptors||function(e){var t={};return L(e).forEach((function(n){t[n]=d(e,n)})),t};function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function x(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Y.apply(this,arguments)}function j(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,G(e,t)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K=Symbol("mobx-stored-annotations");function H(e){return Object.assign((function(t,n){W(t,n,e)}),e)}function W(e,t,n){P(e,K)||w(e,K,Y({},e[K])),function(e){return e.annotationType_===ee}(n)||(e[K][t]=n)}var J=Symbol("mobx administration"),z=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ze.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return vt(this)},t.reportChanged=function(){ft(),_t(this),dt.stateVersion=dt.stateVersion<Number.MAX_SAFE_INTEGER?dt.stateVersion+1:Number.MIN_SAFE_INTEGER,mt()},t.toString=function(){return this.name_},e}(),q=I("Atom",z);function $(e,t,n){void 0===t&&(t=b),void 0===n&&(n=b);var i,r=new z(e);return t!==b&&Gt(xt,r,t,i),n!==b&&jt(r,n),r}var X={identity:function(e,t){return e===t},structural:function(e,t){return ni(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return ni(e,t,1)}};function Q(e,t,n){return qt(e)?e:Array.isArray(e)?Le.array(e,{name:n}):A(e)?Le.object(e,void 0,{name:n}):R(e)?Le.map(e,{name:n}):N(e)?Le.set(e,{name:n}):"function"!=typeof e||Pt(e)||zt(e)?e:O(e)?Wt(e):kt(n,e)}function Z(e){return e}var ee="override";function te(e,t){return{annotationType_:e,options_:t,make_:ne,extend_:ie}}function ne(e,t,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Pt(n.value))return 1;var a=re(e,this,t,n,!1);return h(i,t,a),2}function ie(e,t,n,i){var r=re(e,this,t,n);return e.defineProperty_(t,r,i)}function re(e,t,n,i,r){var a,s,o,c,u,l,d,h;void 0===r&&(r=dt.safeDescriptors),h=i,t.annotationType_,h.value;var p,g=i.value;null!=(a=t.options_)&&a.bound&&(g=g.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Be(null!=(s=null==(o=t.options_)?void 0:o.name)?s:n.toString(),g,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function ae(e,t){return{annotationType_:e,options_:t,make_:se,extend_:oe}}function se(e,t,n,i){var r;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!P(e.target_,t)||!zt(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(zt(n.value))return 1;var a=ce(e,this,t,n,!1,!1);return h(i,t,a),2}function oe(e,t,n,i){var r,a=ce(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,a,i)}function ce(e,t,n,i,r,a){var s;void 0===a&&(a=dt.safeDescriptors),s=i,t.annotationType_,s.value;var o,c=i.value;(zt(c)||(c=Wt(c)),r)&&((c=c.bind(null!=(o=e.proxy_)?o:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function ue(e,t){return{annotationType_:e,options_:t,make_:le,extend_:de}}function le(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function de(e,t,n,i){var r;return r=n,this.annotationType_,r.get,e.defineComputedProperty_(t,Y({},this.options_,{get:n.get,set:n.set}),i)}function he(e,t){return{annotationType_:e,options_:t,make_:pe,extend_:ge}}function pe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ge(e,t,n,i){var r,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(r=null==(a=this.options_)?void 0:a.enhancer)?r:Q,i)}var fe="true",me=ve();function ve(e){return{annotationType_:fe,options_:e,make_:_e,extend_:ye}}function _e(e,t,n,i){var r,a,s,o;if(n.get)return Me.make_(e,t,n,i);if(n.set){var c=Be(t.toString(),n.set);return i===e.target_?null===e.defineProperty_(t,{configurable:!dt.safeDescriptors||e.isPlainObject_,set:c})?0:2:(h(i,t,{configurable:!0,set:c}),2)}if(i!==e.target_&&"function"==typeof n.value)return O(n.value)?(null!=(o=this.options_)&&o.autoBind?Wt.bound:Wt).make_(e,t,n,i):(null!=(s=this.options_)&&s.autoBind?kt.bound:kt).make_(e,t,n,i);var u,l=!1===(null==(r=this.options_)?void 0:r.deep)?Le.ref:Le;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,i)}function ye(e,t,n,i){var r,a,s;if(n.get)return Me.extend_(e,t,n,i);if(n.set)return e.defineProperty_(t,{configurable:!dt.safeDescriptors||e.isPlainObject_,set:Be(t.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?Le.ref:Le).extend_(e,t,n,i)}var be={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Se(e){return e||be}Object.freeze(be);var Ee=he("observable"),Te=he("observable.ref",{enhancer:Z}),Ae=he("observable.shallow",{enhancer:function(e,t,n){return null==e||Gn(e)||Tn(e)||Nn(e)||kn(e)?e:Array.isArray(e)?Le.array(e,{name:n,deep:!1}):A(e)?Le.object(e,void 0,{name:n,deep:!1}):R(e)?Le.map(e,{name:n,deep:!1}):N(e)?Le.set(e,{name:n,deep:!1}):void 0}}),Oe=he("observable.struct",{enhancer:function(e,t){return ni(e,t)?t:e}}),we=H(Ee);function Ce(e){return!0===e.deep?Q:!1===e.deep?Z:(t=e.defaultDecorator)&&null!=(n=null==(i=t.options_)?void 0:i.enhancer)?n:Q;var t,n,i}function Ie(e,t,n){if(!E(t))return qt(e)?e:A(e)?Le.object(e,t,n):Array.isArray(e)?Le.array(e,t):R(e)?Le.map(e,t):N(e)?Le.set(e,t):"object"==typeof e&&null!==e?e:Le.box(e,t);W(e,t,Ee)}l(Ie,we);var Re,Ne,De={box:function(e,t){var n=Se(t);return new We(e,Ce(n),n.name,!0,n.equals)},array:function(e,t){var n=Se(t);return(!1===dt.useProxies||!1===n.proxy?Xn:gn)(e,Ce(n),n.name)},map:function(e,t){var n=Se(t);return new Rn(e,Ce(n),n.name)},set:function(e,t){var n=Se(t);return new Ln(e,Ce(n),n.name)},object:function(e,t,n){return Ft(!1===dt.useProxies||!1===(null==n?void 0:n.proxy)?xn({},n):function(e,t){var n,i;return _(),e=xn(e,t),null!=(i=(n=e[J]).proxy_)?i:n.proxy_=new Proxy(e,tn)}({},n),e,t)},ref:H(Te),shallow:H(Ae),deep:we,struct:H(Oe)},Le=l(Ie,De),ke="computed",Pe=ue(ke),Ue=ue("computed.struct",{equals:X.structural}),Me=function(e,t){if(E(t))return W(e,t,Pe);if(A(e))return H(ue(ke,e));var n=A(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new $e(n)};Object.assign(Me,Pe),Me.struct=H(Ue);var xe,Ye=0,je=1,Ge=null!=(Re=null==(Ne=d((function(){}),"name"))?void 0:Ne.configurable)&&Re,Fe={value:"action",configurable:!0,writable:!1,enumerable:!1};function Be(e,t,n,i){function r(){return function(e,t,n,i,r){var a=function(e,t,n,i){var r=!1,a=0,s=dt.trackingDerivation,o=!t||!s;ft();var c=dt.allowStateChanges;o&&(rt(),c=Ve(!0));var u=st(!0),l={runAsAction_:o,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:r,startTime_:a,actionId_:je++,parentActionId_:Ye};return Ye=l.actionId_,l}(0,t);try{return n.apply(i,r)}catch(e){throw a.error_=e,e}finally{!function(e){Ye!==e.actionId_&&o(30);Ye=e.parentActionId_,void 0!==e.error_&&(dt.suppressReactionErrors=!0);Ke(e.prevAllowStateChanges_),ot(e.prevAllowStateReads_),mt(),e.runAsAction_&&at(e.prevDerivation_);dt.suppressReactionErrors=!1}(a)}}(0,n,t,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,Ge&&(Fe.value=e,h(r,"name",Fe)),r}function Ve(e){var t=dt.allowStateChanges;return dt.allowStateChanges=e,t}function Ke(e){dt.allowStateChanges=e}xe=Symbol.toPrimitive;var He,We=function(e){function t(t,n,i,r,a){var s;return void 0===i&&(i="ObservableValue"),void 0===a&&(a=X.default),(s=e.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=a,s.value_=n(t,void 0,i),s}j(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==dt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(nn(this)){var t=an(this,{object:this,type:dn,newValue:e});if(!t)return dt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?dt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),sn(this)&&cn(this,{type:dn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return rn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:dn,newValue:this.value_,oldValue:void 0}),on(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return k(this.get())},n[xe]=function(){return this.valueOf()},t}(z),Je=I("ObservableValue",We);He=Symbol.toPrimitive;var ze,qe,$e=function(){function e(e){this.dependenciesState_=ze.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ze.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Qe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=qe.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||o(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Be("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?X.structural:X.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==ze.UP_TO_DATE_)return;e.lowestObserverState_=ze.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===ze.UP_TO_DATE_&&(e.dependenciesState_=ze.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&o(32,this.name_,this.derivation),0!==dt.inBatch||0!==this.observers_.size||this.keepAlive_){if(vt(this),et(this)){var e=dt.trackingContext;this.keepAlive_&&!e&&(dt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===ze.STALE_)return;e.lowestObserverState_=ze.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===ze.POSSIBLY_STALE_?t.dependenciesState_=ze.STALE_:t.dependenciesState_===ze.UP_TO_DATE_&&(e.lowestObserverState_=ze.UP_TO_DATE_)}))}(this),dt.trackingContext=e}}else et(this)&&(this.warnAboutUntrackedRead_(),ft(),this.value_=this.computeValue_(!1),mt());var t=this.value_;if(Ze(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&o(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else o(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===ze.NOT_TRACKING_,n=this.computeValue_(!0),i=t||Ze(e)||Ze(n)||!this.equals_(e,n);return i&&(this.value_=n),i},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ve(!1);if(e)t=tt(this,this.derivation,this.scope_);else if(!0===dt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Qe(e)}return Ke(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(nt(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,i=!0,r=void 0;return Ut((function(){var a=n.get();if(!i||t){var s=rt();e({observableKind:"computed",debugObjectName:n.name_,type:dn,object:n,newValue:a,oldValue:r}),at(s)}i=!1,r=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return k(this.get())},t[He]=function(){return this.valueOf()},e}(),Xe=I("ComputedValue",$e);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(ze||(ze={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(qe||(qe={}));var Qe=function(e){this.cause=void 0,this.cause=e};function Ze(e){return e instanceof Qe}function et(e){switch(e.dependenciesState_){case ze.UP_TO_DATE_:return!1;case ze.NOT_TRACKING_:case ze.STALE_:return!0;case ze.POSSIBLY_STALE_:for(var t=st(!0),n=rt(),i=e.observing_,r=i.length,a=0;a<r;a++){var s=i[a];if(Xe(s)){if(dt.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return at(n),ot(t),!0}if(e.dependenciesState_===ze.STALE_)return at(n),ot(t),!0}}return ct(e),at(n),ot(t),!1}}function tt(e,t,n){var i=st(!0);ct(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++dt.runId;var r,a=dt.trackingDerivation;if(dt.trackingDerivation=e,dt.inBatch++,!0===dt.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new Qe(e)}return dt.inBatch--,dt.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,i=ze.UP_TO_DATE_,r=0,a=e.unboundDepsCount_,s=0;s<a;s++){var o=n[s];0===o.diffValue_&&(o.diffValue_=1,r!==s&&(n[r]=o),r++),o.dependenciesState_>i&&(i=o.dependenciesState_)}n.length=r,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&pt(c,e),c.diffValue_=0}for(;r--;){var u=n[r];1===u.diffValue_&&(u.diffValue_=0,ht(u,e))}i!==ze.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}(e),ot(i),r}function nt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)pt(t[n],e);e.dependenciesState_=ze.NOT_TRACKING_}function it(e){var t=rt();try{return e()}finally{at(t)}}function rt(){var e=dt.trackingDerivation;return dt.trackingDerivation=null,e}function at(e){dt.trackingDerivation=e}function st(e){var t=dt.allowStateReads;return dt.allowStateReads=e,t}function ot(e){dt.allowStateReads=e}function ct(e){if(e.dependenciesState_!==ze.UP_TO_DATE_){e.dependenciesState_=ze.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=ze.UP_TO_DATE_}}var ut=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},lt=!0,dt=function(){var e=u();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(lt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new ut).version&&(lt=!1),lt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ut):(setTimeout((function(){o(35)}),1),new ut)}();function ht(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function pt(e,t){e.observers_.delete(t),0===e.observers_.size&&gt(e)}function gt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,dt.pendingUnobservations.push(e))}function ft(){dt.inBatch++}function mt(){if(0==--dt.inBatch){Et();for(var e=dt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof $e&&n.suspend_())}dt.pendingUnobservations=[]}}function vt(e){var t=dt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&dt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&dt.inBatch>0&&gt(e),!1)}function _t(e){e.lowestObserverState_!==ze.STALE_&&(e.lowestObserverState_=ze.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===ze.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=ze.STALE_})))}var yt=function(){function e(e,t,n,i){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=ze.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=qe.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,dt.pendingReactions.push(this),Et())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ft(),this.isScheduled_=!1;var e=dt.trackingContext;if(dt.trackingContext=this,et(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}dt.trackingContext=e,mt()}},t.track=function(e){if(!this.isDisposed_){ft(),this.isRunning_=!0;var t=dt.trackingContext;dt.trackingContext=this;var n=tt(this,e,void 0);dt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&nt(this),Ze(n)&&this.reportExceptionInDerivation_(n.cause),mt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(dt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";dt.suppressReactionErrors||console.error(n,e),dt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ft(),nt(this),mt()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[J]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){o("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];"boolean"==typeof n[n.length-1]&&(e=n.pop());var r=function(e){switch(e.length){case 0:return dt.trackingDerivation;case 1:return Qn(e[0]);case 2:return Qn(e[0],e[1])}}(n);if(!r)return o("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");r.isTracing_===qe.NONE&&console.log("[mobx.trace] '"+r.name_+"' tracing enabled");r.isTracing_=e?qe.BREAK:qe.LOG}(this,e)},e}(),bt=100,St=function(e){return e()};function Et(){dt.inBatch>0||dt.isRunningReactions||St(Tt)}function Tt(){dt.isRunningReactions=!0;for(var e=dt.pendingReactions,t=0;e.length>0;){++t===bt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}dt.isRunningReactions=!1}var At=I("Reaction",yt);var Ot="action",wt="autoAction",Ct=te(Ot),It=te("action.bound",{bound:!0}),Rt=te(wt,{autoAction:!0}),Nt=te("autoAction.bound",{autoAction:!0,bound:!0});function Dt(e){return function(t,n){return S(t)?Be(t.name||"<unnamed action>",t,e):S(n)?Be(t,n,e):E(n)?W(t,n,e?Rt:Ct):E(t)?H(te(e?wt:Ot,{name:t,autoAction:e})):void 0}}var Lt=Dt(!1);Object.assign(Lt,Ct);var kt=Dt(!0);function Pt(e){return S(e)&&!0===e.isMobxAction}function Ut(e,t){var n,i;void 0===t&&(t=f);var r,a=null!=(n=null==(i=t)?void 0:i.name)?n:"Autorun";if(!t.scheduler&&!t.delay)r=new yt(a,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var s=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Mt}(t),o=!1;r=new yt(a,(function(){o||(o=!0,s((function(){o=!1,r.isDisposed_||r.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(r)}return r.schedule_(),r.getDisposer_()}Object.assign(kt,Rt),Lt.bound=H(It),kt.bound=H(Nt);var Mt=function(e){return e()};var xt="onBO",Yt="onBUO";function jt(e,t,n){return Gt(Yt,e,t,n)}function Gt(e,t,n,i){var r="function"==typeof i?Qn(t,n):Qn(t),a=S(i)?i:n,s=e+"L";return r[s]?r[s].add(a):r[s]=new Set([a]),function(){var e=r[s];e&&(e.delete(a),0===e.size&&delete r[s])}}function Ft(e,t,n,i){var r=U(t),a=xn(e,i)[J];ft();try{L(r).forEach((function(e){a.extend_(e,r[e],!n||(!(e in n)||n[e]))}))}finally{mt()}return e}var Bt=0;function Vt(){this.message="FLOW_CANCELLED"}Vt.prototype=Object.create(Error.prototype);var Kt=ae("flow"),Ht=ae("flow.bound",{bound:!0}),Wt=Object.assign((function(e,t){if(E(t))return W(e,t,Kt);var n=e,i=n.name||"<unnamed flow>",r=function(){var e,t=arguments,r=++Bt,a=Lt(i+" - runid: "+r+" - init",n).apply(this,t),s=void 0,o=new Promise((function(t,n){var o=0;function c(e){var t;s=void 0;try{t=Lt(i+" - runid: "+r+" - yield "+o++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function u(e){var t;s=void 0;try{t=Lt(i+" - runid: "+r+" - yield "+o++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!S(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return o.cancel=Lt(i+" - runid: "+r+" - cancel",(function(){try{s&&Jt(s);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(b,b),Jt(n),e(new Vt)}catch(t){e(t)}})),o};return r.isMobXFlow=!0,r}),Kt);function Jt(e){S(e.cancel)&&e.cancel()}function zt(e){return!0===(null==e?void 0:e.isMobXFlow)}function qt(e){return function(e,t){return!!e&&(void 0!==t?!!Gn(e)&&e[J].values_.has(t):Gn(e)||!!e[J]||q(e)||At(e)||Xe(e))}(e)}function $t(e,t,n){return e.set(t,n),n}function Xt(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!qt(e))return e;if(Je(e)||Xe(e))return Xt(e.get(),t);if(t.has(e))return t.get(e);if(Tn(e)){var n=$t(t,e,new Array(e.length));return e.forEach((function(e,i){n[i]=Xt(e,t)})),n}if(kn(e)){var i=$t(t,e,new Set);return e.forEach((function(e){i.add(Xt(e,t))})),i}if(Nn(e)){var r=$t(t,e,new Map);return e.forEach((function(e,n){r.set(n,Xt(e,t))})),r}var a=$t(t,e,{});return function(e){if(Gn(e))return e[J].ownKeys_();o(38)}(e).forEach((function(n){p.propertyIsEnumerable.call(e,n)&&(a[n]=Xt(e[n],t))})),a}function Qt(e,t){return Xt(e,new Map)}function Zt(e,t){void 0===t&&(t=void 0),ft();try{return e.apply(t)}finally{mt()}}function en(e){return e[J]}Wt.bound=H(Ht);var tn={has:function(e,t){return en(e).has_(t)},get:function(e,t){return en(e).get_(t)},set:function(e,t,n){var i;return!!E(t)&&(null==(i=en(e).set_(t,n,!0))||i)},deleteProperty:function(e,t){var n;return!!E(t)&&(null==(n=en(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var i;return null==(i=en(e).defineProperty_(t,n))||i},ownKeys:function(e){return en(e).ownKeys_()},preventExtensions:function(e){o(13)}};function nn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function rn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),y((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function an(e,t){var n=rt();try{for(var i=[].concat(e.interceptors_||[]),r=0,a=i.length;r<a&&((t=i[r](t))&&!t.type&&o(14),t);r++);return t}finally{at(n)}}function sn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function on(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),y((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function cn(e,t){var n=rt(),i=e.changeListeners_;if(i){for(var r=0,a=(i=i.slice()).length;r<a;r++)i[r](t);at(n)}}var un=Symbol("mobx-keys");var ln="splice",dn="update",hn={get:function(e,t){var n=e[J];return t===J?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?P(fn,t)?fn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var i=e[J];return"length"===t&&i.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){o(15)}},pn=function(){function e(e,t,n,i){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new z(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return rn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),on(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&o("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&o(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&$n(e+t+1)},t.spliceWithArray_=function(e,t,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=g),nn(this)){var a=an(this,{object:this.proxy_,type:ln,index:e,removedCount:t,added:n});if(!a)return g;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return i.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var o=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,o),this.dehanceValues_(o)},t.spliceItemsIntoValues_=function(e,t,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[e,t].concat(n));var r=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var o=0;o<a.length;o++)this.values_[e+n.length+o]=a[o];return r},t.notifyArrayChildUpdate_=function(e,t,n){var i=!this.owned_&&!1,r=sn(this),a=r||i?{observableKind:"array",object:this.proxy_,type:dn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&cn(this,a)},t.notifyArraySplice_=function(e,t,n){var i=!this.owned_&&!1,r=sn(this),a=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ln,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&cn(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&o(17,e,n.length),e<n.length){this.atom_;var i=n[e];if(nn(this)){var r=an(this,{type:dn,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var a=new Array(e+1-n.length),s=0;s<a.length-1;s++)a[s]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function gn(e,t,n,i){void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),_();var r=new pn(n,t,i,!1);C(r.values_,J,r);var a=new Proxy(r.values_,hn);if(r.proxy_=a,e&&e.length){var s=Ve(!0);r.spliceWithArray_(0,0,e),Ke(s)}return a}var fn={clear:function(){return this.splice(0)},replace:function(e){var t=this[J];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this[J];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[J].spliceWithArray_(e,t,n)},push:function(){for(var e=this[J],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[J].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[J],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return dt.trackingDerivation&&o(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){dt.trackingDerivation&&o(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[J],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function mn(e,t){"function"==typeof Array.prototype[e]&&(fn[e]=t(e))}function vn(e){return function(){var t=this[J];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function _n(e){return function(t,n){var i=this,r=this[J];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,i)}))}}function yn(e){return function(){var t=this,n=this[J];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,i){return r(e,n,i,t)},i[e].apply(i,arguments)}}mn("concat",vn),mn("flat",vn),mn("includes",vn),mn("indexOf",vn),mn("join",vn),mn("lastIndexOf",vn),mn("slice",vn),mn("toString",vn),mn("toLocaleString",vn),mn("every",_n),mn("filter",_n),mn("find",_n),mn("findIndex",_n),mn("flatMap",_n),mn("forEach",_n),mn("map",_n),mn("some",_n),mn("reduce",yn),mn("reduceRight",yn);var bn,Sn,En=I("ObservableArrayAdministration",pn);function Tn(e){return T(e)&&En(e[J])}var An={},On="add",wn="delete";bn=Symbol.iterator,Sn=Symbol.toStringTag;var Cn,In,Rn=function(){function e(e,t,n){var i=this;void 0===t&&(t=Q),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[J]=An,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,S(Map)||o(18),this.keysAtom_=$("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=Ve(e);try{return t()}finally{Ke(n)}}(!0,(function(){i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!dt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var i=n=new We(this.has_(e),Z,"ObservableMap.key?",!1);this.hasMap_.set(e,i),jt(i,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(nn(this)){var i=an(this,{type:n?dn:On,object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,nn(this))&&!an(this,{type:wn,object:this,name:e}))return!1;if(this.has_(e)){var n=sn(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:wn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Zt((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&cn(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==dt.UNCHANGED){var i=sn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:dn,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&cn(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Zt((function(){var i,r=new We(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(i=n.hasMap_.get(e))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=sn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:On,object:this,name:e,newValue:t}:null;i&&cn(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return ai({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return ai({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},t[bn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,i=V(this);!(n=i()).done;){var r=n.value,a=r[0],s=r[1];e.call(t,s,a,this)}},t.merge=function(e){var t=this;return Nn(e)&&(e=new Map(e)),Zt((function(){A(e)?function(e){var t=Object.keys(e);if(!D)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return p.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];return t.set(n,i)})):R(e)?(e.constructor!==Map&&o(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&o(20,e)})),this},t.clear=function(){var e=this;Zt((function(){it((function(){for(var t,n=V(e.keys());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.replace=function(e){var t=this;return Zt((function(){for(var n,i=function(e){if(R(e)||Nn(e))return e;if(Array.isArray(e))return new Map(e);if(A(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return o(21,e)}(e),r=new Map,a=!1,s=V(t.data_.keys());!(n=s()).done;){var c=n.value;if(!i.has(c))if(t.delete(c))a=!0;else{var u=t.data_.get(c);r.set(c,u)}}for(var l,d=V(i.entries());!(l=d()).done;){var h=l.value,p=h[0],g=h[1],f=t.data_.has(p);if(t.set(p,g),t.data_.has(p)){var m=t.data_.get(p);r.set(p,m),f||(a=!0)}}if(!a)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),_=r.keys(),y=v.next(),b=_.next();!y.done;){if(y.value!==b.value){t.keysAtom_.reportChanged();break}y=v.next(),b=_.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return on(this,e)},t.intercept_=function(e){return rn(this,e)},x(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Sn,get:function(){return"Map"}}]),e}(),Nn=I("ObservableMap",Rn);var Dn={};Cn=Symbol.iterator,In=Symbol.toStringTag;var Ln=function(){function e(e,t,n){void 0===t&&(t=Q),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[J]=Dn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,S(Set)||o(22),this.atom_=$(this.name_),this.enhancer_=function(e,i){return t(e,i,n)},e&&this.replace(e)}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Zt((function(){it((function(){for(var t,n=V(e.data_.values());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.forEach=function(e,t){for(var n,i=V(this);!(n=i()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,nn(this))&&!an(this,{type:On,object:this,newValue:e}))return this;if(!this.has(e)){Zt((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=sn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:On,object:this,newValue:e}:null;n&&cn(this,i)}return this},t.delete=function(e){var t=this;if(nn(this)&&!an(this,{type:wn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=sn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:wn,object:this,oldValue:e}:null;return Zt((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&cn(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return ai({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return ai({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return kn(e)&&(e=new Set(e)),Zt((function(){Array.isArray(e)||N(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&o("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return on(this,e)},t.intercept_=function(e){return rn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Cn]=function(){return this.values()},x(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:In,get:function(){return"Set"}}]),e}(),kn=I("ObservableSet",Ln),Pn=Object.create(null),Un="remove",Mn=function(){function e(e,t,n,i){void 0===t&&(t=new Map),void 0===i&&(i=me),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new z("ObservableObject.keys"),this.isPlainObject_=A(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof $e)return n.set(t),!0;if(nn(this)){var i=an(this,{type:dn,object:this.proxy_||this.target_,name:e,newValue:t});if(!i)return null;t=i.newValue}if((t=n.prepareNewValue_(t))!==dt.UNCHANGED){var r=sn(this),a=r?{type:dn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&cn(this,a)}return!0},t.get_=function(e){return dt.trackingDerivation&&!P(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),P(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!dt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new We(e in this.target_,Z,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[K])&&n[e])return;o(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==p;){var r=d(i,e);if(r){var a=t.make_(this,e,r,i);if(0===a)return;if(1===a)break}i=Object.getPrototypeOf(i)}Fn(this,t,e)}},t.extend_=function(e,t,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,i);var r=n.extend_(this,e,t,i);return r&&Fn(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{ft();var i=this.delete_(e);if(!i)return i;if(nn(this)){var r=an(this,{object:this.proxy_||this.target_,name:e,type:On,newValue:t.value});if(!r)return null;var a=r.newValue;t.value!==a&&(t=Y({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else h(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{mt()}return!0},t.defineObservableProperty_=function(e,t,n,i){void 0===i&&(i=!1);try{ft();var r=this.delete_(e);if(!r)return r;if(nn(this)){var a=an(this,{object:this.proxy_||this.target_,name:e,type:On,newValue:t});if(!a)return null;t=a.newValue}var s=jn(e),o={configurable:!dt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,e,o))return!1}else h(this.target_,e,o);var c=new We(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{mt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{ft();var i=this.delete_(e);if(!i)return i;if(nn(this))if(!an(this,{object:this.proxy_||this.target_,name:e,type:On,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=jn(e),a={configurable:!dt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else h(this.target_,e,a);this.values_.set(e,new $e(t)),this.notifyPropertyAddition_(e,void 0)}finally{mt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!P(this.target_,e))return!0;if(nn(this)&&!an(this,{object:this.proxy_||this.target_,name:e,type:Un}))return null;try{var n,i;ft();var r,a=sn(this),s=this.values_.get(e),o=void 0;if(!s&&a)o=null==(r=d(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof We&&(o=s.value_),_t(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(e in this.target_),a){var c={type:Un,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:e};0,a&&cn(this,c)}}finally{mt()}return!0},t.observe_=function(e,t){return on(this,e)},t.intercept_=function(e){return rn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,i,r=sn(this);if(r){var a=r?{type:On,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&cn(this,a)}null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),L(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function xn(e,t){var n;if(P(e,J))return e;var i=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new Mn(e,new Map,String(i),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:ve(e):void 0}(t));return w(e,J,r),e}var Yn=I("ObservableObjectAdministration",Mn);function jn(e){return Pn[e]||(Pn[e]={get:function(){return this[J].getObservablePropValue_(e)},set:function(t){return this[J].setObservablePropValue_(e,t)}})}function Gn(e){return!!T(e)&&Yn(e[J])}function Fn(e,t,n){var i;null==(i=e.target_[K])||delete i[n]}var Bn,Vn,Kn=zn(0),Hn=0,Wn=function(){};Bn=Wn,Vn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Bn.prototype,Vn):void 0!==Bn.prototype.__proto__?Bn.prototype.__proto__=Vn:Bn.prototype=Vn;var Jn=function(e,t,n){function i(t,n,i,r){var a;void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),a=e.call(this)||this;var s=new pn(i,n,r,!0);if(s.proxy_=F(a),C(F(a),J,s),t&&t.length){var o=Ve(!0);a.spliceWithArray(0,0,t),Ke(o)}return Object.defineProperty(F(a),"0",Kn),a}j(i,e);var r=i.prototype;return r.concat=function(){this[J].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Tn(e)?e.slice():e})))},r[n]=function(){var e=this,t=0;return ai({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},x(i,[{key:"length",get:function(){return this[J].getArrayLength_()},set:function(e){this[J].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),i}(Wn,Symbol.toStringTag,Symbol.iterator);function zn(e){return{enumerable:!1,configurable:!0,get:function(){return this[J].get_(e)},set:function(t){this[J].set_(e,t)}}}function qn(e){h(Jn.prototype,""+e,zn(e))}function $n(e){if(e>Hn){for(var t=Hn;t<e+100;t++)qn(t);Hn=e}}function Xn(e,t,n){return new Jn(e,t,n)}function Qn(e,t){if("object"==typeof e&&null!==e){if(Tn(e))return void 0!==t&&o(23),e[J].atom_;if(kn(e))return e.atom_;if(Nn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||o(25,t,ei(e)),n}if(Gn(e)){if(!t)return o(26);var i=e[J].values_.get(t);return i||o(27,t,ei(e)),i}if(q(e)||Xe(e)||At(e))return e}else if(S(e)&&At(e[J]))return e[J];o(28)}function Zn(e,t){return e||o(29),void 0!==t?Zn(Qn(e,t)):q(e)||Xe(e)||At(e)||Nn(e)||kn(e)?e:e[J]?e[J]:void o(24,e)}function ei(e,t){var n;if(void 0!==t)n=Qn(e,t);else{if(Pt(e))return e.name;n=Gn(e)||Nn(e)||kn(e)?Zn(e):Qn(e)}return n.name_}Object.entries(fn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&w(Jn.prototype,t,n)})),$n(1e3);var ti=p.toString;function ni(e,t,n){return void 0===n&&(n=-1),ii(e,t,n)}function ii(e,t,n,i,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var s=ti.call(e);if(s!==ti.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=ri(e),t=ri(t);var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(S(c)&&c instanceof c&&S(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return r[l]===t;if(i.push(e),r.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!ii(e[l],t[l],n-1,i,r))return!1}else{var d,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!P(t,d=h[l])||!ii(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function ri(e){return Tn(e)?e.slice():R(e)||Nn(e)||N(e)||kn(e)?Array.from(e.entries()):e}function ai(e){return e[Symbol.iterator]=si,e}function si(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===u()[e]&&o("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:ei},$mobx:J});let oi=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},ci=class{static encode(e){var t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);var t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};var ui="local";let li=class extends oi{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(this._event&&t===this._syncType&&this._keys.has(Object.keys(e)[0])){var n=JSON.parse(ci.decode(Object.values(e)[0].newValue));this._event(n)}}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise(function(){var r=s((function*(r,a){try{if("none"===i._syncType)return void r(!0);var s={};if(n){if(Object.keys(e).length>0){var o=yield i._retrieve(e,i._syncType);if(o){if(null===o[e]){var c=ci.encode(t);return i._store(e,c,i._syncType),i._keys.add(e),void r(!0)}if((s=ci.decode(o[e]))===JSON.stringify(t))return void r(!0);var u=i.mergeDeep(JSON.parse(s),t,!0),l=ci.encode(u);return i._store(e,l,i._syncType),i._keys.add(e),void r(!0)}var d=ci.encode(t);return i._store(e,d,i._syncType),i._keys.add(e),void r(!0)}}else{var h=ci.encode(t);i._store(e,h,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}));return function(e,t){return r.apply(this,arguments)}}())}retrieve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return new Promise(function(){var i=s((function*(i,r){try{if("none"===n._syncType)return void i(t);var a={};if(Object.keys(e).length>0){var s=yield n._retrieve(e,n._syncType);if(s)a=ci.decode(s[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(a),!0));else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}));return function(e,t){return i.apply(this,arguments)}}())}remove(e){var t=this;return new Promise(function(){var n=s((function*(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){yield t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}));return function(e,t){return n.apply(this,arguments)}}())}mergeDeep(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(e=>{var t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);var i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{var a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}},di=class extends EventTarget{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ui,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];super(),this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=i,function(e,t,n){if(A(e))return Ft(e,e,t,n);var i=xn(e,n)[J];if(!e[un]){var r=Object.getPrototypeOf(e),a=new Set([].concat(L(e),L(r)));a.delete("constructor"),a.delete(J),w(r,un,a)}ft();try{e[un].forEach((function(e){return i.make_(e,!t||!(e in t)||t[e])}))}finally{mt()}}(this),this._persistentStore=null,this._persistOn=r)}initialise(){var e=this;return s((function*(){return new Promise(function(){var t=s((function*(t,n){e._persistentStore=new li(e.storageType),e._persistentStore.onUpdate(function(){var t=s((function*(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));return function(e){return t.apply(this,arguments)}}());var i=yield e._persistentStore.retrieve(e.storageKey,Qt(e.state));e.state&&(e.state=i),e._startAutoSaving(e,e.storageKey),t(i)}));return function(e,n){return t.apply(this,arguments)}}())}))()}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return Qt(this.state)}_startAutoSaving(e,t){var n=this;Ut(s((function*(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))})))}_storeOnSave(e,t){var n=arguments,i=this;return s((function*(){var r=n.length>2&&void 0!==n[2]&&n[2];(i._persistOn||r)&&(yield i._persistentStore.store(t,Qt(e.state),i.merge))}))()}};var hi=1,pi=2,gi=3,fi=4,mi=5,vi=6,_i=7,yi=8;class bi extends EventTarget{constructor(){super(),this.FRAMEKEY="texthelp-cfe-9828",this.SESSIONKEY="texthelp-cfe-9829",this._frameId=null,this._sessionId=null}getSessionId(){return s((function*(){return new Promise(((e,t)=>{"undefined"!=typeof window?chrome.runtime.sendMessage({command:"th-getWindowId"},(t=>{e(t.toString())})):e("serviceworkerId")}))}))()}initialise(){var e=this;return s((function*(){return new Promise(function(){var t=s((function*(t,n){e._frameId=bi.getGuid(),e._sessionId=yield e.getSessionId(),chrome.storage.onChanged.addListener(((t,n)=>{var i=function(){if(r==e.FRAMEKEY){var n=JSON.parse(t[e.FRAMEKEY].newValue);switch(n.data.source={},n.data.source.sessionId=n.sessionId,n.data.source.frameId=n.frameId,n.type){case _i:"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case hi:e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case gi:n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case pi:chrome.storage.local.get(["activeFrame"],function(){var t=s((function*(t){t.activeFrame&&t.activeFrame===e._frameId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}));return function(e){return t.apply(this,arguments)}}());break;case fi:chrome.storage.local.get(["activeFrame"],function(){var t=s((function*(t){t.activeFrame&&t.activeFrame===e._frameId&&n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}));return function(e){return t.apply(this,arguments)}}());break;case mi:"undefined"!=typeof window&&window.self===window.top&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case vi:"undefined"!=typeof window&&window.self===window.top&&n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case yi:n.sessionId===e._sessionId&&n.frameId===e._frameId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}}};for(var r in t)i()})),t({frameId:e._frameId,sessionId:e._sessionId})}));return function(e,n){return t.apply(this,arguments)}}())}))()}dispatchStorageEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._sessionId,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._frameId,a={name:e,time:Date.now(),type:t,data:n,sessionId:i,frameId:r};chrome.storage.local.set({[this.FRAMEKEY]:JSON.stringify(a)})}static getGuid(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}let Si=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},Ei=class{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};const Ti="sync",Ai="local",Oi="none";let wi=class extends Si{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(Ei.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=Ei.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=Ei.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=Ei.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=Ei.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=Ei.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=Ei.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}};const Ci=Object.freeze({PLAY:"play",PAUSE:"pause",STOP:"stop",PREDICTION:"prediction",DICTIONARY:"dictionary",PICTUREDICTIONARY:"picturedictionary",SCREENSHOTREADER:"screenshotreader",AUDIOMAKER:"audiomaker",WEBSEARCH:"websearch",SCREENMASKING:"screenmasking",TALKANDTYPE:"talkandtype",TRANSLATOR:"translator",STUDYBLUE:"studyblue",STUDYPINK:"studypink",STUDYYELLOW:"studyyellow",STUDYGREEN:"studygreen",STUDYCLEAR:"studyclear",STUDYCOLLECT:"studycollect",VOCABLIST:"vocablist",VOICENOTE:"voicenote",CHECKIT:"checkit",PRACTICEREADINGALOUD:"practicereadingaloud",CLICKTOSPEAK:"clicktospeak",SIMPLIFY:"simplify"}),Ii=Object.freeze({TOP:"docked-top",FLOAT:"float",SELECTOR:"selector"});Object.freeze({"https://docs.google.com/document/*https://assignments.google.com*":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.VOICENOTE,Ci.CHECKIT,Ci.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*edit":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.VOICENOTE,Ci.CHECKIT,Ci.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*preview*":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.VOICENOTE,Ci.CHECKIT,Ci.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*pub":{dock:Ii.FLOAT,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*classroom.google.com":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.VOICENOTE,Ci.CHECKIT,Ci.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/presentation/*edit":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.VOICENOTE,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*edit":{dock:Ii.FLOAT,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*startquiz":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,"settings","help","logo","optionsmenu","minimise","maximise","options-menuitem"]},"https://docs.google.com/forms/*viewform":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*formresponse":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/redir*":{dock:Ii.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/edit.aspx*":{dock:Ii.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*word-edit.officeapps.live.com":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/:w:/*":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/:o:/*":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/*doc.aspx*":{dock:Ii.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]"],supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/*doc.aspx*.xls*":{dock:Ii.FLOAT,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.SIMPLIFY,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*onenote.officeapps.live.com/o/onenoteframe.aspx":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://reading.texthelp.com/readwrite":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://fluency.texthelp.com/readwrite":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://pra.dev.texthelp.com/*":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://pra.texthelp.com/*":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"http://localhost:10901/*":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://newsela.com/":{dock:Ii.FLOAT,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.SIMPLIFY,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://www.dogonews.com":{dock:Ii.FLOAT,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.SIMPLIFY,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify.texthelp.com":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify-qa.texthelp.com":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify.dev.texthelp.com":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://epub.texthelp.com/":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-epub-qa.texthelp.com/":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://epub.dev.texthelp.com":{dock:Ii.TOP,supported:[Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.instructure.com":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.SIMPLIFY,Ci.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.awinfosys.com":{dock:Ii.TOP,supported:[Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.SIMPLIFY,Ci.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},default:{dock:Ii.FLOAT,supported:[Ci.PLAY,Ci.PAUSE,Ci.STOP,Ci.PREDICTION,Ci.CLICKTOSPEAK,Ci.DICTIONARY,Ci.PICTUREDICTIONARY,Ci.SCREENSHOTREADER,Ci.AUDIOMAKER,Ci.WEBSEARCH,Ci.SCREENMASKING,Ci.TALKANDTYPE,Ci.TRANSLATOR,Ci.STUDYBLUE,Ci.STUDYPINK,Ci.STUDYYELLOW,Ci.STUDYGREEN,Ci.STUDYCLEAR,Ci.STUDYCOLLECT,Ci.VOCABLIST,Ci.SIMPLIFY,Ci.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]}});const Ri=Object.freeze({GROUP:"group",DOMAIN:"domain",SINGLE:"single"}),Ni=Object.freeze({FREEMIUM:"freemium",PREMIUM:"premium",TRIAL:"trial"});const Di=new class extends di{constructor(){const e=new Date;e.setDate(e.getDate()-1);const t={audiomaker:!1,checkit:!1,dictionary:!1,studyclear:!1,picturedictionary:!1,play:!0,practicereadingaloud:!0,prediction:!1,screenmasking:!1,screenshotreader:!1,simplify:!1,talkandtype:!1,translator:!0,vocablist:!1,websearch:!1,studyyellow:!1,studygreen:!1,studyblue:!1,studypink:!1,studycollect:!1,pause:!0,stop:!0,clicktospeak:!0,voicenote:!1},n={lastupdated:void 0,licensetype:Ri.SINGLE,licensesubscription:Ni.FREEMIUM,expiry:e.toISOString().split("T")[0],authcode:void 0,features:t,meta:{}};super({license:{lastupdated:void 0,licensetype:Ri.SINGLE,licensesubscription:Ni.FREEMIUM,expiry:e.toISOString().split("T")[0],authcode:void 0,features:t,meta:{}},lastlicense:void 0},Ai,"th.rw4gc.license.store",!1,!0),this.defaultFeatures=t,this.defaultLicense=n}set license(e){let t=JSON.stringify(e,((e,t)=>"currentDateTime"===e||"lastUpdated"===e?"null":t));if(this.state.lastlicense&&this.state.lastlicense===t)return;this.state.lastlicense=t;let n=!1;void 0!==e.trial&&(n=e.trial);let i=!1;void 0!==e.unlimited&&(i=e.unlimited),e.licensesubscription=Ni.FREEMIUM,e.licensetype=Ri.FREEMIUM,e.daysleft>0&&!n?e.licensesubscription=Ni.PREMIUM:e.daysleft>0&&n&&(e.licensesubscription=Ni.TRIAL),i?e.licensetype=Ri.DOMAIN:"group"==e.licence_type.toLowerCase()&&(e.licensetype=Ni.GROUP),this.state.license=e,this._mapLicense(e)}set authcode(e){void 0!==e&&(this.state.license.authcode=e)}get nextDay(){const e=new Date,t=1e4*e.getFullYear()+100*e.getMonth()+e.getDate(),n=this.state.license.expiry;return 1e4*n.getFullYear()+100*n.getMonth()+n.getDate()!==t}get lastUpdate(){return this.state.license.lastupdated?this.state.license.lastupdated.toString().split("T")[0]:void 0}get licenseObject(){return e({},this.state.license)}resetLicense(){this.state.lastlicense=void 0,this.state.license=JSON.parse(JSON.stringify(this.defaultLicense))}_mapLicense(t){let n={"Check It":Ci.CHECKIT,Prediction:Ci.PREDICTION,Dictionary:Ci.DICTIONARY,"Picture Dictionary":Ci.PICTUREDICTIONARY,Play:Ci.PLAY,"Screenshot Reader":Ci.SCREENSHOTREADER,"Audio Maker":Ci.AUDIOMAKER,"Screen Masking":Ci.SCREENMASKING,"Web Search":Ci.WEBSEARCH,"Talk&Type":Ci.TALKANDTYPE,Translator:Ci.TRANSLATOR,"Vocabulary List":Ci.VOCABLIST,"Voice Note":Ci.VOICENOTE,"Simplify Page":Ci.SIMPLIFY,"Practice Reading Aloud":Ci.PRACTICEREADINGALOUD,"Erase Highlights":Ci.STUDYCLEAR},i=t.features,r=Object.keys(i).reduce(((e,t)=>(void 0!==n[t]&&(e[n[t]]=i[t]),e)),{}),a=e({},this.defaultFeatures,r);void 0===i.Highlights&&(i.Highlights=!1),a[Ci.STUDYYELLOW]=i.Highlights,a[Ci.STUDYGREEN]=i.Highlights,a[Ci.STUDYBLUE]=i.Highlights,a[Ci.STUDYPINK]=i.Highlights,a[Ci.STUDYCOLLECT]=i.Highlights,a[Ci.STUDYCLEAR]=i.Highlights,void 0===i.Play&&(i.Play=!0),a[Ci.PAUSE]=i.Play,a[Ci.STOP]=i.Play,a[Ci.CLICKTOSPEAK]=i.Play,void 0===i["Practice Reading Aloud"]&&(a[Ci.PRACTICEREADINGALOUD]=!0),void 0===i.Translator&&(a[Ci.TRANSLATOR]=!0),this.state.license.features=JSON.parse(JSON.stringify(a))}};function Li(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var ki={};function Pi(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:ki}var Ui=Object.assign,Mi=Object.getOwnPropertyDescriptor,xi=Object.defineProperty,Yi=Object.prototype,ji=[];Object.freeze(ji);var Gi={};Object.freeze(Gi);var Fi="undefined"!=typeof Proxy,Bi=Object.toString();function Vi(){Fi||Li("Proxy not available")}function Ki(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Hi=function(){};function Wi(e){return"function"==typeof e}function Ji(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function zi(e){return null!==e&&"object"==typeof e}function qi(e){if(!zi(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===Bi}function $i(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function Xi(e,t,n){xi(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Qi(e,t,n){xi(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Zi(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return zi(e)&&!0===e[n]}}function er(e){return e instanceof Map}function tr(e){return e instanceof Set}var nr=void 0!==Object.getOwnPropertySymbols;var ir="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:nr?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function rr(e){return null===e?null:"object"==typeof e?""+e:e}function ar(e,t){return Yi.hasOwnProperty.call(e,t)}var sr=Object.getOwnPropertyDescriptors||function(e){var t={};return ir(e).forEach((function(n){t[n]=Mi(e,n)})),t};function or(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function cr(e,t,n){return t&&or(e.prototype,t),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ur(){return ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ur.apply(this,arguments)}function lr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dr(e,t)}function dr(e,t){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dr(e,t)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function gr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var fr=Symbol("mobx-stored-annotations");function mr(e){return Object.assign((function(t,n){vr(t,n,e)}),e)}function vr(e,t,n){ar(e,fr)||Xi(e,fr,ur({},e[fr])),function(e){return e.annotationType_===Or}(n)||(e[fr][t]=n)}var _r=Symbol("mobx administration"),yr=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ya.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Ba(this)},t.reportChanged=function(){Ga(),Va(this),Ma.stateVersion=Ma.stateVersion<Number.MAX_SAFE_INTEGER?Ma.stateVersion+1:Number.MIN_SAFE_INTEGER,Fa()},t.toString=function(){return this.name_},e}(),br=Zi("Atom",yr);function Sr(e,t,n){void 0===t&&(t=Hi),void 0===n&&(n=Hi);var i,r=new yr(e);return t!==Hi&&ds(cs,r,t,i),n!==Hi&&ls(r,n),r}var Er={identity:function(e,t){return e===t},structural:function(e,t){return Oo(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Oo(e,t,1)}};function Tr(e,t,n){return bs(e)?e:Array.isArray(e)?ia.array(e,{name:n}):qi(e)?ia.object(e,void 0,{name:n}):er(e)?ia.map(e,{name:n}):tr(e)?ia.set(e,{name:n}):"function"!=typeof e||as(e)||ys(e)?e:$i(e)?vs(e):rs(n,e)}function Ar(e){return e}var Or="override";function wr(e,t){return{annotationType_:e,options_:t,make_:Cr,extend_:Ir}}function Cr(e,t,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(as(n.value))return 1;var a=Rr(e,this,t,n,!1);return xi(i,t,a),2}function Ir(e,t,n,i){var r=Rr(e,this,t,n);return e.defineProperty_(t,r,i)}function Rr(e,t,n,i,r){var a,s,o,c,u,l,d,h;void 0===r&&(r=Ma.safeDescriptors),h=i,t.annotationType_,h.value;var p,g=i.value;null!=(a=t.options_)&&a.bound&&(g=g.bind(null!=(p=e.proxy_)?p:e.target_));return{value:pa(null!=(s=null==(o=t.options_)?void 0:o.name)?s:n.toString(),g,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function Nr(e,t){return{annotationType_:e,options_:t,make_:Dr,extend_:Lr}}function Dr(e,t,n,i){var r;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!ar(e.target_,t)||!ys(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(ys(n.value))return 1;var a=kr(e,this,t,n,!1,!1);return xi(i,t,a),2}function Lr(e,t,n,i){var r,a=kr(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,a,i)}function kr(e,t,n,i,r,a){var s;void 0===a&&(a=Ma.safeDescriptors),s=i,t.annotationType_,s.value;var o,c=i.value;(ys(c)||(c=vs(c)),r)&&((c=c.bind(null!=(o=e.proxy_)?o:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function Pr(e,t){return{annotationType_:e,options_:t,make_:Ur,extend_:Mr}}function Ur(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Mr(e,t,n,i){var r;return r=n,this.annotationType_,r.get,e.defineComputedProperty_(t,ur({},this.options_,{get:n.get,set:n.set}),i)}function xr(e,t){return{annotationType_:e,options_:t,make_:Yr,extend_:jr}}function Yr(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function jr(e,t,n,i){var r,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(r=null==(a=this.options_)?void 0:a.enhancer)?r:Tr,i)}var Gr="true",Fr=Br();function Br(e){return{annotationType_:Gr,options_:e,make_:Vr,extend_:Kr}}function Vr(e,t,n,i){var r,a,s,o;if(n.get)return oa.make_(e,t,n,i);if(n.set){var c=pa(t.toString(),n.set);return i===e.target_?null===e.defineProperty_(t,{configurable:!Ma.safeDescriptors||e.isPlainObject_,set:c})?0:2:(xi(i,t,{configurable:!0,set:c}),2)}if(i!==e.target_&&"function"==typeof n.value)return $i(n.value)?(null!=(o=this.options_)&&o.autoBind?vs.bound:vs).make_(e,t,n,i):(null!=(s=this.options_)&&s.autoBind?rs.bound:rs).make_(e,t,n,i);var u,l=!1===(null==(r=this.options_)?void 0:r.deep)?ia.ref:ia;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,i)}function Kr(e,t,n,i){var r,a,s;if(n.get)return oa.extend_(e,t,n,i);if(n.set)return e.defineProperty_(t,{configurable:!Ma.safeDescriptors||e.isPlainObject_,set:pa(t.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?ia.ref:ia).extend_(e,t,n,i)}var Hr={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Wr(e){return e||Hr}Object.freeze(Hr);var Jr=xr("observable"),zr=xr("observable.ref",{enhancer:Ar}),qr=xr("observable.shallow",{enhancer:function(e,t,n){return null==e||lo(e)||Js(e)||eo(e)||io(e)?e:Array.isArray(e)?ia.array(e,{name:n,deep:!1}):qi(e)?ia.object(e,void 0,{name:n,deep:!1}):er(e)?ia.map(e,{name:n,deep:!1}):tr(e)?ia.set(e,{name:n,deep:!1}):void 0}}),$r=xr("observable.struct",{enhancer:function(e,t){return Oo(e,t)?t:e}}),Xr=mr(Jr);function Qr(e){return!0===e.deep?Tr:!1===e.deep?Ar:(t=e.defaultDecorator)&&null!=(n=null==(i=t.options_)?void 0:i.enhancer)?n:Tr;var t,n,i}function Zr(e,t,n){if(!Ji(t))return bs(e)?e:qi(e)?ia.object(e,t,n):Array.isArray(e)?ia.array(e,t):er(e)?ia.map(e,t):tr(e)?ia.set(e,t):"object"==typeof e&&null!==e?e:ia.box(e,t);vr(e,t,Jr)}Ui(Zr,Xr);var ea,ta,na={box:function(e,t){var n=Wr(t);return new va(e,Qr(n),n.name,!0,n.equals)},array:function(e,t){var n=Wr(t);return(!1===Ma.useProxies||!1===n.proxy?bo:Ys)(e,Qr(n),n.name)},map:function(e,t){var n=Wr(t);return new Zs(e,Qr(n),n.name)},set:function(e,t){var n=Wr(t);return new no(e,Qr(n),n.name)},object:function(e,t,n){return hs(!1===Ma.useProxies||!1===(null==n?void 0:n.proxy)?oo({},n):function(e,t){var n,i;return Vi(),e=oo(e,t),null!=(i=(n=e[_r]).proxy_)?i:n.proxy_=new Proxy(e,ws)}({},n),e,t)},ref:mr(zr),shallow:mr(qr),deep:Xr,struct:mr($r)},ia=Ui(Zr,na),ra="computed",aa=Pr(ra),sa=Pr("computed.struct",{equals:Er.structural}),oa=function(e,t){if(Ji(t))return vr(e,t,aa);if(qi(e))return mr(Pr(ra,e));var n=qi(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Sa(n)};Object.assign(oa,aa),oa.struct=mr(sa);var ca,ua=0,la=1,da=null!=(ea=null==(ta=Mi((function(){}),"name"))?void 0:ta.configurable)&&ea,ha={value:"action",configurable:!0,writable:!1,enumerable:!1};function pa(e,t,n,i){function r(){return function(e,t,n,i,r){var a=function(e,t,n,i){var r=!1,a=0,s=Ma.trackingDerivation,o=!t||!s;Ga();var c=Ma.allowStateChanges;o&&(Ra(),c=ga(!0));var u=Da(!0),l={runAsAction_:o,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:r,startTime_:a,actionId_:la++,parentActionId_:ua};return ua=l.actionId_,l}(0,t);try{return n.apply(i,r)}catch(e){throw a.error_=e,e}finally{!function(e){ua!==e.actionId_&&Li(30);ua=e.parentActionId_,void 0!==e.error_&&(Ma.suppressReactionErrors=!0);fa(e.prevAllowStateChanges_),La(e.prevAllowStateReads_),Fa(),e.runAsAction_&&Na(e.prevDerivation_);Ma.suppressReactionErrors=!1}(a)}}(0,n,t,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,da&&(ha.value=e,xi(r,"name",ha)),r}function ga(e){var t=Ma.allowStateChanges;return Ma.allowStateChanges=e,t}function fa(e){Ma.allowStateChanges=e}ca=Symbol.toPrimitive;var ma,va=function(e){function t(t,n,i,r,a){var s;return void 0===i&&(i="ObservableValue"),void 0===a&&(a=Er.default),(s=e.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=a,s.value_=n(t,void 0,i),s}lr(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==Ma.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Cs(this)){var t=Rs(this,{object:this,type:Us,newValue:e});if(!t)return Ma.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Ma.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Ns(this)&&Ls(this,{type:Us,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Is(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Us,newValue:this.value_,oldValue:void 0}),Ds(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return rr(this.get())},n[ca]=function(){return this.valueOf()},t}(yr),_a=Zi("ObservableValue",va);ma=Symbol.toPrimitive;var ya,ba,Sa=function(){function e(e){this.dependenciesState_=ya.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ya.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ta(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=ba.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||Li(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=pa("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Er.structural:Er.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==ya.UP_TO_DATE_)return;e.lowestObserverState_=ya.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===ya.UP_TO_DATE_&&(e.dependenciesState_=ya.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&Li(32,this.name_,this.derivation),0!==Ma.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ba(this),Oa(this)){var e=Ma.trackingContext;this.keepAlive_&&!e&&(Ma.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===ya.STALE_)return;e.lowestObserverState_=ya.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===ya.POSSIBLY_STALE_?t.dependenciesState_=ya.STALE_:t.dependenciesState_===ya.UP_TO_DATE_&&(e.lowestObserverState_=ya.UP_TO_DATE_)}))}(this),Ma.trackingContext=e}}else Oa(this)&&(this.warnAboutUntrackedRead_(),Ga(),this.value_=this.computeValue_(!1),Fa());var t=this.value_;if(Aa(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&Li(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else Li(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===ya.NOT_TRACKING_,n=this.computeValue_(!0),i=t||Aa(e)||Aa(n)||!this.equals_(e,n);return i&&(this.value_=n),i},t.computeValue_=function(e){this.isComputing_=!0;var t,n=ga(!1);if(e)t=wa(this,this.derivation,this.scope_);else if(!0===Ma.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Ta(e)}return fa(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Ca(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,i=!0,r=void 0;return ss((function(){var a=n.get();if(!i||t){var s=Ra();e({observableKind:"computed",debugObjectName:n.name_,type:Us,object:n,newValue:a,oldValue:r}),Na(s)}i=!1,r=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return rr(this.get())},t[ma]=function(){return this.valueOf()},e}(),Ea=Zi("ComputedValue",Sa);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(ya||(ya={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ba||(ba={}));var Ta=function(e){this.cause=void 0,this.cause=e};function Aa(e){return e instanceof Ta}function Oa(e){switch(e.dependenciesState_){case ya.UP_TO_DATE_:return!1;case ya.NOT_TRACKING_:case ya.STALE_:return!0;case ya.POSSIBLY_STALE_:for(var t=Da(!0),n=Ra(),i=e.observing_,r=i.length,a=0;a<r;a++){var s=i[a];if(Ea(s)){if(Ma.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return Na(n),La(t),!0}if(e.dependenciesState_===ya.STALE_)return Na(n),La(t),!0}}return ka(e),Na(n),La(t),!1}}function wa(e,t,n){var i=Da(!0);ka(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++Ma.runId;var r,a=Ma.trackingDerivation;if(Ma.trackingDerivation=e,Ma.inBatch++,!0===Ma.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new Ta(e)}return Ma.inBatch--,Ma.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,i=ya.UP_TO_DATE_,r=0,a=e.unboundDepsCount_,s=0;s<a;s++){var o=n[s];0===o.diffValue_&&(o.diffValue_=1,r!==s&&(n[r]=o),r++),o.dependenciesState_>i&&(i=o.dependenciesState_)}n.length=r,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&Ya(c,e),c.diffValue_=0}for(;r--;){var u=n[r];1===u.diffValue_&&(u.diffValue_=0,xa(u,e))}i!==ya.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}(e),La(i),r}function Ca(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Ya(t[n],e);e.dependenciesState_=ya.NOT_TRACKING_}function Ia(e){var t=Ra();try{return e()}finally{Na(t)}}function Ra(){var e=Ma.trackingDerivation;return Ma.trackingDerivation=null,e}function Na(e){Ma.trackingDerivation=e}function Da(e){var t=Ma.allowStateReads;return Ma.allowStateReads=e,t}function La(e){Ma.allowStateReads=e}function ka(e){if(e.dependenciesState_!==ya.UP_TO_DATE_){e.dependenciesState_=ya.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=ya.UP_TO_DATE_}}var Pa=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},Ua=!0,Ma=function(){var e=Pi();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ua=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Pa).version&&(Ua=!1),Ua?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Pa):(setTimeout((function(){Li(35)}),1),new Pa)}();function xa(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Ya(e,t){e.observers_.delete(t),0===e.observers_.size&&ja(e)}function ja(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Ma.pendingUnobservations.push(e))}function Ga(){Ma.inBatch++}function Fa(){if(0==--Ma.inBatch){Ja();for(var e=Ma.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Sa&&n.suspend_())}Ma.pendingUnobservations=[]}}function Ba(e){var t=Ma.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Ma.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&Ma.inBatch>0&&ja(e),!1)}function Va(e){e.lowestObserverState_!==ya.STALE_&&(e.lowestObserverState_=ya.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===ya.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=ya.STALE_})))}var Ka=function(){function e(e,t,n,i){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=ya.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=ba.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Ma.pendingReactions.push(this),Ja())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Ga(),this.isScheduled_=!1;var e=Ma.trackingContext;if(Ma.trackingContext=this,Oa(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Ma.trackingContext=e,Fa()}},t.track=function(e){if(!this.isDisposed_){Ga(),this.isRunning_=!0;var t=Ma.trackingContext;Ma.trackingContext=this;var n=wa(this,e,void 0);Ma.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Ca(this),Aa(n)&&this.reportExceptionInDerivation_(n.cause),Fa()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Ma.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Ma.suppressReactionErrors||console.error(n,e),Ma.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Ga(),Ca(this),Fa()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[_r]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){Li("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];"boolean"==typeof n[n.length-1]&&(e=n.pop());var r=function(e){switch(e.length){case 0:return Ma.trackingDerivation;case 1:return So(e[0]);case 2:return So(e[0],e[1])}}(n);if(!r)return Li("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");r.isTracing_===ba.NONE&&console.log("[mobx.trace] '"+r.name_+"' tracing enabled");r.isTracing_=e?ba.BREAK:ba.LOG}(this,e)},e}(),Ha=100,Wa=function(e){return e()};function Ja(){Ma.inBatch>0||Ma.isRunningReactions||Wa(za)}function za(){Ma.isRunningReactions=!0;for(var e=Ma.pendingReactions,t=0;e.length>0;){++t===Ha&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}Ma.isRunningReactions=!1}var qa=Zi("Reaction",Ka);var $a="action",Xa="autoAction",Qa=wr($a),Za=wr("action.bound",{bound:!0}),es=wr(Xa,{autoAction:!0}),ts=wr("autoAction.bound",{autoAction:!0,bound:!0});function ns(e){return function(t,n){return Wi(t)?pa(t.name||"<unnamed action>",t,e):Wi(n)?pa(t,n,e):Ji(n)?vr(t,n,e?es:Qa):Ji(t)?mr(wr(e?Xa:$a,{name:t,autoAction:e})):void 0}}var is=ns(!1);Object.assign(is,Qa);var rs=ns(!0);function as(e){return Wi(e)&&!0===e.isMobxAction}function ss(e,t){var n,i;void 0===t&&(t=Gi);var r,a=null!=(n=null==(i=t)?void 0:i.name)?n:"Autorun";if(!t.scheduler&&!t.delay)r=new Ka(a,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var s=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:os}(t),o=!1;r=new Ka(a,(function(){o||(o=!0,s((function(){o=!1,r.isDisposed_||r.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(r)}return r.schedule_(),r.getDisposer_()}Object.assign(rs,es),is.bound=mr(Za),rs.bound=mr(ts);var os=function(e){return e()};var cs="onBO",us="onBUO";function ls(e,t,n){return ds(us,e,t,n)}function ds(e,t,n,i){var r="function"==typeof i?So(t,n):So(t),a=Wi(i)?i:n,s=e+"L";return r[s]?r[s].add(a):r[s]=new Set([a]),function(){var e=r[s];e&&(e.delete(a),0===e.size&&delete r[s])}}function hs(e,t,n,i){var r=sr(t),a=oo(e,i)[_r];Ga();try{ir(r).forEach((function(e){a.extend_(e,r[e],!n||(!(e in n)||n[e]))}))}finally{Fa()}return e}var ps=0;function gs(){this.message="FLOW_CANCELLED"}gs.prototype=Object.create(Error.prototype);var fs=Nr("flow"),ms=Nr("flow.bound",{bound:!0}),vs=Object.assign((function(e,t){if(Ji(t))return vr(e,t,fs);var n=e,i=n.name||"<unnamed flow>",r=function(){var e,t=arguments,r=++ps,a=is(i+" - runid: "+r+" - init",n).apply(this,t),s=void 0,o=new Promise((function(t,n){var o=0;function c(e){var t;s=void 0;try{t=is(i+" - runid: "+r+" - yield "+o++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function u(e){var t;s=void 0;try{t=is(i+" - runid: "+r+" - yield "+o++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!Wi(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return o.cancel=is(i+" - runid: "+r+" - cancel",(function(){try{s&&_s(s);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(Hi,Hi),_s(n),e(new gs)}catch(t){e(t)}})),o};return r.isMobXFlow=!0,r}),fs);function _s(e){Wi(e.cancel)&&e.cancel()}function ys(e){return!0===(null==e?void 0:e.isMobXFlow)}function bs(e){return function(e,t){return!!e&&(void 0!==t?!!lo(e)&&e[_r].values_.has(t):lo(e)||!!e[_r]||br(e)||qa(e)||Ea(e))}(e)}function Ss(e,t,n){return e.set(t,n),n}function Es(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!bs(e))return e;if(_a(e)||Ea(e))return Es(e.get(),t);if(t.has(e))return t.get(e);if(Js(e)){var n=Ss(t,e,new Array(e.length));return e.forEach((function(e,i){n[i]=Es(e,t)})),n}if(io(e)){var i=Ss(t,e,new Set);return e.forEach((function(e){i.add(Es(e,t))})),i}if(eo(e)){var r=Ss(t,e,new Map);return e.forEach((function(e,n){r.set(n,Es(e,t))})),r}var a=Ss(t,e,{});return function(e){if(lo(e))return e[_r].ownKeys_();Li(38)}(e).forEach((function(n){Yi.propertyIsEnumerable.call(e,n)&&(a[n]=Es(e[n],t))})),a}function Ts(e,t){return Es(e,new Map)}function As(e,t){void 0===t&&(t=void 0),Ga();try{return e.apply(t)}finally{Fa()}}function Os(e){return e[_r]}vs.bound=mr(ms);var ws={has:function(e,t){return Os(e).has_(t)},get:function(e,t){return Os(e).get_(t)},set:function(e,t,n){var i;return!!Ji(t)&&(null==(i=Os(e).set_(t,n,!0))||i)},deleteProperty:function(e,t){var n;return!!Ji(t)&&(null==(n=Os(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var i;return null==(i=Os(e).defineProperty_(t,n))||i},ownKeys:function(e){return Os(e).ownKeys_()},preventExtensions:function(e){Li(13)}};function Cs(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Is(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),Ki((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Rs(e,t){var n=Ra();try{for(var i=[].concat(e.interceptors_||[]),r=0,a=i.length;r<a&&((t=i[r](t))&&!t.type&&Li(14),t);r++);return t}finally{Na(n)}}function Ns(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Ds(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),Ki((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Ls(e,t){var n=Ra(),i=e.changeListeners_;if(i){for(var r=0,a=(i=i.slice()).length;r<a;r++)i[r](t);Na(n)}}var ks=Symbol("mobx-keys");var Ps="splice",Us="update",Ms={get:function(e,t){var n=e[_r];return t===_r?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?ar(js,t)?js[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var i=e[_r];return"length"===t&&i.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Li(15)}},xs=function(){function e(e,t,n,i){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new yr(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Is(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ds(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&Li("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&Li(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&yo(e+t+1)},t.spliceWithArray_=function(e,t,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=ji),Cs(this)){var a=Rs(this,{object:this.proxy_,type:Ps,index:e,removedCount:t,added:n});if(!a)return ji;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return i.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var o=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,o),this.dehanceValues_(o)},t.spliceItemsIntoValues_=function(e,t,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[e,t].concat(n));var r=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var o=0;o<a.length;o++)this.values_[e+n.length+o]=a[o];return r},t.notifyArrayChildUpdate_=function(e,t,n){var i=!this.owned_&&!1,r=Ns(this),a=r||i?{observableKind:"array",object:this.proxy_,type:Us,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&Ls(this,a)},t.notifyArraySplice_=function(e,t,n){var i=!this.owned_&&!1,r=Ns(this),a=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Ps,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&Ls(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&Li(17,e,n.length),e<n.length){this.atom_;var i=n[e];if(Cs(this)){var r=Rs(this,{type:Us,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var a=new Array(e+1-n.length),s=0;s<a.length-1;s++)a[s]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function Ys(e,t,n,i){void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),Vi();var r=new xs(n,t,i,!1);Qi(r.values_,_r,r);var a=new Proxy(r.values_,Ms);if(r.proxy_=a,e&&e.length){var s=ga(!0);r.spliceWithArray_(0,0,e),fa(s)}return a}var js={clear:function(){return this.splice(0)},replace:function(e){var t=this[_r];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this[_r];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[_r].spliceWithArray_(e,t,n)},push:function(){for(var e=this[_r],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[_r].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[_r],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Ma.trackingDerivation&&Li(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Ma.trackingDerivation&&Li(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[_r],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Gs(e,t){"function"==typeof Array.prototype[e]&&(js[e]=t(e))}function Fs(e){return function(){var t=this[_r];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Bs(e){return function(t,n){var i=this,r=this[_r];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,i)}))}}function Vs(e){return function(){var t=this,n=this[_r];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,i){return r(e,n,i,t)},i[e].apply(i,arguments)}}Gs("concat",Fs),Gs("flat",Fs),Gs("includes",Fs),Gs("indexOf",Fs),Gs("join",Fs),Gs("lastIndexOf",Fs),Gs("slice",Fs),Gs("toString",Fs),Gs("toLocaleString",Fs),Gs("every",Bs),Gs("filter",Bs),Gs("find",Bs),Gs("findIndex",Bs),Gs("flatMap",Bs),Gs("forEach",Bs),Gs("map",Bs),Gs("some",Bs),Gs("reduce",Vs),Gs("reduceRight",Vs);var Ks,Hs,Ws=Zi("ObservableArrayAdministration",xs);function Js(e){return zi(e)&&Ws(e[_r])}var zs={},qs="add",$s="delete";Ks=Symbol.iterator,Hs=Symbol.toStringTag;var Xs,Qs,Zs=function(){function e(e,t,n){var i=this;void 0===t&&(t=Tr),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[_r]=zs,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,Wi(Map)||Li(18),this.keysAtom_=Sr("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=ga(e);try{return t()}finally{fa(n)}}(!0,(function(){i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Ma.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var i=n=new va(this.has_(e),Ar,"ObservableMap.key?",!1);this.hasMap_.set(e,i),ls(i,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Cs(this)){var i=Rs(this,{type:n?Us:qs,object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,Cs(this))&&!Rs(this,{type:$s,object:this,name:e}))return!1;if(this.has_(e)){var n=Ns(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:$s,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return As((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Ls(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Ma.UNCHANGED){var i=Ns(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Us,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Ls(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,As((function(){var i,r=new va(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(i=n.hasMap_.get(e))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=Ns(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:qs,object:this,name:e,newValue:t}:null;i&&Ls(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Io({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return Io({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},t[Ks]=function(){return this.entries()},t.forEach=function(e,t){for(var n,i=gr(this);!(n=i()).done;){var r=n.value,a=r[0],s=r[1];e.call(t,s,a,this)}},t.merge=function(e){var t=this;return eo(e)&&(e=new Map(e)),As((function(){qi(e)?function(e){var t=Object.keys(e);if(!nr)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return Yi.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];return t.set(n,i)})):er(e)?(e.constructor!==Map&&Li(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&Li(20,e)})),this},t.clear=function(){var e=this;As((function(){Ia((function(){for(var t,n=gr(e.keys());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.replace=function(e){var t=this;return As((function(){for(var n,i=function(e){if(er(e)||eo(e))return e;if(Array.isArray(e))return new Map(e);if(qi(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return Li(21,e)}(e),r=new Map,a=!1,s=gr(t.data_.keys());!(n=s()).done;){var o=n.value;if(!i.has(o))if(t.delete(o))a=!0;else{var c=t.data_.get(o);r.set(o,c)}}for(var u,l=gr(i.entries());!(u=l()).done;){var d=u.value,h=d[0],p=d[1],g=t.data_.has(h);if(t.set(h,p),t.data_.has(h)){var f=t.data_.get(h);r.set(h,f),g||(a=!0)}}if(!a)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var m=t.data_.keys(),v=r.keys(),_=m.next(),y=v.next();!_.done;){if(_.value!==y.value){t.keysAtom_.reportChanged();break}_=m.next(),y=v.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Ds(this,e)},t.intercept_=function(e){return Is(this,e)},cr(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Hs,get:function(){return"Map"}}]),e}(),eo=Zi("ObservableMap",Zs);var to={};Xs=Symbol.iterator,Qs=Symbol.toStringTag;var no=function(){function e(e,t,n){void 0===t&&(t=Tr),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[_r]=to,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,Wi(Set)||Li(22),this.atom_=Sr(this.name_),this.enhancer_=function(e,i){return t(e,i,n)},e&&this.replace(e)}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;As((function(){Ia((function(){for(var t,n=gr(e.data_.values());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.forEach=function(e,t){for(var n,i=gr(this);!(n=i()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,Cs(this))&&!Rs(this,{type:qs,object:this,newValue:e}))return this;if(!this.has(e)){As((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=Ns(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:qs,object:this,newValue:e}:null;n&&Ls(this,i)}return this},t.delete=function(e){var t=this;if(Cs(this)&&!Rs(this,{type:$s,object:this,oldValue:e}))return!1;if(this.has(e)){var n=Ns(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:$s,object:this,oldValue:e}:null;return As((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Ls(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Io({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Io({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return io(e)&&(e=new Set(e)),As((function(){Array.isArray(e)||tr(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&Li("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Ds(this,e)},t.intercept_=function(e){return Is(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Xs]=function(){return this.values()},cr(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Qs,get:function(){return"Set"}}]),e}(),io=Zi("ObservableSet",no),ro=Object.create(null),ao="remove",so=function(){function e(e,t,n,i){void 0===t&&(t=new Map),void 0===i&&(i=Fr),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new yr("ObservableObject.keys"),this.isPlainObject_=qi(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Sa)return n.set(t),!0;if(Cs(this)){var i=Rs(this,{type:Us,object:this.proxy_||this.target_,name:e,newValue:t});if(!i)return null;t=i.newValue}if((t=n.prepareNewValue_(t))!==Ma.UNCHANGED){var r=Ns(this),a=r?{type:Us,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Ls(this,a)}return!0},t.get_=function(e){return Ma.trackingDerivation&&!ar(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),ar(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Ma.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new va(e in this.target_,Ar,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[fr])&&n[e])return;Li(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==Yi;){var r=Mi(i,e);if(r){var a=t.make_(this,e,r,i);if(0===a)return;if(1===a)break}i=Object.getPrototypeOf(i)}ho(this,t,e)}},t.extend_=function(e,t,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,i);var r=n.extend_(this,e,t,i);return r&&ho(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{Ga();var i=this.delete_(e);if(!i)return i;if(Cs(this)){var r=Rs(this,{object:this.proxy_||this.target_,name:e,type:qs,newValue:t.value});if(!r)return null;var a=r.newValue;t.value!==a&&(t=ur({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else xi(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Fa()}return!0},t.defineObservableProperty_=function(e,t,n,i){void 0===i&&(i=!1);try{Ga();var r=this.delete_(e);if(!r)return r;if(Cs(this)){var a=Rs(this,{object:this.proxy_||this.target_,name:e,type:qs,newValue:t});if(!a)return null;t=a.newValue}var s=uo(e),o={configurable:!Ma.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,e,o))return!1}else xi(this.target_,e,o);var c=new va(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{Fa()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{Ga();var i=this.delete_(e);if(!i)return i;if(Cs(this))if(!Rs(this,{object:this.proxy_||this.target_,name:e,type:qs,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=uo(e),a={configurable:!Ma.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else xi(this.target_,e,a);this.values_.set(e,new Sa(t)),this.notifyPropertyAddition_(e,void 0)}finally{Fa()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!ar(this.target_,e))return!0;if(Cs(this)&&!Rs(this,{object:this.proxy_||this.target_,name:e,type:ao}))return null;try{var n,i;Ga();var r,a=Ns(this),s=this.values_.get(e),o=void 0;if(!s&&a)o=null==(r=Mi(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof va&&(o=s.value_),Va(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(e in this.target_),a){var c={type:ao,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:e};0,a&&Ls(this,c)}}finally{Fa()}return!0},t.observe_=function(e,t){return Ds(this,e)},t.intercept_=function(e){return Is(this,e)},t.notifyPropertyAddition_=function(e,t){var n,i,r=Ns(this);if(r){var a=r?{type:qs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&Ls(this,a)}null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),ir(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function oo(e,t){var n;if(ar(e,_r))return e;var i=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new so(e,new Map,String(i),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Br(e):void 0}(t));return Xi(e,_r,r),e}var co=Zi("ObservableObjectAdministration",so);function uo(e){return ro[e]||(ro[e]={get:function(){return this[_r].getObservablePropValue_(e)},set:function(t){return this[_r].setObservablePropValue_(e,t)}})}function lo(e){return!!zi(e)&&co(e[_r])}function ho(e,t,n){var i;null==(i=e.target_[fr])||delete i[n]}var po=vo(0),go=0,fo=function(){};!function(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(fo,Array.prototype);var mo=function(e,t,n){function i(t,n,i,r){var a;void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),a=e.call(this)||this;var s=new xs(i,n,r,!0);if(s.proxy_=hr(a),Qi(hr(a),_r,s),t&&t.length){var o=ga(!0);a.spliceWithArray(0,0,t),fa(o)}return Object.defineProperty(hr(a),"0",po),a}lr(i,e);var r=i.prototype;return r.concat=function(){this[_r].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Js(e)?e.slice():e})))},r[n]=function(){var e=this,t=0;return Io({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},cr(i,[{key:"length",get:function(){return this[_r].getArrayLength_()},set:function(e){this[_r].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),i}(fo,Symbol.toStringTag,Symbol.iterator);function vo(e){return{enumerable:!1,configurable:!0,get:function(){return this[_r].get_(e)},set:function(t){this[_r].set_(e,t)}}}function _o(e){xi(mo.prototype,""+e,vo(e))}function yo(e){if(e>go){for(var t=go;t<e+100;t++)_o(t);go=e}}function bo(e,t,n){return new mo(e,t,n)}function So(e,t){if("object"==typeof e&&null!==e){if(Js(e))return void 0!==t&&Li(23),e[_r].atom_;if(io(e))return e.atom_;if(eo(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||Li(25,t,To(e)),n}if(lo(e)){if(!t)return Li(26);var i=e[_r].values_.get(t);return i||Li(27,t,To(e)),i}if(br(e)||Ea(e)||qa(e))return e}else if(Wi(e)&&qa(e[_r]))return e[_r];Li(28)}function Eo(e,t){return e||Li(29),void 0!==t?Eo(So(e,t)):br(e)||Ea(e)||qa(e)||eo(e)||io(e)?e:e[_r]?e[_r]:void Li(24,e)}function To(e,t){var n;if(void 0!==t)n=So(e,t);else{if(as(e))return e.name;n=lo(e)||eo(e)||io(e)?Eo(e):So(e)}return n.name_}Object.entries(js).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&Xi(mo.prototype,t,n)})),yo(1e3);var Ao=Yi.toString;function Oo(e,t,n){return void 0===n&&(n=-1),wo(e,t,n)}function wo(e,t,n,i,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var s=Ao.call(e);if(s!==Ao.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Co(e),t=Co(t);var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(Wi(c)&&c instanceof c&&Wi(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return r[l]===t;if(i.push(e),r.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!wo(e[l],t[l],n-1,i,r))return!1}else{var d,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!ar(t,d=h[l])||!wo(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function Co(e){return Js(e)?e.slice():er(e)||eo(e)||tr(e)||io(e)?Array.from(e.entries()):e}function Io(e){return e[Symbol.iterator]=Ro,e}function Ro(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===Pi()[e]&&Li("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:To},$mobx:_r});class No extends EventTarget{constructor(e={},t=Ai,n=null,i=!0,r=!0){super(),this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=i,function(e,t,n){if(qi(e))return hs(e,e,t,n);var i=oo(e,n)[_r];if(!e[ks]){var r=Object.getPrototypeOf(e),a=new Set([].concat(ir(e),ir(r)));a.delete("constructor"),a.delete(_r),Xi(r,ks,a)}Ga();try{e[ks].forEach((function(e){return i.make_(e,!t||!(e in t)||t[e])}))}finally{Fa()}}(this),this._persistentStore=null,this._persistOn=r)}async initialise(){var e=this;return new Promise((async function(t,n){e._persistentStore=new wi(e.storageType),e._persistentStore.onUpdate((async function(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));let i=await e._persistentStore.retrieve(e.storageKey,Ts(e.state));e.state&&(e.state=i),e._startAutoSaving(e,e.storageKey),t(i)}))}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return Ts(this.state)}_startAutoSaving(e,t){var n=this;ss((async function(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))}))}async _storeOnSave(e,t,n=!1){(this._persistOn||n)&&await this._persistentStore.store(t,Ts(e.state),this.merge)}}const Do=new class extends No{constructor(){const e={audiomaker:!0,checkit:!0,dictionary:!0,studyclear:!0,picturedictionary:!0,play:!0,practicereadingaloud:!0,prediction:!0,screenmasking:!0,screenshotreader:!0,simplify:!0,talkandtype:!0,translator:!0,vocablist:!0,websearch:!0,studyyellow:!0,studygreen:!0,studyblue:!0,studypink:!0,studycollect:!0,pause:!0,stop:!0,clicktospeak:!0,voicenote:!0};super({features:e},Ai,"th.rw4gc.datadesk.store"),this.defaultFeatures=e}set features(e){this._mapFeatures(e)}resetFeatures(){this.state.features=this.defaultFeatures}_mapFeatures(e){let t={"Check It":Ci.CHECKIT,Prediction:Ci.PREDICTION,Dictionary:Ci.DICTIONARY,"Picture Dictionary":Ci.PICTUREDICTIONARY,"Hover Speech":Ci.CLICKTOSPEAK,Play:Ci.PLAY,"Screenshot Reader":Ci.SCREENSHOTREADER,"Audio Maker":Ci.AUDIOMAKER,"Screen Masking":Ci.SCREENMASKING,"Web Search":Ci.WEBSEARCH,"Talk&Type":Ci.TALKANDTYPE,Translator:Ci.TRANSLATOR,"Vocabulary List":Ci.VOCABLIST,"Simplify Page":Ci.SIMPLIFY,"Practice Reading Aloud":Ci.PRACTICEREADINGALOUD,"Erase Highlights":Ci.STUDYCLEAR,"Voice Note":Ci.VOICENOTE},n=JSON.parse(JSON.stringify(this.defaultFeatures)),i=Object.keys(e).reduce(((n,i)=>(void 0!==t[i]&&(n[t[i]]=this._parseBoolean(e[i])),n)),{});Object.keys(i).forEach((e=>{n[e]=i[e]}));let r=!1;r=void 0===e.Highlights||this._parseBoolean(e.Highlights),n[Ci.STUDYYELLOW]=r,n[Ci.STUDYGREEN]=r,n[Ci.STUDYBLUE]=r,n[Ci.STUDYPINK]=r,n[Ci.STUDYCOLLECT]=r,n[Ci.STUDYCLEAR]=r,r=void 0===e.Play||this._parseBoolean(e.Play),n[Ci.PAUSE]=r,n[Ci.STOP]=r,this.state.features=n}_parseBoolean(e){switch(e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}};const Lo=new class extends No{constructor(){super({licenseType:"Default"},Ai,"th.rw4gc.Application.store")}setLicenseType(e){this.state.licenseType=e}},ko="color",Po="position";class Uo{getToolbarBrowserConfig(e){throw new Error("Not implemented")}setToolbarPageConfig(e){throw new Error("Not implemented")}}const Mo=({name:e,icon:t=e,locale_ID:n="toolbar_button_"+e,scope:i=fi})=>({name:e,icon:t,locale_ID:n,scope:i}),xo=(t,{name:n,enabled:i=!0,toggled:r=!1,displayed:a=!1,supported:s=!0})=>{t.toolbar.buttons=e({},t.toolbar.buttons,Yo({name:n,enabled:i,toggled:r,displayed:a,supported:s})),t.features=e({},t.features,jo({name:n,enabled:i}))},Yo=({name:e,enabled:t=!0,toggled:n=!1,displayed:i=!1,policyEnabled:r=!0,supported:a=!0})=>({[e]:{enabled:t,toggled:n,displayed:i,policyEnabled:r,supported:a}}),jo=({name:e,enabled:t=!1})=>({[e]:t});class Go extends Uo{getToolbarBrowserConfig(){return[Mo({name:Ci.PLAY,scope:vi}),Mo({name:Ci.PAUSE,scope:hi}),Mo({name:Ci.STOP,scope:hi}),Mo({name:Ci.CHECKIT}),Mo({name:Ci.PREDICTION}),Mo({name:Ci.DICTIONARY}),Mo({name:Ci.PICTUREDICTIONARY}),Mo({name:Ci.SCREENSHOTREADER,scope:_i}),Mo({name:Ci.TALKANDTYPE}),Mo({name:Ci.SCREENMASKING}),Mo({name:Ci.STUDYYELLOW}),Mo({name:Ci.STUDYGREEN}),Mo({name:Ci.STUDYBLUE}),Mo({name:Ci.STUDYPINK}),Mo({name:Ci.STUDYCLEAR}),Mo({name:Ci.STUDYCOLLECT}),Mo({name:Ci.TRANSLATOR}),Mo({name:Ci.VOICENOTE}),Mo({name:Ci.VOCABLIST}),Mo({name:Ci.AUDIOMAKER,icon:"speechmaker"}),Mo({name:Ci.CLICKTOSPEAK,scope:gi}),Mo({name:Ci.WEBSEARCH}),Mo({name:Ci.SIMPLIFY}),Mo({name:Ci.PRACTICEREADINGALOUD,scope:vi})]}setToolbarPageConfig(e){xo(e,{name:Ci.CHECKIT}),xo(e,{name:Ci.PREDICTION}),xo(e,{name:Ci.CLICKTOSPEAK}),xo(e,{name:Ci.DICTIONARY}),xo(e,{name:Ci.PICTUREDICTIONARY,supported:!1}),xo(e,{name:Ci.PLAY}),xo(e,{name:Ci.PAUSE}),xo(e,{name:Ci.STOP}),xo(e,{name:Ci.SCREENSHOTREADER}),xo(e,{name:Ci.AUDIOMAKER}),xo(e,{name:Ci.WEBSEARCH,supported:!1}),xo(e,{name:Ci.SCREENMASKING}),xo(e,{name:Ci.TALKANDTYPE}),xo(e,{name:Ci.TRANSLATOR}),xo(e,{name:Ci.STUDYYELLOW}),xo(e,{name:Ci.STUDYGREEN}),xo(e,{name:Ci.STUDYBLUE}),xo(e,{name:Ci.STUDYPINK}),xo(e,{name:Ci.STUDYCLEAR}),xo(e,{name:Ci.STUDYCOLLECT}),xo(e,{name:Ci.VOCABLIST}),xo(e,{name:Ci.VOICENOTE}),xo(e,{name:Ci.SIMPLIFY}),xo(e,{name:Ci.PRACTICEREADINGALOUD,supported:!1})}}class Fo extends Uo{getToolbarBrowserConfig(){return[Mo({name:Ci.CHECKIT}),Mo({name:Ci.PREDICTION}),Mo({name:Ci.CLICKTOSPEAK,scope:gi}),Mo({name:Ci.DICTIONARY}),Mo({name:Ci.PICTUREDICTIONARY}),Mo({name:Ci.PLAY,scope:vi}),Mo({name:Ci.PAUSE,scope:hi}),Mo({name:Ci.STOP,scope:hi}),Mo({name:Ci.SCREENSHOTREADER,scope:_i}),Mo({name:Ci.AUDIOMAKER,icon:"speechmaker"}),Mo({name:Ci.WEBSEARCH}),Mo({name:Ci.SCREENMASKING}),Mo({name:Ci.TALKANDTYPE}),Mo({name:Ci.TRANSLATOR}),Mo({name:Ci.STUDYYELLOW}),Mo({name:Ci.STUDYGREEN}),Mo({name:Ci.STUDYBLUE}),Mo({name:Ci.STUDYPINK}),Mo({name:Ci.STUDYCLEAR}),Mo({name:Ci.STUDYCOLLECT}),Mo({name:Ci.VOCABLIST}),Mo({name:Ci.VOICENOTE}),Mo({name:Ci.SIMPLIFY}),Mo({name:Ci.PRACTICEREADINGALOUD,scope:vi})]}setToolbarPageConfig(e){xo(e,{name:Ci.CHECKIT}),xo(e,{name:Ci.PREDICTION}),xo(e,{name:Ci.CLICKTOSPEAK}),xo(e,{name:Ci.DICTIONARY}),xo(e,{name:Ci.PICTUREDICTIONARY}),xo(e,{name:Ci.PLAY}),xo(e,{name:Ci.PAUSE}),xo(e,{name:Ci.STOP}),xo(e,{name:Ci.SCREENSHOTREADER}),xo(e,{name:Ci.AUDIOMAKER}),xo(e,{name:Ci.WEBSEARCH}),xo(e,{name:Ci.SCREENMASKING}),xo(e,{name:Ci.TALKANDTYPE}),xo(e,{name:Ci.TRANSLATOR}),xo(e,{name:Ci.STUDYYELLOW}),xo(e,{name:Ci.STUDYGREEN}),xo(e,{name:Ci.STUDYBLUE}),xo(e,{name:Ci.STUDYPINK}),xo(e,{name:Ci.STUDYCLEAR}),xo(e,{name:Ci.STUDYCOLLECT}),xo(e,{name:Ci.VOCABLIST}),xo(e,{name:Ci.VOICENOTE}),xo(e,{name:Ci.SIMPLIFY}),xo(e,{name:Ci.PRACTICEREADINGALOUD})}}const Bo=new class extends No{constructor(){let e={toolbar:{buttons:{},docked:!1,showMenu:!1},features:{},dialogs:{searchword:"",dictionary:{open:!1},picturedictionary:{open:!1},translator:{open:!1},settingsdialog:{open:!1},prediction:{open:!1}},popups:{highlights:{visible:!1,sort:ko,colors:{blue:!0,green:!0,yellow:!0,pink:!0},error:!1,errorTitle:"",errorMessage:"",timerShow:!1,timerTitle:"",timerMessage:"",timerLength:0},vocab:{visible:!1,colors:{blue:!0,green:!0,yellow:!0,pink:!0},error:!1,errorTitle:"",errorMessage:"",timerShow:!1,timerTitle:"",timerMessage:"",timerLength:0},audiomaker:{visible:!1,status:0,error:!1,errorTitle:"",errorMessage:""}}};((e,t)=>{let n=null;n="workplace"===e?new Go:new Fo;n.setToolbarPageConfig(t)})("__TOOLBARTYPE__",e),super(e,Oi,"th.rw4gc.toolbarpage.store"),this.applyFeatureSetToButtons()}setSpeaking(e){const t=({name:e,enabled:t=!0})=>{let n=t;void 0!==this.state.features[e]&&(n=t&&this.state.features[e]),this.state.toolbar.buttons[e].enabled!==n&&(this.state.toolbar.buttons[e].enabled=n)};let n=!e;t({name:Ci.CHECKIT,enabled:n}),t({name:Ci.PREDICTION,enabled:n}),t({name:Ci.DICTIONARY,enabled:n}),t({name:Ci.PICTUREDICTIONARY,enabled:n}),t({name:Ci.PLAY,enabled:n}),t({name:Ci.SCREENSHOTREADER,enabled:n}),t({name:Ci.AUDIOMAKER,enabled:n}),t({name:Ci.SCREENMASKING,enabled:n}),t({name:Ci.WEBSEARCH,enabled:n}),t({name:Ci.TALKANDTYPE,enabled:n}),t({name:Ci.TRANSLATOR,enabled:n}),t({name:Ci.STUDYYELLOW,enabled:n}),t({name:Ci.STUDYGREEN,enabled:n}),t({name:Ci.STUDYBLUE,enabled:n}),t({name:Ci.STUDYPINK,enabled:n}),t({name:Ci.STUDYCLEAR,enabled:n}),t({name:Ci.STUDYCOLLECT,enabled:n}),t({name:Ci.VOCABLIST,enabled:n}),t({name:Ci.VOICENOTE,enabled:n}),t({name:Ci.SIMPLIFY,enabled:n}),t({name:Ci.PRACTICEREADINGALOUD,enabled:n})}setFeatures(e){let t={"Check It":Ci.CHECKIT,Prediction:Ci.PREDICTION,Dictionary:Ci.DICTIONARY,"Picture Dictionary":Ci.PICTUREDICTIONARY,Play:Ci.PLAY,"Screenshot Reader":Ci.SCREENSHOTREADER,"Audio Maker":Ci.AUDIOMAKER,"Screen Masking":Ci.SCREENMASKING,"Web Search":Ci.WEBSEARCH,"Talk&Type":Ci.TALKANDTYPE,Translator:Ci.TRANSLATOR,"Vocabulary List":Ci.VOCABLIST,"Voice Note":Ci.VOICENOTE,"Simplify Page":Ci.SIMPLIFY,"Practice Reading Aloud":Ci.PRACTICEREADINGALOUD,"Erase Highlights":Ci.STUDYCLEAR},n=Object.keys(e).reduce(((n,i)=>(void 0!==t[i]&&(n[t[i]]=e[i]),n)),{});void 0===e.Highlights&&(e.Highlights=!1),n[Ci.STUDYYELLOW]=e.Highlights,n[Ci.STUDYGREEN]=e.Highlights,n[Ci.STUDYBLUE]=e.Highlights,n[Ci.STUDYPINK]=e.Highlights,n[Ci.STUDYCOLLECT]=e.Highlights,n[Ci.STUDYCLEAR]=e.Highlights,void 0===e.Play&&(e.Play=!1),n[Ci.PAUSE]=e.Play,n[Ci.STOP]=e.Play,n[Ci.CLICKTOSPEAK]=e.Play,this.state.features=JSON.parse(JSON.stringify(n)),this.applyFeatureSetToButtons()}applyFeatureSetToButtons(){const e=e=>{let t=this.state.toolbar.buttons[e].enabled;t=void 0!==this.state.features[e]&&(t&&this.state.features[e]),this.setButtonEnabled(e,t)};Object.keys(this.state.toolbar.buttons).forEach((t=>{e(t)}))}setButtonDisplayed(e,t){this.state.toolbar.buttons[e].displayed=t}setButtonPolicyEnabled(e,t){this.state.toolbar.buttons[e].policyEnabled=t}setButtonEnabled(e,t){this.state.toolbar.buttons[e].enabled=t}setButtonToggled(e,t){return void 0!==t?(this.state.toolbar.buttons[e].toggled=t,this.state.toolbar.buttons[e].toggled):(this.state.toolbar.buttons[e].toggled=!this.state.toolbar.buttons[e].toggled,this.state.toolbar.buttons[e].toggled)}setToolbarDocked(e){this.state.toolbar.docked=e}setToolbarMenuShow(e){this.state.toolbar.showMenu=e}showDictionary(e){this.state.dialogs.dictionary.open=e}showPictureDictionary(e){this.state.dialogs.picturedictionary.open=e}showTranslator(e){this.state.dialogs.translator.open=e}showSettingsDialog(e){this.state.dialogs.settingsdialog.open=e}showPrediction(e){this.state.dialogs.prediction.open=e}setSearchWord(e){this.state.dialogs.searchword=e}displayCollectDialog(e,t){this.state.popups[e].visible=t}displayAudioMakerDialog(e){this.updateAudioMakerProgress(0),this.state.popups.audiomaker.visible=e,this.setButtonEnabled(Ci.AUDIOMAKER,!e)}updateAudioMakerProgress(e){this.state.popups.audiomaker.status=e}displayErrorInfoTab(e,t=!0,n="",i=""){try{this.state.popups[e].error=t,this.state.popups[e].errorTitle=n,this.state.popups[e].errorMessage=i}catch(e){console.log("infoType not found")}}displayTimerInfoTab(e,t=!0,n=10,i="",r=""){try{this.state.popups[e].timerShow=t,this.state.popups[e].timerTitle=i,this.state.popups[e].timerMessage=r,this.state.popups[e].timerLength=n,console.log(this.state.popups)}catch(e){console.log("infoType not found")}}setHighlightSort(e){switch(e){case"color":this.state.popups.highlights.sort!=ko&&(this.state.popups.highlights.sort=ko);break;case"position":this.state.popups.highlights.sort!=Po&&(this.state.popups.highlights.sort=Po)}}setCollectionColor(e,t,n){this.state.popups[e].colors[t]=n}displayCollectVocab(e){this.state.popups.vocab.visible=e}sortOptionChecked(e){return e===this.state.popups.highlights.sort}toogleClickAndSpeak(){}};const Vo=new class extends No{constructor(){super({token:""},Ti,"th.rw4gc.token.store")}setToken(e){this.state.token=e}};const Ko=function(e){switch(e){default:case"default":return[{name:"checkit",key:"settings_features_checkit",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"prediction",key:"settings_features_prediction",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"clicktospeak",key:"settings_features_hover_speech",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"dictionary",key:"settings_features_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"picturedictionary",key:"settings_features_picture_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"play",key:"settings_features_play",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"pause",key:"settings_features_pause",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"stop",key:"settings_features_stop",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenshotreader",key:"settings_features_screenshot_reader",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"audiomaker",key:"settings_features_audio_maker",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"websearch",key:"settings_features_web_search",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenmasking",key:"settings_features_screen_masking",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"talkandtype",key:"settings_features_talk_and_type",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"translator",key:"settings_features_translator",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyyellow",key:"settings_features_yellow_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studygreen",key:"settings_features_green_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyblue",key:"settings_features_blue_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studypink",key:"settings_features_pink_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyclear",key:"settings_features_clear_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studycollect",key:"settings_features_collect_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"vocablist",key:"settings_features_vocabulary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"simplify",key:"settings_features_simplify_page",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"voicenote",key:"settings_features_voicenote",enabled:!0,dragging:!1,supported:!0},{name:"practicereadingaloud",key:"settings_features_practice_reading_aloud",enabled:!0,dragging:!1,hidden:!1,supported:!0}];case"workplace":return[{name:"play",key:"settings_features_play",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"pause",key:"settings_features_pause",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"stop",key:"settings_features_stop",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"checkit",key:"settings_features_checkit",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"prediction",key:"settings_features_prediction",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"dictionary",key:"settings_features_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"picturedictionary",key:"settings_features_picture_dictionary",enabled:!1,dragging:!1,hidden:!1,supported:!1},{name:"screenshotreader",key:"settings_features_screenshot_reader",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"talkandtype",key:"settings_features_talk_and_type",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenmasking",key:"settings_features_screen_masking",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyyellow",key:"settings_features_yellow_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studygreen",key:"settings_features_green_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyblue",key:"settings_features_blue_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studypink",key:"settings_features_pink_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyclear",key:"settings_features_clear_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studycollect",key:"settings_features_collect_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"translator",key:"settings_features_translator",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"voicenote",key:"settings_features_voicenote",enabled:!0,dragging:!1,supported:!0},{name:"vocablist",key:"settings_features_vocabulary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"audiomaker",key:"settings_features_audio_maker",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"clicktospeak",key:"settings_features_hover_speech",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"websearch",key:"settings_features_web_search",enabled:!1,dragging:!1,hidden:!1,supported:!1},{name:"simplify",key:"settings_features_simplify_page",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"practicereadingaloud",key:"settings_features_practice_reading_aloud",enabled:!1,dragging:!1,hidden:!1,supported:!1}]}},Ho=new class extends No{constructor(){const e={activeSettingsTab:"settings_speech",speech:{voice:"Ava",speed:50,reading:!0,speakAsIType:{onEachWord:!1,onEachSentence:!1},translation:"es"},prediction:{numberOfResults:10,general:{followCursor:!0,predictAhead:!0,predictAheadPolicy:!0,predictOnHover:!1},fontSize:"15"},checkIt:{dictionary:[],readonhover:!1},screenMasking:{backgroundColor:"#000000",readingLightColor:"#fffffe",backgroundOpacity:50,readingLightOpacity:50,readingLightHeight:200,readingLight:!0},language:{language:"en_GB",features:"en_GB"},features:Ko("__TOOLBARTYPE__"),theme:"Light",accounts:{google:!1,microsoft:!1,email:""},defaultsSet:!1,driveInstall:!1,notificationVersion:0};super(e,Ti,"th.rw4gc.settings.store",!1,!1),this.initialState=e}setWholeState(e){this.state=e}setDefaultState(){this.setWholeState(this.initialState),this.save()}setNotifcationVersion(e){this.state.notificationVersion=e}setScreenMaskingState(e){this.state.screenMasking=e}setDriveInstall(e){this.state.driveInstall=e}setCurrentPage(e){this.state.activeSettingsTab=e}setFirstLoadSettings(e,t,n,i,r,a,s,o,c){this.state.speech.voice=e,this.state.speech.speed=t,this.state.speech.reading=n,this.state.speech.speakAsIType.onEachWord=i,this.state.speech.speakAsIType.onEachSentence=r,this.state.speech.translation=a,this.state.language.language=s,this.state.language.features=o,this.state.defaultsSet=c,this.initialState.speech.voice=e,this.initialState.speech.speed=t,this.initialState.speech.reading=n,this.initialState.speech.speakAsIType.onEachWord=i,this.initialState.speech.speakAsIType.onEachSentence=r,this.initialState.speech.translation=a,this.initialState.language.language=s,this.initialState.language.features=o,this.initialState.defaultsSet=c}setPolicySettings(e){void 0!==e.voice&&(this.state.speech.voice=e.voice,this.initialState.speech.voice=e.voice),void 0!==e.speed&&(this.state.speech.speed=e.speed,this.initialState.speech.speed=e.speed),void 0!==e.reading&&(this.state.speech.reading=e.reading,this.initialState.speech.reading=e.reading),void 0!==e.onEachWord&&(this.state.speech.speakAsIType.onEachWord=e.onEachWord,this.initialState.speech.speakAsIType.onEachWord=e.onEachWord),void 0!==e.onEachSentence&&(this.state.speech.speakAsIType.onEachSentence=e.onEachSentence,this.initialState.speech.speakAsIType.onEachSentence=e.onEachSentence),void 0!==e.translation&&(this.state.speech.translation=e.translation,this.initialState.speech.translation=e.translation),void 0!==e.numberOfResults&&(this.state.prediction.numberOfResults=e.numberOfResults,this.initialState.prediction.numberOfResults=e.numberOfResults),void 0!==e.followCursor&&(this.state.prediction.general.followCursor=e.followCursor,this.initialState.prediction.general.followCursor=e.followCursor),void 0!==e.predictAhead&&(this.state.prediction.general.predictAhead=e.predictAhead,this.initialState.prediction.general.predictAhead=e.predictAhead),void 0!==e.predictOnHover&&(this.state.prediction.general.predictOnHover=e.predictOnHover,this.initialState.prediction.general.predictOnHover=e.predictOnHover),void 0!==e.fontSize&&(this.state.prediction.fontSize=e.fontSize,this.initialState.prediction.fontSize=e.fontSize),void 0!==e.readonhover&&(this.state.checkIt.readonhover=e.readonhover,this.initialState.checkIt.readonhover=e.readonhover),void 0!==e.backgroundColor&&(this.state.screenMasking.backgroundColor=e.backgroundColor,this.initialState.screenMasking.backgroundColor=e.backgroundColor),void 0!==e.readingLightColor&&(this.state.screenMasking.readingLightColor=e.readingLightColor,this.initialState.screenMasking.readingLightColor=e.readingLightColor),void 0!==e.backgroundOpacity&&(this.state.screenMasking.backgroundOpacity=e.backgroundOpacity,this.initialState.screenMasking.backgroundOpacity=e.backgroundOpacity),void 0!==e.readingLightOpacity&&(this.state.screenMasking.readingLightOpacity=e.readingLightOpacity,this.initialState.screenMasking.readingLightOpacity=e.readingLightOpacity),void 0!==e.readingLightHeight&&(this.state.screenMasking.readingLightHeight=e.readingLightHeight,this.initialState.screenMasking.readingLightHeight=e.readingLightHeight),void 0!==e.readingLight&&(this.state.screenMasking.readingLight=e.readingLight,this.initialState.screenMasking.readingLight=e.readingLight),void 0!==e.language&&(this.state.language.language=e.language,this.initialState.language.language=e.language),void 0!==e.features&&(this.state.language.features=e.features,this.initialState.language.features=e.features),void 0!==e.theme&&(this.state.theme=e.theme,this.initialState.theme=e.theme)}addCheckitDictionaryItem(e){this.state.checkIt.dictionary.includes(e)||this.state.checkIt.dictionary.push(e)}setPredictAheadPolicy(e){this.state.prediction.general.predictAheadPolicy=e,this.state.prediction.general.predictAheadPolicy||(this.state.prediction.general.predictAhead=!1)}resetUser(e){this.state.accounts.email=e,this.state.accounts.microsoft=!1,this.state.accounts.google=!1,this.save()}setV1Settings(e){void 0!==e.voice&&(this.state.speech.voice=e.voice.substr(0,e.voice.length-1)),void 0!==e.speed&&(this.state.speech.speed=e.speed),void 0!==e.continousreading&&(this.state.speech.reading=e.continousreading),void 0!==e.translang&&(this.state.speech.translation=e.translang),void 0!==e.speakoneachsentence&&(this.state.speech.speakAsIType.onEachSentence=e.speakoneachsentence),void 0!==e.speakoneachword&&(this.state.speech.speakAsIType.onEachWord=e.speakoneachword),void 0!==e.predictionResults&&(this.state.prediction.numberOfResults=e.predictionResults),void 0!==e.predictionTextSize&&(this.state.prediction.fontSize=e.predictionTextSize),void 0!==e.predictionCaretPosition&&(this.state.prediction.general.followCursor=e.predictionCaretPosition),void 0!==e.predictionpredictahead&&(this.state.prediction.general.predictAhead=e.predictionpredictahead),void 0!==e.screenmaskingBackgroundColour&&(this.state.screenMasking.backgroundColor=e.screenmaskingBackgroundColour),void 0!==e.screenmaskingBackgroundOpacity&&(this.state.screenMasking.backgroundOpacity=e.screenmaskingBackgroundOpacity),void 0!==e.screenmaskingReadingLightColour&&(this.state.screenMasking.readingLightColor=e.screenmaskingReadingLightColour),void 0!==e.screenmaskingReadingLightHeight&&(this.state.screenMasking.readingLightHeight=e.screenmaskingReadingLightHeight),void 0!==e.screenmaskingReadingLightOpacity&&(this.state.screenMasking.readingLightOpacity=e.screenmaskingReadingLightOpacity),void 0!==e.screenmaskingReadingLightVisibility&&(this.state.screenMasking.readingLight=e.screenmaskingReadingLightVisibility),void 0!==e.language&&(this.state.language.language=e.language),void 0!==e.services&&(this.state.language.features=e.services)}setV1ToolbarFeatures(e){e.map&&e.map((e=>{let t=this.state.features.find((t=>{if(e.command===t.name)return e;switch(e.command){case"factfinder":if("websearch"===t.name)return e;break;case"speechinput":if("talkandtype"===t.name)return e;break;case"speechmaker":if("audiomaker"===t.name)return e;break;case"highlightyellow":if("studyyellow"===t.name)return e;break;case"highlightgreen":if("studygreen"===t.name)return e;break;case"highlightblue":if("studyblue"===t.name)return e;break;case"highlightpink":if("studypink"===t.name)return e;break;case"highlightclear":if("studyclear"===t.name)return e;break;case"highlightscollect":if("studycollect"===t.name)return e;break;case"vocabtool":if("vocablist"===t.name)return e}}));t&&(t.enabled=e.show)}))}importV1Settings(e,t,n){this.state.defaultsSet=!1,this.setV1Settings(e),t.length>0&&(this.state.checkIt.dictionary=t),this.setV1ToolbarFeatures(n),this.save()}fixVoice(){this.state.speech.voice.startsWith("ss-")&&(this.state.speech.voice=this.state.speech.voice.slice(3),this.save())}};var Wo=["body"];function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xo(e,t,n,i,r,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function Qo(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Xo(a,i,r,s,o,"next",e)}function o(e){Xo(a,i,r,s,o,"throw",e)}s(void 0)}))}}class Zo{constructor(){}static doFetch(e){var t=arguments,n=this;return Qo((function*(){var i=t.length>1&&void 0!==t[1]?t[1]:{},{body:r}=i,a=$o(i,Wo);return new Promise(function(){var t=Qo((function*(t,i){if(n.method="GET",n.timeout=0,void 0===a.method?n.method=r?"POST":"GET":n.method=a.method,a.blob){for(var s=atob(r.split(",")[1]),o=new ArrayBuffer(s.length),c=new Uint8Array(o),u=a.headers["content-type"],l=0;l<s.length;l++)c[l]=s.charCodeAt(l);r=new Blob([c],{type:u})}a.timeout&&(n.timeout=a.timeout);var d=zo(zo({method:n.method},a),{},{headers:zo({},a.headers)});r&&(d.body=r);var h=null;if(n.timeout>0)try{var p=new AbortController,g=setTimeout((()=>p.abort()),n.timeout);h=yield fetch(e,zo(zo({},d),{},{signal:p.signal})),clearTimeout(g)}catch(e){return Promise.reject(e)}else h=yield fetch(e,d);if(h.ok){var f={};if(f.contentType=h.headers.get("content-type"),f.headers=Object.fromEntries(h.headers.entries()),f.contentType){if(-1!==f.contentType.indexOf("application/json"))f.json=yield h.json();else if(f.contentType.startsWith("text"))f.text=yield h.text();else if(-1!==f.contentType.indexOf("audio/mpeg")){var m=yield h.arrayBuffer();f.arrayBuffer=(e=>{for(var t="",n=new Uint8Array(e),i=n.byteLength,r=0;r<i;r++)t+=String.fromCharCode(n[r]);return btoa(t)})(m)}else f.blob=yield h.blob();t({data:f})}else i(f)}else i(f)}));return function(e,n){return t.apply(this,arguments)}}())}))()}}class ec{constructor(){chrome.runtime.onMessage.addListener(((e,t,n)=>{if(t.id!==chrome.runtime.id)return!1;if(!e.command)return!1;if("swfetch8598"===e.command)Zo.doFetch(e.url,e.options).then((e=>{n(e)}));return!0}))}}const tc=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",DEFAULT:"Default"});let nc=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},ic=class{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};const rc="local";let ac=class extends nc{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(ic.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=ic.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=ic.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=ic.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=ic.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=ic.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=ic.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}},sc=class{constructor(e,t="microsoft"){this.idName=t,this.clientId=e,this.userInfo=void 0,this.email=void 0,this.accessCode=void 0,this.redirectUri="undefined"!=typeof chrome&&chrome.identity?chrome.identity.getRedirectURL():`${window.location.origin}/index.html`,this.storage=new ac(rc),this.storage.retrieve("rw4gc.ms-code.cache").then((e=>{null===e||0===Object.keys(e).length&&e.constructor===Object||(this.accessCode=e)}))}async getUserInfo(e=!0,t=!1,n=!1){var i=this;return new Promise(((n,r)=>{if(chrome){if(this.userInfo&&!t)return void n(this.userInfo);chrome.identity.getProfileUserInfo((async function(t){e?(await i.authorize(["user.read"]),n(i.userInfo)):r("Unable to get user details")}))}else r(new Error("Not running on a chromium browser"))}))}get msSiteUrl(){return"https://thzbf.texthelp.com/"}get sitePath(){return"mslogin.html"}async authorizeDocumentCreation(){return await this.authorize(["user.read","files.readwrite"],!1,!0)}async authorizeDriveInstall(){return""}async authorize(e,t=!1,n=!0){var i=this;try{return new Promise((async function(t,r){const a=(await i._chromeTabsQuery({active:!0,currentWindow:!0}))[0].id;let s=await i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]});if(s[0])chrome.tabs.update(s[0].id,{url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`});else{var o=Object.keys(e).map((t=>e[t])).join(",");chrome.tabs.create({url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`})}chrome.runtime.onMessage.addListener((async function e(s,o){if(o.id!==chrome.runtime.id)return!1;if(!s.command)return!1;switch(s.command.toLowerCase()){case"thswauthorised":chrome.runtime.onMessage.removeListener(e),i.accessCode=s.account.accessToken,n&&(i.userInfo=i.genericUserFormat(s.account.account),i.storage.store("rw4gc.ms-code.cache",i.accessCode,!1)),i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),chrome.tabs.update(a,{active:!0}),t(i.accessCode);break;case"thswauthcancelled":chrome.runtime.onMessage.removeListener(e),r("User cancelled")}}))}))}catch(e){console.log(e)}}signOut(){var e=this;return new Promise((async function(t,n){try{const n={active:!0,currentWindow:!0},i=await e._chromeTabsQuery(n);try{const n=i[0].id;let r,a=await e._chromeTabsQuery({url:[`${e.msSiteUrl}*`]});a[0]?(r=a[0].id,chrome.tabs.update(a[0].id,{url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`})):chrome.tabs.create({url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`},(function(e){r=e.id}));let s=async function n(i,r){if(r.id!==chrome.runtime.id&&t(),i.command||t(),"thswsignedout"===i.command.toLowerCase()){chrome.runtime.onMessage.removeListener(n),e.accessCode=void 0;try{e.storage.remove("rw4gc.ms-code.cache")}catch(e){}t()}};chrome.runtime.onMessage.addListener(s),chrome.tabs.onUpdated.addListener(((e,t)=>{e===r&&"complete"===t.status&&t.url}))}catch(n){e.accessCode=void 0,e.storage.remove("rw4gc.ms-code.cache"),t()}}catch(e){console.log(e),t()}}))}async getAndValidateAccessToken(e,t=!0){return{accessToken:await this.authorize(e,t)}}genericUserFormat(e){let t={licensetype:"microsoft"},n=e.displayName;null==n&&(n=e.name),t.name=n;let i=e.mail;return null==i&&(i=e.userPrincipalName),null==i&&(i=e.username),t.email=i,t}_openTab(e){chrome.tabs.query({},(function(t){for(let n,i=0;n=t[i];i++)if(n.url===e)return chrome.tabs.reload(n.id,{},(function(){})),void chrome.tabs.update(n.id,{active:!0});chrome.tabs.create({url:e})}))}_chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}},oc=class{constructor(e="google"){this.idName=e,this.userScopes=["https://www.googleapis.com/auth/userinfo.email"],this.docScopes=["https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"],this.driveScopes=["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install"]}getUserInfo(e=!0,t=!1,n=!1){return new Promise(((i,r)=>{try{chrome?chrome.identity?chrome.identity.getProfileUserInfo((a=>{null!==a&&null!==a.email&&""===a.email&&null!==a.id&&""===a.id&&n?(this.userInfo=null,i(null)):a&&a.email.length>0&&(void 0===a.licensetype||"google"===a.licensetype)&&!t?(a.licensetype="google",this.userInfo=a,i(a)):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details")})):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details"):r("Not running on a chromium browser")}catch(e){r(e.Message)}}))}async authorizeDocumentCreation(){return this.authorize(this.docScopes)}async authorizeDriveInstall(){return this.authorize(this.driveScopes)}async getUserInfoFromToken(e){const t=await fetch("https://www.googleapis.com/userinfo/v2/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("invalid_response_from_oauth");const{name:n,email:i}=await t.json();return{name:n,email:i,licensetype:"google"}}getAuthToken(e,t,n=!0){return new Promise(((i,r)=>{try{chrome.identity.getAuthToken({interactive:e,scopes:t},(a=>{if(chrome.runtime.lastError||null==a)if(n)try{chrome.identity.removeCachedAuthToken({token:a},(()=>{this.getAuthToken(e,t,!1).then((e=>{i(e)})).catch((e=>{r(e)}))}))}catch(e){r(e.Message)}else r(chrome.runtime.lastError);else i(a)}))}catch(e){console.log(e.Message),r(e.Message)}}))}async authorize(e){let t;try{return t=await this.getAuthToken(!1,e),t}catch(n){try{return t=await this.getAuthToken(!0,e),t}catch(e){throw console.log("auth error"),console.error(e),Error(e)}}}async signOut(){chrome.identity.launchWebAuthFlow({interactive:!1,url:"https://accounts.google.com/logout"},(function(e){}))}async validToken(e){let t=`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${e}`;const n=await fetch(t,{method:"GET"});if(n.ok)return!0;let i=await n.json();return console.log(i),!1}async revokeCachedTokens(e){return new Promise(((t,n)=>{chrome.identity.removeCachedAuthToken({token:e},(e=>{t(!0)}))}))}async getAndValidateAccessToken(e,t=!0){let n=null;try{n=await this.getAuthToken(t,e,!1)}catch(e){return{error:e,accessToken:null}}return 0===n.length?"":!0===await this.validToken(n)?n:(await this.revokeCachedTokens(n),n=await this.getAuthToken(t,e,!1),{accessToken:n})}},cc=class{constructor(){this.auth=null}async initialise(e){var t=this;return new Promise((async function(n){switch(e){case tc.GOOGLE:return t.auth=new oc,void n();case tc.MICROSOFT:return t.auth=new sc("0113ff4a-9673-4c71-8cba-9229b16b7ad8"),void n();default:let e=await t.getAccountTypeFromProfileInfo();if(e)return t.auth=e,void n();chrome.runtime.onMessage.addListener((async function(e,i){if(i.id===chrome.runtime.id&&e.command)return"thswsetaccounttype"===e.command.toLowerCase()?("MS"===e.accountType?t.auth=new sc("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):t.auth=new oc,void n()):void n()}));let i={active:!0,currentWindow:!0},r=await t.chromeTabsQuery(i);if(r[0].url.includes("selectiondialog.html?q"));else{let e=await t.chromeTabsQuery({url:["chrome-extension://"+chrome.runtime.id+"/*"]});e[0]?await chrome.tabs.update(e[0].id,{active:!0}):chrome.tabs.create({url:"chrome-extension://"+chrome.runtime.id+"/selectiondialog/selectiondialog.html?q="+r[0].id})}}}))}chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}async switchAuthType(e){}async getAccountTypeFromProfileInfo(){var e=this;return new Promise((async function(t){chrome.identity?chrome.identity.getProfileUserInfo((async function(n){if(n.email.length>0){let n=null;return n=await e._isEdge()?new sc("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):new oc,void t(n)}t(null)})):t(null)}))}async getUserInfo(e=!1,t=!1){return await this.auth.getUserInfo(void 0,e,t)}async authorizeDocumentCreation(){return await this.auth.authorizeDocumentCreation()}async authorizeDriveInstall(){return await this.auth.authorizeDriveInstall()}async authorize(e){return await this.auth.authorize(e)}async getAndValidateAccessToken(e,t=!0){return await this.auth.getAndValidateAccessToken(e,t)}async _isEdge(){chrome.runtime.sendMessage({command:"th-isEdge"},(e=>e))}};class uc{constructor(){var e=this;chrome.runtime.onMessage.addListener((async function(t,n,i){if(n.id!==chrome.runtime.id)return!1;if(!t.command)return!1;switch(t.command.toLowerCase()){case"swauthorize":return e.swAuthorize(t.authType,t.scopes).then((e=>{void 0!==i&&i(e)})),!0;case"swauthorizefordoccreation":return e.swAuthorizeForDocCreation(t.authType).then((e=>{void 0!==i&&i(e)})),!0;case"swauthorizefordriveinstall":return e.swAuthorizeForDriveInstall(t.authType).then((e=>{void 0!==i&&i(e)})),!0;case"swlauncewebauthflow":return e.swLaunchWebAuthFlow(t.interactive,t.url).then((e=>{void 0!==i&&i(e)})),!0;case"swgetandvalidateaccesstoken":e.swGetAndValidateAccessToken(t.scopes,t.authType).then((e=>{i(e)}));default:return!1}}))}async swAuthorize(e,t){return console.log("swAuthorize"),this.bgAuth=new cc,await this.bgAuth.initialise(e),this.bgAuth.authorize(t)}async swAuthorizeForDocCreation(e){return this.bgAuth=new cc,await this.bgAuth.initialise(e),this.bgAuth.authorizeDocumentCreation()}async swAuthorizeForDriveInstall(e){return this.bgAuth=new cc,await this.bgAuth.initialise(e),this.bgAuth.authorizeDriveInstall()}async swGetAndValidateAccessToken(e,t){this.bgAuth=new cc,await this.bgAuth.initialise(t);return await this.bgAuth.getAndValidateAccessToken(e)}swLaunchWebAuthFlow(e,t){return new Promise(((n,i)=>{chrome.identity.launchWebAuthFlow({interactive:e,url:t},(e=>{n(e)}))}))}}const lc=Object.freeze([{matches:["*"],settings:{target:{},files:["content.bundle.js"]}},{matches:["https://docs.google.com/document/*"],settings:{target:{},files:["gdocs.content.bundle.js"]}},{matches:["https://docs.google.com/presentation/*"],settings:{target:{},files:["gdocs.content.bundle.js"]}}]),dc=Object.freeze([{matches:["https://docs.google.com/document/*"],settings:{target:{},files:["gdi.bundle.js"]}}]),hc=(e,t)=>{let n={};e=e.toLowerCase();for(let i in t){if(i=i.toLowerCase(),"default"==i){n=t[i];break}let r=e.substring(0,i.length);if(r===i){n=t[i];break}{r=e;let a=i.split("*");if(a.length>1){let s=!0;for(let e in a){let t=r.indexOf(a[e]);if(-1==t){s=!1;break}r=r.substr(t+a[e].length)}if(s){r=e,n=t[i];break}}}}return n},pc=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",DEFAULT:"Default"});let gc=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},fc=class{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};const mc="local";let vc=class extends gc{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(fc.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=fc.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=fc.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=fc.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=fc.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=fc.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=fc.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}};class _c{constructor(e,t="microsoft"){this.idName=t,this.clientId=e,this.userInfo=void 0,this.email=void 0,this.accessCode=void 0,this.redirectUri="undefined"!=typeof chrome&&chrome.identity?chrome.identity.getRedirectURL():`${window.location.origin}/index.html`,this.storage=new vc(mc),this.storage.retrieve("rw4gc.ms-code.cache").then((e=>{null===e||0===Object.keys(e).length&&e.constructor===Object||(this.accessCode=e)}))}async getUserInfo(e=!0,t=!1,n=!1){var i=this;return new Promise(((n,r)=>{if(chrome){if(this.userInfo&&!t)return void n(this.userInfo);chrome.identity.getProfileUserInfo((async function(t){e?(await i.authorize(["user.read"]),n(i.userInfo)):r("Unable to get user details")}))}else r(new Error("Not running on a chromium browser"))}))}get msSiteUrl(){return"https://thzbf.texthelp.com/"}get sitePath(){return"mslogin.html"}async authorizeDocumentCreation(){return await this.authorize(["user.read","files.readwrite"],!1,!0)}async authorizeDriveInstall(){return""}async authorize(e,t=!1,n=!0){var i=this;try{return new Promise((async function(t,r){const a=(await i._chromeTabsQuery({active:!0,currentWindow:!0}))[0].id;let s=await i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]});if(s[0])chrome.tabs.update(s[0].id,{url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`});else{var o=Object.keys(e).map((t=>e[t])).join(",");chrome.tabs.create({url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`})}chrome.runtime.onMessage.addListener((async function e(s,o){if(o.id!==chrome.runtime.id)return!1;if(!s.command)return!1;switch(s.command.toLowerCase()){case"thswauthorised":chrome.runtime.onMessage.removeListener(e),i.accessCode=s.account.accessToken,n&&(i.userInfo=i.genericUserFormat(s.account.account),i.storage.store("rw4gc.ms-code.cache",i.accessCode,!1)),i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),chrome.tabs.update(a,{active:!0}),t(i.accessCode);break;case"thswauthcancelled":chrome.runtime.onMessage.removeListener(e),r("User cancelled")}}))}))}catch(e){console.log(e)}}signOut(){var e=this;return new Promise((async function(t,n){try{const n={active:!0,currentWindow:!0},i=await e._chromeTabsQuery(n);try{const n=i[0].id;let r,a=await e._chromeTabsQuery({url:[`${e.msSiteUrl}*`]});a[0]?(r=a[0].id,chrome.tabs.update(a[0].id,{url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`})):chrome.tabs.create({url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`},(function(e){r=e.id}));let s=async function n(i,r){if(r.id!==chrome.runtime.id&&t(),i.command||t(),"thswsignedout"===i.command.toLowerCase()){chrome.runtime.onMessage.removeListener(n),e.accessCode=void 0;try{e.storage.remove("rw4gc.ms-code.cache")}catch(e){}t()}};chrome.runtime.onMessage.addListener(s),chrome.tabs.onUpdated.addListener(((e,t)=>{e===r&&"complete"===t.status&&t.url}))}catch(n){e.accessCode=void 0,e.storage.remove("rw4gc.ms-code.cache"),t()}}catch(e){console.log(e),t()}}))}async getAndValidateAccessToken(e,t=!0){return{accessToken:await this.authorize(e,t)}}genericUserFormat(e){let t={licensetype:"microsoft"},n=e.displayName;null==n&&(n=e.name),t.name=n;let i=e.mail;return null==i&&(i=e.userPrincipalName),null==i&&(i=e.username),t.email=i,t}_openTab(e){chrome.tabs.query({},(function(t){for(let n,i=0;n=t[i];i++)if(n.url===e)return chrome.tabs.reload(n.id,{},(function(){})),void chrome.tabs.update(n.id,{active:!0});chrome.tabs.create({url:e})}))}_chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}}class yc{constructor(e="google"){this.idName=e,this.userScopes=["https://www.googleapis.com/auth/userinfo.email"],this.docScopes=["https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"],this.driveScopes=["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install"]}getUserInfo(e=!0,t=!1,n=!1){return new Promise(((i,r)=>{try{chrome?chrome.identity?chrome.identity.getProfileUserInfo((a=>{null!==a&&null!==a.email&&""===a.email&&null!==a.id&&""===a.id&&n?(this.userInfo=null,i(null)):a&&a.email.length>0&&(void 0===a.licensetype||"google"===a.licensetype)&&!t?(a.licensetype="google",this.userInfo=a,i(a)):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details")})):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details"):r("Not running on a chromium browser")}catch(e){r(e.Message)}}))}async authorizeDocumentCreation(){return this.authorize(this.docScopes)}async authorizeDriveInstall(){return this.authorize(this.driveScopes)}async getUserInfoFromToken(e){const t=await fetch("https://www.googleapis.com/userinfo/v2/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("invalid_response_from_oauth");const{name:n,email:i}=await t.json();return{name:n,email:i,licensetype:"google"}}getAuthToken(e,t,n=!0){return new Promise(((i,r)=>{try{chrome.identity.getAuthToken({interactive:e,scopes:t},(a=>{if(chrome.runtime.lastError||null==a)if(n)try{chrome.identity.removeCachedAuthToken({token:a},(()=>{this.getAuthToken(e,t,!1).then((e=>{i(e)})).catch((e=>{r(e)}))}))}catch(e){r(e.Message)}else r(chrome.runtime.lastError);else i(a)}))}catch(e){console.log(e.Message),r(e.Message)}}))}async authorize(e){let t;try{return t=await this.getAuthToken(!1,e),t}catch(n){try{return t=await this.getAuthToken(!0,e),t}catch(e){throw console.log("auth error"),console.error(e),Error(e)}}}async signOut(){chrome.identity.launchWebAuthFlow({interactive:!1,url:"https://accounts.google.com/logout"},(function(e){}))}async validToken(e){let t=`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${e}`;const n=await fetch(t,{method:"GET"});if(n.ok)return!0;let i=await n.json();return console.log(i),!1}async revokeCachedTokens(e){return new Promise(((t,n)=>{chrome.identity.removeCachedAuthToken({token:e},(e=>{t(!0)}))}))}async getAndValidateAccessToken(e,t=!0){let n=null;try{n=await this.getAuthToken(t,e,!1)}catch(e){return{error:e,accessToken:null}}return 0===n.length?"":!0===await this.validToken(n)?n:(await this.revokeCachedTokens(n),n=await this.getAuthToken(t,e,!1),{accessToken:n})}}class bc{constructor(){this.auth=null}async initialise(e){var t=this;return new Promise((async function(n){switch(e){case pc.GOOGLE:return t.auth=new yc,void n();case pc.MICROSOFT:return t.auth=new _c("0113ff4a-9673-4c71-8cba-9229b16b7ad8"),void n();default:let e=await t.getAccountTypeFromProfileInfo();if(e)return t.auth=e,void n();chrome.runtime.onMessage.addListener((async function(e,i){if(i.id===chrome.runtime.id&&e.command)return"thswsetaccounttype"===e.command.toLowerCase()?("MS"===e.accountType?t.auth=new _c("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):t.auth=new yc,void n()):void n()}));let i={active:!0,currentWindow:!0},r=await t.chromeTabsQuery(i);if(r[0].url.includes("selectiondialog.html?q"));else{let e=await t.chromeTabsQuery({url:["chrome-extension://"+chrome.runtime.id+"/*"]});e[0]?await chrome.tabs.update(e[0].id,{active:!0}):chrome.tabs.create({url:"chrome-extension://"+chrome.runtime.id+"/selectiondialog/selectiondialog.html?q="+r[0].id})}}}))}chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}async switchAuthType(e){}async getAccountTypeFromProfileInfo(){var e=this;return new Promise((async function(t){chrome.identity?chrome.identity.getProfileUserInfo((async function(n){if(n.email.length>0){let n=null;return n=await e._isEdge()?new _c("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):new yc,void t(n)}t(null)})):t(null)}))}async getUserInfo(e=!1,t=!1){return await this.auth.getUserInfo(void 0,e,t)}async authorizeDocumentCreation(){return await this.auth.authorizeDocumentCreation()}async authorizeDriveInstall(){return await this.auth.authorizeDriveInstall()}async authorize(e){return await this.auth.authorize(e)}async getAndValidateAccessToken(e,t=!0){return await this.auth.getAndValidateAccessToken(e,t)}async _isEdge(){chrome.runtime.sendMessage({command:"th-isEdge"},(e=>e))}}class Sc{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class Ec{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}const Tc="local";class Ac extends Sc{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(Ec.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=Ec.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=Ec.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=Ec.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=Ec.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=Ec.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=Ec.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}class Oc{constructor(e=pc.DEFAULT,t=!1){this._loginType=e,this.isEdge=t}getUser(e=!1,t=!1){var n=this;return new Promise(((i,r)=>{try{let a=new Ac(Tc);a.retrieve("rw4gc.user.cache").then((async function(s){if(e||null===s||0===Object.keys(s).length&&s.constructor===Object){n.isEdge&&(n._loginType=pc.MICROSOFT);let s=new bc;await s.initialise(n._loginType),s.getUserInfo(e,t).then((e=>{null===e?a.remove("rw4gc.user.cache"):a.store("rw4gc.user.cache",e,!1),i(e)})).catch((e=>{r(e)}))}else if(void 0===s.email||null===s.email){n.isEdge&&(n._loginType=pc.MICROSOFT);let s=new bc;await s.initialise(n._loginType),s.getUserInfo(e,t).then((e=>{null===e?a.remove("rw4gc.user.cache"):a.store("rw4gc.user.cache",e,!1),i(e)})).catch((e=>{r(e)}))}else i(s)}))}catch(e){r(e)}}))}signOut(){var e=this;return new Promise((async function(t,n){try{let i=new Ac(Tc);i.retrieve("rw4gc.user.cache").then((async function(r){let a=new bc;await a.initialise(e._loginType),null===r||0===Object.keys(r).length&&r.constructor===Object?a.auth.signOut().then((()=>{t(!0)})).catch((e=>{n(e)})):a.auth.signOut().then((()=>{i.remove("rw4gc.user.cache").then((()=>{t(!0)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}))}catch(e){n(e)}}))}}var wc={thDebugMode:!1,thCloudFrontBypass:!1,thAuthProduct:!1,sendFetchRequest:function(e,t){return new Promise((function(n){!1===t&&(t=new Date),wc.sendBrowserRequest(e,t).then((e=>{n([e,t,!1])})).catch((e=>{n([!1,t,!1])}))}))},s3Req:function(e,t){if(wc.thCloudFrontBypass)var n="https://s3.amazonaws.com/rwfamilylive/"+e;else n="https://licensing.texthelp.com/"+e;return wc.sendFetchRequest(n,t)},sendBrowserRequest:function(e,t){return void 0===wc.retryCount&&(wc.retryCount=2),new Promise((function(n,i){fetch(e+"?cbp="+Math.random(),{}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");n(e.text())})).catch((function(r){if(1===wc.retryCount)return i(r);wc.retryCount=wc.retryCount-1,setTimeout((function(){wc.sendBrowserRequest(e,t).then(n).catch(i)}),3e3)}))}))},setToday:function(e){var t=e.getResponseHeader("Date"),n=e.getResponseHeader("Age");if(!isNaN(parseFloat(n))&&isFinite(n))var i=new Date(t),r=new Date(i.getTime()+parseInt(1e3*n)),a=new Date(r);else a=new Date(t);return a},sugarFetchReq:function(e,t,n,i){return new Promise((function(e){fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).then((t=>{t.ok?t.text().then((t=>{e(""!==t)})):(wc.logger(t.status),wc.logger(t.statusText),e(!1))})).catch((t=>{e(!1)}))}))},sugarReq:function(e,t){return new Promise((function(n){var i="https://ist.texthelp.com/queue/licensing/push/"+e,r=JSON.stringify(t);return n(wc.sugarFetchReq(e,t,i,r))}))},freemium:function(e,t,n){var i="expiry_"+n,r={};return r.user=e,r.start=wc.getTodaysDate(t),r[i]=wc.get30DaysDate(t),r.licence_type="Freemium",JSON.stringify(r)},expiredFreemium:function(e,t,n){var i="expiry_"+n,r={};return r.user=e,r.start=wc.getTodaysDate(t),r[i]=wc.getTodaysDate(t),r.licence_type="Freemium",JSON.stringify(r)},getTodaysDate:function(e){if(e instanceof Date)var t=new Date(e).toJSON().slice(0,10);else t=(new Date).toJSON().slice(0,10);return t},getYesterdaysDate:function(e){var t;return e instanceof Date?((t=new Date(e)).setDate(t.getDate()-1),t=t.toJSON().slice(0,10)):((t=new Date).setDate(t.getDate()-1),t=t.toJSON().slice(0,10)),t},getCurrentDateTime:function(e){if(e instanceof Date)var t=new Date(e).toJSON();else t=(new Date).toJSON();return t},dateInFuture:function(e,t){return e=new Date(e),new Date(t).getTime()<=e.getTime()},get30DaysDate:function(e){var t=new Date(wc.getTodaysDate(e)),n=(new Date).setDate(t.getDate()+30);return new Date(n).toJSON().slice(0,10)},setSyncDate:function(e,t,n){var i=wc.getTodaysDate(e),r={};r[t]=i,"Chrome"==n?chrome.storage.sync.set(r):localStorage.setItem(t,i)},resolveSync:(e,t,n,i)=>void 0===e?(wc.setSyncDate(t,n,i),!0):!(null!==e&&!wc.needsUpdated(e)||(wc.setSyncDate(t,n,i),0)),getLastSync:function(e,t,n){return new Promise((i=>{var r="texthelp_"+t+"_ga_updated_in_licensing";"Chrome"==n?chrome.storage.sync.get([r],(t=>{i(wc.resolveSync(t[r],e,r,n))})):i(wc.resolveSync(localStorage.getItem(r),e,r,n))}))},needsUpdated:function(e){var t=new Date,n=new Date;return n.setDate(t.getDate()-30),n.setHours(0),n.setMinutes(0),n.setSeconds(0),Date.parse(n)>Date.parse(e)},dateDiff:function(e,t,n){e=new Date(e);var i=(t=new Date(t))-e;if(isNaN(i))return NaN;switch(n){case"years":return t.getFullYear()-e.getFullYear();case"months":return 12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth());case"weeks":return Math.floor(i/6048e5);case"days":return Math.floor(i/864e5);case"hours":return Math.floor(i/36e5);case"minutes":return Math.floor(i/6e4);case"seconds":return Math.floor(i/1e3);default:return}},platformFlagToCheck:function(e){return"equatio"==e||"equatio_lti"==e?"equatio":"ft4g"==e?"ft4g":"wriq"==e?"wriq":"reachdeck"==e?"reachdeck":"orbitdoc"==e?"orbitdoc":"claroread"==e?"claroread":"writinghelper"==e?"writinghelper":"scanpen"==e?"scanpen":"read_and_write"},verifyUserCanEnrolInGroup:function(e,t,n){var i=JSON.parse(e),r=i[wc.platformFlagToCheck(n)];if(!0===wc.dateInFuture(i.expiry,t)&&1==r){if(1==i.unlimited)return!0;if(i.user_count>i.enrolled_seats&&1!=i.using_admin_tool)return!0}return!1},getUserFilename:function(e,t){if("equatio"==t)var n="users_equatio";else n="equatio_lti"==t?"users_equatio_lti":"ft4g"==t?"users_ft4g":"wriq"==t?"users_wriq":"reachdeck"==t?"users_reachdeck":"orbitdoc"==t?"users_orbitdoc":"claroread"==t?"users_claroread":"scanpen"==t?"users_scanpen":"writinghelper"==t?"users_writinghelper":"users";return n+"/"+e+".json"},getGroupFilename:function(e){return"groups/"+e+".json"},getFeaturesFilename:function(e,t){return"new_"+t+"_features_"+e+".json"},getDomainsListFilename:function(e,t){return"domains/"+e+"/"+t+".json"},getProductExpiryProp:function(e){return"expiry_"+e},getSoftwareEnabledProp:function(e){return"equatio"==e?"equatio":"equatio_lti"==e?"equatio_lti":"ft4g"==e?"ft4g":"wriq"==e?"wriq":"reachdeck"==e?"reachdeck":"orbitdoc"==e?"orbitdoc":"claroread"==e?"claroread":"scanpen"==e?"scanpen":"writinghelper"==e?"writinghelper":"read_and_write"},isGroupAuthCode:function(e){return"G"==e.substring(0,1)},isValidUser:function(e){return e.indexOf("@")>=0},setDebugMode:function(e){wc.debug=e},validProduct:function(e){return["mac","rw4gc","windows","ipad","android","equatio","equatio_lti","edge","ft4g","wriq","reachdeck","orbitdoc","claroread","writinghelper","scanpen"].includes(e)},logger:function(e){}},Cc=function(e,t){return t>>>e|t<<32-e},Ic=function(e){return Cc(2,e)^Cc(13,e)^Cc(22,e)},Rc=function(e){return Cc(6,e)^Cc(11,e)^Cc(25,e)},Nc=function(e){return Cc(7,e)^Cc(18,e)^e>>>3},Dc=function(e){return Cc(17,e)^Cc(19,e)^e>>>10},Lc=function(e,t,n){return e&t^~e&n},kc=function(e,t,n){return e&t^e&n^t&n},Pc=function(e){for(var t="",n=7;n>=0;n-=1)t+=(e>>>4*n&15).toString(16);return t},Uc=function(e){for(var t=unescape(encodeURIComponent(e)),n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=(t+=String.fromCharCode(128)).length/4+2,a=Math.ceil(r/16),s=new Array(a),o=0;a>o;o+=1){s[o]=new Array(16);for(var c=0;c<16;c+=1)s[o][c]=t.charCodeAt(64*o+4*c)<<24|t.charCodeAt(64*o+4*c+1)<<16|t.charCodeAt(64*o+4*c+2)<<8|t.charCodeAt(64*o+4*c+3)}s[a-1][14]=(t.length-1)/Math.pow(2,32)*8,s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1&4294967295);for(var u=new Array(64),l=0;a>l;l+=1){for(var d=0;d<16;d+=1)u[d]=s[l][d];for(var h=16;h<64;h+=1)u[h]=Dc(u[h-2])+u[h-7]+Nc(u[h-15])+u[h-16]&4294967295;for(var p=i[0],g=i[1],f=i[2],m=i[3],v=i[4],_=i[5],y=i[6],b=i[7],S=0;S<64;S+=1){var E=b+Rc(v)+Lc(v,_,y)+n[S]+u[S],T=Ic(p)+kc(p,g,f);b=y,y=_,_=v,v=m+E&4294967295,m=f,f=g,g=p,p=E+T&4294967295}i[0]=i[0]+p&4294967295,i[1]=i[1]+g&4294967295,i[2]=i[2]+f&4294967295,i[3]=i[3]+m&4294967295,i[4]=i[4]+v&4294967295,i[5]=i[5]+_&4294967295,i[6]=i[6]+y&4294967295,i[7]=i[7]+b&4294967295}return`${Pc(i[0])}${Pc(i[1])}${Pc(i[2])}${Pc(i[3])}${Pc(i[4])}${Pc(i[5])}${Pc(i[6])}${Pc(i[7])}`},Mc=function(e){var t=e.toLowerCase();t=t.trim();try{var n=t.split("@"),i=n[0].replace("%",""),r=n[1];return`${Uc(i+="hfdu9b89';JHK7898hbh;';[/")}@${r}`}catch(e){}return""},xc=function(e){var t=e.toUpperCase();t=t.trim();try{return Uc(t+"hfdu9b89';JHK7898hbh;';[/")}catch(e){}return""},Yc=function(e){var t=e.toLowerCase();t=t.trim();try{return Uc(t+"hfdu9b89';JHK7898hbh;';[/")}catch(e){}return""},jc=!1,Gc=function(e,t){var n=!1,i=!1,r=!1,a=!1,s=!1,o=!1,c=!1,u=!1,l=!1,d=!1,h=!1,p=!1,g=!1,f=!1,m=!1,v=!1,_=!1,y="",b="",S="",E=!0,T=function(){wc.s3Req("institutions_list.json",m).then((([e,t,n])=>{A(e)}))},A=function(e){var t=JSON.parse(e),n=!1;u.find((function(e){return e in t&&(l=t[e],n=!0),n})),l?wc.s3Req(wc.getGroupFilename(l),m).then((([e,t,n])=>{D(e,t)})):C()},O=function(e,t,i){if(m=t,!1!==e)if("Group"===(f=JSON.parse(e)).licence_type)wc.s3Req(wc.getGroupFilename(f.group),m).then((([e,t,n])=>{U(e,t)}));else{n=e;var s=JSON.parse(e);c?T():r&&r!=s.auth_code?a?(d=!0,w()):C():"Freemium"==s.licence_type?(d=!0,w()):j()}else d=!0,w(i)},w=function(e){if(c)T();else if(s){var t=wc.platformFlagToCheck(g),n=wc.getDomainsListFilename(t,s);wc.s3Req(n,m).then((([e,t,n])=>{I(e,t,n)}))}else C(e)},C=function(e){r&&!a?wc.s3Req(wc.getUserFilename(r,g),m).then((([e,t,n])=>{P(e,t,n)})):n?j():i?E?M(e):x():(h=Error("User or product code not set"),t(h,!1))},I=function(e,t,n){m=t,!1!==e?N(e,R):C(n)},R=function(e){0!=e?wc.s3Req("groups/"+e+".json",m).then((([e,t,n])=>{D(e,t)})):C()},N=function(e,t){var n=JSON.parse(e),i=!1;"rw4gc"==g||"equatio"==g||"equatio_lti"==g||"ft4g"==g||"wriq"==g||"reachdeck"==g||!1!==o?null!=n.unlimited_oauth&&null!=n.unlimited_oauth[s]&&(i=n.unlimited_oauth[s]):!1!==r&&!0===a&&null!=n.unlimited&&(null!=n.unlimited[r]?i=n.unlimited[r]:h=Error("Product code invalid")),!i&&r&&!0===a&&null!=n.limited&&(null!=n.limited[r]?i=n.limited[r]:h=Error("Product code invalid")),i||null!=n.hide_unlicensed&&null!=n.hide_unlicensed[s]&&(p=!0),t(i)},D=function(e,t){m=t,!1!==e?(n=e,_?j():L(e)):_?wc.s3Req(wc.getUserFilename(i,g),m).then((([e,t,n])=>{O(e,t,n)})):C()},L=function(e){!1===E?x():wc.verifyUserCanEnrolInGroup(e,m,g)?(n=e,j(),k(e)):(n=!1,h=Error("Unable to enrol in group"),C())},k=function(e){var t=JSON.parse(e),n={};n.user=i,n.group=t.guid,n.auth_code=t.auth_code,n.product=g,c&&(n.institution_id=l,n.login_type=o),wc.sugarReq("group",n,(function(e){}))},P=function(e,a,s){m=a;try{if(!1!==e)if(wc.logger("[DEBUG]: Found auth code file."),i){var c=!0;0==o&&(c=!1,h=Error("Login type not set"));var u=JSON.parse(e);u.hasOwnProperty("perpetual")&&u.perpetual||wc.dateInFuture(u.expiry,m)||(c=!1,h=Error("License expired"));var l=wc.getSoftwareEnabledProp(g);!c||u.hasOwnProperty(l)&&0!=u[l]||(c=!1,h=Error("Product not enabled"));var d=u[o+"_login"];if(c&&""!==d){if(d===i)return n=e,j();c=!1,h=Error("This product code is already tied to a user for this login type")}else u[o+"_login"]=i;if(!0===c){n=JSON.stringify(u),wc.logger("[DEBUG]: licence file"),wc.logger(n),j(),wc.logger("[DEBUG]: Updating single user file via sugar");var p={};p.user=i,p.user_encrypted=!0,p.auth_code=r,p.login_type=o,p.licence_id=u.guid,wc.sugarReq("single",p,(function(e){wc.logger("[DEBUG]: File updated successfully.")}))}else M()}else n=e,j();else{if(!i)throw new Error("Not a valid product code");h=Error("Not a valid product code"),M(s)}}catch(e){t(e,n)}},U=function(e,t){if(m=t,!1!==e){var i=JSON.parse(e);if(8==i.auth_code.length&&(i.auth_code=xc(i.auth_code)),f.auth_code==i.auth_code){n=e;var r=wc.getSoftwareEnabledProp(g),a=wc.getProductExpiryProp(g);wc.dateInFuture(i.expiry,m)?1!=i[r]?(i[a]=wc.getYesterdaysDate(m),n=JSON.stringify(i),wc.s3Req(wc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)}))):j():wc.s3Req(wc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)}))}else h=Error("Group product code has changed, reverting to freemium"),d=!0,x()}else wc.s3Req(wc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)}))},M=function(e){if(null==e&&(e=!1),!1===n&&!0===E){if(n=wc.freemium(i,m,g),e){var t=JSON.parse(n);t.lt=Math.floor(899999*Math.random()+1e5),n=JSON.stringify(t)}else Y();j()}else!1===E?x():j()},x=function(){!1===n&&(n=wc.expiredFreemium(i,m,g),!0===E&&Y()),j()},Y=function(){if(i){var e={};e.user=i,e.product=g,wc.sugarReq("freemium",e).then((e=>{}))}},j=function(){var e=JSON.parse(n);y=e.licence_type,1==e.unlimited&&(y="Unlimited"),e.free_for_teachers&&(S=1);var t=!1;if("Group"!=e.licence_type){var i=wc.getProductExpiryProp(g),a=wc.getSoftwareEnabledProp(g);(e.hasOwnProperty(a)&&0!=e[a]||e.hasOwnProperty(i))&&(!e.hasOwnProperty(a)||1!=e[a]||wc.dateInFuture(e.expiry,m)||e.hasOwnProperty(i))||(b="Trial",e[i]=wc.get30DaysDate(m),n=JSON.stringify(e),t=!0),"Freemium"==e.licence_type&&(e.hide_unlicensed=p,n=JSON.stringify(e));var o=!1;(e.hasOwnProperty(a)&&1==e[a]&&wc.dateInFuture(e.expiry,m)||e.hasOwnProperty(i)&&wc.dateInFuture(e[i],m))&&(o=!0),!0===o?(b="Premium",wc.s3Req(wc.getFeaturesFilename(g,"premium"),m).then((([e,t,n])=>{G(e,t)}))):(b="Freemium",wc.s3Req(wc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)})))}else K(n);if(!0===t&&Y(),"Group"!=e.licence_type&&!0!==d&&null!=s){var c=!1;if("Single"==e.licence_type&&wc.dateInFuture(e.expiry,m)||(c=!0),!0===c){var u=wc.platformFlagToCheck(g),l=wc.getDomainsListFilename(u,s);wc.s3Req(l,m).then((([e,t,n])=>{F(e,t)}))}}e=JSON.parse(n),r=e.auth_code,!0===E&&("undefined"!=typeof chrome&&void 0!==chrome.storage?wc.getLastSync(m,g,"Chrome").then((e=>{e&&H()})):"undefined"!=typeof localStorage?wc.getLastSync(m,g,"Local").then((e=>{e&&H()})):H())},G=function(e,t){if(m=t,!1!==e){var i=JSON.parse(n),r=JSON.parse(e);i.features=r,n=JSON.stringify(i),K(n)}else K(n)},F=function(e,t){m=t,!1!==e&&N(e,B)},B=function(e){0!=e?wc.s3Req("groups/"+e+".json",m).then((([e,t,n])=>{V(e,t)})):wc.logger("[WARNING]: No groups found for this domain.")},V=function(e,t){m=t,!1!==e&&(wc.verifyUserCanEnrolInGroup(e,m,g)?k(e):wc.logger("[ERROR]: Unable to enroll user in the group."))},K=function(e){var n=JSON.parse(e);n.today=wc.getTodaysDate(m),n.currentDateTime=wc.getCurrentDateTime(m);var r=wc.getSoftwareEnabledProp(g),a=wc.getProductExpiryProp(g);if(n.hasOwnProperty(r)&&1==n[r]?(n.license_expiry=n.expiry,b="Premium",wc.dateInFuture(n.expiry,m)||n.hasOwnProperty(a)&&wc.dateInFuture(n[a],m)&&(n.license_expiry=n[a],b="Trial",n.trial=!0)):(n.license_expiry=n[a],wc.dateInFuture(n.license_expiry,m)?(b="Trial",n.trial=!0):(b="Freemium",n.trial=!1)),n.daysleft=wc.dateDiff(n.today,n.license_expiry,"days"),"Group"!=n.licence_type)if("equatio"==g){var s=wc.getSoftwareEnabledProp("rw4gc");"Single"==n.licence_type&&n.hasOwnProperty(s)&&1==n[s]?n.upgrade_link="https://text.help/2MVuXs":n.upgrade_link="https://text.help/llZsZf"}else n.daysleft>=0?n.upgrade_link="https://text.help/sNm0iR":n.upgrade_link="https://text.help/ojpwiV";void 0===n.user&&0!=i&&(n.user=i),t(h,n)},H=function(){if(i)e=i.split("@")[1];else var e="takehomeuser";var t;switch(g){case"mac":case"rw4gc":case"windows":case"ipad":case"android":case"edge":t="Read&Write";break;case"equatio":case"equatio_lti":t="Equatio";break;case"ft4g":t="Fluency Tutor";break;case"wriq":t="WriQ";break;case"reachdeck":t="ReachDeck";break;case"orbitdoc":t="OrbitDoc";break;case"claroread":t="ClaroRead";break;case"writinghelper":t="WritingHelper";break;case"scanpen":t="ScanPen"}if("undefined"!=typeof chrome&&"undefined"!=typeof analytics&&"function"==typeof analytics.getService){var n;(n=analytics.getService("th_licensing").getTracker("UA-83720712-5")).set("clientId",i),n.set("userId",i);var a=analytics.EventBuilder.builder().category("Licence Check").action(i).label(e).dimension({index:1,value:t}).dimension({index:2,value:y}).dimension({index:3,value:b}).dimension({index:4,value:S}).dimension({index:5,value:r}).dimension({index:6,value:""});n.send(a)}else if("undefined"!=typeof window&&"function"==typeof window.ga&&42===window.ga.answer)window.ga("create","UA-83720712-5","auto","licensingTracker",{clientId:i}),window.ga("licensingTracker.send","event",{uid:i,eventCategory:"Licence Check",eventAction:i,eventLabel:e,cd1:t,cd2:y,cd3:b,cd4:S,cd5:r,cd6:""});else{var s={v:1,t:"event",tid:"UA-83720712-5",ec:"Licence Check",ea:i,cid:i,uid:i,el:e,cd1:t,cd2:y,cd3:b,cd4:S,cd5:r,cd6:""},o=Object.keys(s).filter((function(e){return s[e]})).map((function(e){return e+"="+encodeURIComponent(s[e])})).join("&");fetch("https://www.google-analytics.com/collect",{method:"post",body:o})}};try{if(void 0!==e.debug&&""!=e.debug?(jc=e.debug,wc.thDebugMode=jc,wc.logger("=========================="),wc.logger("[CORE]: Debug Mode Enabled"),wc.logger("==========================")):jc=!1,null!=e.authCode&&""!=e.authCode&&!function(e){return 8==e.length?(e=e.toUpperCase(),wc.isGroupAuthCode(e)&&(a=!0),wc.logger("[DEBUG]: Found an auth code: "+e),r=xc(e),wc.logger("[DEBUG]: Hashed auth code for use: "+r),!0):10==e.length&&(e=e.toUpperCase(),wc.logger("[DEBUG]: Found a take home code: "+e),r=xc(e),wc.logger("[DEBUG]: Hashed take home code for use: "+r),_=!0,!0)}(e.authCode))throw new Error("Product code invalid");if(null!=e.product&&""!=e.product){if(!wc.validProduct(e.product))throw new Error("Invalid product");g=e.product}if(void 0!==e.cacheBypass&&""!=e.cacheBypass?(v=e.cacheBypass,wc.thCloudFrontBypass=v,v&&wc.logger("[DEBUG]: Bypassing CloudFront due to configuration option!")):(v=!1,wc.thCloudFrontBypass=!1),void 0!==e.createLicence){if("boolean"!=typeof e.createLicence)throw new Error("createLicence flag should be a boolean");E=e.createLicence,wc.logger("[DEBUG]: thCreateLicence set to "+E)}if(null!=e.user&&""!=e.user){var W=e.user.toLowerCase(),J=!1;if(null!=e.disableUserHash&&!0===e.disableUserHash&&(J=!0),!function(e,t){if(null!=e){if(!wc.isValidUser(e))throw wc.logger("[ERROR]: No domain found in user string."),new Error("No domain found");e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),i=!0===t?e:Mc(e),wc.logger('[DEBUG]: Hashed user string: "'+i+'"');var n=i.split("@")[1];return wc.logger('[DEBUG]: Domain set to: "'+n+'"'),s=Yc(n),wc.logger('[DEBUG]: Domain (post-hash) set to: "'+s+'"'),!0}return!1}(W,J))throw new Error("Invalid user")}if(null!=e.loginType&&""!=e.loginType){var z=e.loginType;if(!function(e){return!(["facebook","feide","google","microsoft","linkedin","twitter","uni-c","yahoo"].indexOf(e)<0||(o=e,0))}(z))throw new Error("Invalid login type");!function(t,n,i){if(c=function(e){return!(["feide","uni-c"].indexOf(e)<0||(c=!0,0))}(t)){if(!1===i)throw new Error("ERROR: email should already be hashed.");if(!Array.isArray(n))throw new Error("institutions should be an array");u=n.map((e=>e.toLowerCase()))}else if(null!=e.institutions&&""!=e.institutions)throw new Error("institutions should not be set for this login type")}(z,e.institutions,e.disableUserHash)}if(!i&&!r)throw new Error("User or product code must be set");if(0==g)throw new Error("Product not set");1==_?(wc.logger("[DEBUG]: Starting take home check"),function(e){wc.logger("[DEBUG]: in the take home check");var t=r;0!=t?wc.s3Req("groups/takehome/"+t+".json",m).then((([e,t,n])=>{D(e,t)})):C()}()):i?wc.s3Req(wc.getUserFilename(i,g),m).then((([e,t,n])=>{O(e,t,n)})):(wc.logger("[DEBUG]: Starting single user check"),C())}catch(e){t(e,n)}};class Fc{constructor(e="",t="",n=""){this._user=e,this._loginType=t,this._product=n}getLicense(e=null,t=null,n=null,i=!0,r=null){return new Promise(((a,s)=>{try{let s=!0,o=null;i&&(o=new Ac(Tc)),void 0!==e&&(this._user!==e&&(s=!1),this._user=e),void 0!==t&&(this._loginType!==t&&(s=!1),this._loginType=t),void 0!==n&&(this._product!==n&&(s=!1),this._product=n);const c={user:e,loginType:t,product:n};null!=r&&(c.authCode=r,s=!1),s&&i?o.retrieve("rw4gc.lic.cache").then((i=>{if(null===i||0===Object.keys(i).length&&i.constructor===Object)s=!1,this.getLicenseNoCache(c).then((i=>{i.meta||(i.meta={}),i.meta.lastUpdated=new Date,i.meta.user=e,i.meta.loginType=t,i.meta.product=n;o.store("rw4gc.lic.cache",i,!1);a(i)}));else{const r=this._user===i.meta.user&&this._product===i.meta.product&&this._loginType===i.meta.loginType,s=new Date(i.meta.lastUpdated);this.nextDay(s)||!r?this.getLicenseNoCache(c).then((i=>{i.meta||(i.meta={}),i.meta.lastUpdated=new Date,i.meta.user=e,i.meta.loginType=t,i.meta.product=n;o.store("rw4gc.lic.cache",i,!1);a(i)})):a(i)}})):this.getLicenseNoCache(c).then((i=>{i.meta||(i.meta={}),i.meta.lastUpdated=new Date,i.meta.user=e,i.meta.loginType=t,i.meta.product=n,a(i)}))}catch(e){s(e)}}))}static removeCachedLicense(){return new Promise(((e,t)=>{try{new Ac(Tc).remove("rw4gc.lic.cache").then((()=>{e(!0)}))}catch(e){t(e)}}))}getLicenseNoCache(e){return new Promise(((t,n)=>{Gc(e,((e,i)=>{e?n(e):t(i)}))}))}nextDay(e){const t=new Date,n=1e4*t.getFullYear()+100*t.getMonth()+t.getDate();return 1e4*e.getFullYear()+100*e.getMonth()+e.getDate()!==n}}class Bc{constructor(e=pc.DEFAULT,t=!1){this._authtype=e,this._user=void 0,this._license=void 0,this._isEdge=t}async getLicense(e=null,t=!1,n=!1){var i=this;return new Promise((async function(r,a){try{let a=new Oc(i._authtype,i._isEdge),s=await a.getUser(t,n);null===s&&r({licenseStore:{license:null,authType:null},authType:null});let o=new Fc(s.email,s.licensetype,"rw4gc"),c=await o.getLicense(s.email,s.licensetype,"rw4gc",!0,e);r({license:c,authType:s.licensetype})}catch(e){a(e)}}))}async getLicenseForAccount(e=null,t=null,n=!1){return new Promise((async function(i,r){try{if(0===e.length)return;let r=new Fc(e.toLowerCase(),t.toLowerCase(),"rw4gc");i(await r.getLicense(e.toLowerCase(),t.toLowerCase(),"rw4gc",n))}catch(e){r(e)}}))}signOut(e){return new Promise(((t,n)=>{try{Fc.removeCachedLicense().then((()=>{e&&(this._authtype=e),new Oc(this._authtype,this._isEdge).signOut().then((()=>{this._authtype=pc.DEFAULT,t(!0)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}catch(e){n(e)}}))}}const Vc="bjglhpoliipklkfjcahfefdlfpifcinb"===chrome.runtime.id,Kc=Object.freeze({GROUP:"Group",UNLIMITED:"Unlimited",PREMIUM:"Premium",SINGLE:"Single"}),Hc={licenseCheck:null},Wc=(e,t)=>{let n;return Hc.licenseCheck&&Hc.licenseCheck._authtype===e?n=Hc.licenseCheck:(n=new Bc(e,t),Hc.licenseCheck=n),n},Jc=async(e,t=null,n=!1,i=!1)=>{let r,a=Wc(e,Vc);return r=t?await a.getLicense(t):await a.getLicense(null,n,i),r},zc=async e=>{if(Hc.licenseCheck)await Hc.licenseCheck.signOut(e),Hc.licenseCheck=null;else{let t=Wc(e,Vc);await t.signOut(e)}},qc=async()=>{let e,n=await(i=null,new Promise((e=>{chrome.storage.managed.get(i,(t=>{e(t)}))})));var i;return n.accountType&&(e=n.accountType.startsWith(t.MICROSOFT)?t.MICROSOFT:t.GOOGLE),Vc&&(e=t.MICROSOFT),e},$c=async(e,t)=>{chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:[t]},(t=>{t&&t.forEach((t=>{t&&t.result&&!0===t.result.found&&setTimeout((()=>{let n=t.result.injectRule;n.target.tabId=e,n.target.frameIds=[t.frameId],chrome.scripting.executeScript(n)}),100)}))}))},Xc=async(e,n,i)=>{chrome.tabs.sendMessage(e.id,{command:"th-toolbarinjected"},(async function(r){if(!1===r.injected)iu(e.id,e.url);else if(n){let e=await qc();e||(e=t.DEFAULT);let n=(await Jc(e)).license;n&&(Di.license=n,i.dispatchStorageEvent("account-changed",mi,{login:e,user:n.meta.user}))}}))},Qc=async()=>{const[e]=await(e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))})))({active:!0,currentWindow:!0});return e},Zc=async e=>{eu(e)},eu=async e=>{chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getSelector.js"]},(t=>{t&&t.forEach((t=>{t&&t.result&&!0===t.result.found&&setTimeout((()=>{let n=t.result.injectRule;n.target.tabId=e,n.target.frameIds=[t.frameId],chrome.scripting.executeScript(n)}),1e3)}))}))},tu=async(e,t)=>{t.lastIndexOf("sharepoint.com")>-1||t.lastIndexOf("https://onedrive.live.com/")>-1||chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getIfInstalled.js"]},(t=>{t&&t.forEach((t=>{!0!==t.result&&null!==t.result&&setTimeout((()=>{chrome.scripting.executeScript({target:{tabId:e,frameIds:[t.frameId]},files:["frame.bundle.js","domdistiller.js"]})}),1e3)}))}))},nu=(e,t,n)=>{chrome.scripting.executeScript({target:{tabId:e,frameIds:[n]},files:["functions/getIfInserted.js"]},(t=>{if(!t)return;t.filter((e=>{if(!1===e.result.res&&!1===e.result.checked)return!0})).forEach((t=>{let i=[];dc.forEach((n=>{let r=n.settings;r.target.tabId=e,n.matches.some((e=>{let a={[e]:r},s=hc(t.result.url,a);if(s.target&&s.target.tabId)return i.push(n),!0}))})),i.length>0&&(i[0].settings.target.frameIds=[n],setTimeout((()=>{chrome.scripting.executeScript(i[0].settings)}),1e3))}))}))},iu=async(e,t)=>{t=t.toLowerCase(),await $c(e,"mathjax/getIfMathjaxNeeded.js"),await tu(e,t),await(async e=>{let t=0,n=!1,i=0;for(;!(n||(i++,i>30));)await new Promise((e=>{setTimeout(e,t)})),t=300,chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getIfFrameInitialised.js"]},(e=>{e&&(n=0===e.filter((e=>!e.result)).length)}))})(e),Zc(e),((e,t,n)=>{t.forEach((t=>{let i=t.settings;i.target.tabId=n,t.matches.includes("*")?setTimeout((()=>{chrome.scripting.executeScript(i)}),1e3):t.matches.some((t=>{let n=hc(e,{[t]:i});if(n.target&&n.target.tabId)return setTimeout((()=>{chrome.scripting.executeScript(n)}),1e3),!0}))}))})(t,lc,e),nu(e,0,0)},ru={"en-AU":{speechoptions:{voice:"Karen",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"es",transsource:"en"},language:{language:"en_US",services:"en_US"}},"en-GB":{speechoptions:{voice:"Serena",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_GB",services:"en_GB"}},en:{speechoptions:{voice:"Serena",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_GB",services:"en_GB"}},"en-US":{speechoptions:{voice:"Ava",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"es",transsource:"en"},language:{language:"en_US",services:"en_US"}},"en-CA":{speechoptions:{voice:"Ava",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_US",services:"en_GB"}},fr:{speechoptions:{voice:"Audrey",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},"fr-CA":{speechoptions:{voice:"Amelie",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},"fr-FR":{speechoptions:{voice:"Amelie",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},ms:{speechoptions:{voice:"Tagalog",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"ms"},language:{language:"ms",services:"en_US"}},tl:{speechoptions:{voice:"Tagalog",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"ms"},language:{language:"ms",services:"en_US"}},pt:{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},"pt-BR":{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},"pt-PT":{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},es:{speechoptions:{voice:"Monica",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"es"},language:{language:"es",services:"es"}},nl:{speechoptions:{voice:"Claire",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"nl"},language:{language:"nl",services:"nl"}},"nl-BE":{speechoptions:{voice:"Claire",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"nl"},language:{language:"nl",services:"nl"}},"es-419":{speechoptions:{voice:"Paulina",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"us"},language:{language:"es",services:"es"}}};const au=[{name:"Tagalog",Gender:"Female",language:"ms",description:"Tagalog Female Amelia",glang:"ms",vendor:"Google",SupportedEngines:["standard"]},{name:"Tarik",Gender:"Male",language:"ar",description:"Arabic Male Tarik",glang:"ar",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Miren",Gender:"Female",language:"eu-es",description:"Basque Female Miren",glang:"eu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Montserrat",Gender:"Female",language:"ca-es",description:"Catalan Female Montserrat",glang:"ca",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tian-Tian",Gender:"Female",language:"zh-cn",description:"Chinese (Mandarin - Simplified) Female Tian-Tian",glang:"zh_cn",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mei-Jia",Gender:"Female",language:"zh-tw",description:"Chinese (Mandarin - Traditional - Taiwanese) Female Mei-Jia",glang:"zh_tw",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zuzana",Gender:"Female",language:"cs-cz",description:"Czech Female Zuzana",glang:"cs",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sara",Gender:"Female",language:"da-dk",description:"Danish Female Sara",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Magnus",Gender:"Male",language:"da-dk",description:"Danish Male Magnus",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ellen",Gender:"Female",language:"nl-be",description:"Dutch (Belgium and Flemish) Female Ellen",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Claire",Gender:"Female",language:"nl-nl",description:"Dutch (Netherlands) Female Claire",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Xander",Gender:"Male",language:"nl-nl",description:"Dutch (Netherlands) Male Xander",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Karen",Gender:"Female",language:"en-au",description:"English (Australian) Female Karen",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lee",Gender:"Male",language:"en-au",description:"English (Australian) Male Lee",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Veena",Gender:"Female",language:"en-in",description:"English (India) Female Veena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Moira",Gender:"Female",language:"en-ie",description:"English (Irish) Female Moira",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Fiona",Gender:"Female",language:"en-sc",description:"English (Scottish) Female Fiona",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tessa",Gender:"Female",language:"en-za",description:"English (South African) Female Tessa",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daniel",Gender:"Male",language:"en-gb",description:"English (UK) Male Daniel",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Serena",Gender:"Female",language:"en-gb",description:"English (UK) Female Serena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Allison",Gender:"Female",language:"en-us",description:"English (US) Female Allison",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ava",Gender:"Female",language:"en-us",description:"English (US) Female Ava",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tom",Gender:"Male",language:"en-us",description:"English (US) Male Tom",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Samantha",Gender:"Female",language:"en-us",description:"English (US) Female Samantha",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Satu",Gender:"Female",language:"fi-fi",description:"Finnish Female Satu",glang:"fi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Amelie",Gender:"Female",language:"fr-ca",description:"French (Canadian) Female Amelie",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Audrey",Gender:"Female",language:"fr",description:"French Female Audrey",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Thomas",Gender:"Male",language:"fr",description:"French Male Thomas",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmela",Gender:"Female",language:"gl-es",description:"Galician (Spain) Female Carmela",glang:"gl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Anna",Gender:"Female",language:"de-de",description:"German Female Anna",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yannick",Gender:"Male",language:"de-de",description:"German Male Yannick",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Petra",Gender:"Female",language:"de-de",description:"German Female Petra",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Melina",Gender:"Female",language:"el-gr",description:"Greek Female Melina",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nikos",Gender:"Male",language:"el-gr",description:"Greek Male Nikos",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lekha",Gender:"Female",language:"hi-in",description:"Hindi Female Lekha",glang:"hi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mariska",Gender:"Female",language:"hu-hu",description:"Hungarian Female Mariska",glang:"hu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Damayanti",Gender:"Female",language:"id-id",description:"Indonesian (Bahasa) Female Damayanti",glang:"id",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alice",Gender:"Female",language:"it-it",description:"Italian Female Alice",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Federica",Gender:"Female",language:"it-it",description:"Italian Female Federica",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luca",Gender:"Male",language:"it-it",description:"Italian Male Luca",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paola",Gender:"Female",language:"it-it",description:"Italian Female Paola",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ichiro",Gender:"Male",language:"ja-jp",description:"Japanese Male Ichiro",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sakura",Gender:"Female",language:"ja-jp",description:"Japanese Female Sakura",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sora",Gender:"Female",language:"ko-kr",description:"Korean Female Sora",glang:"ko",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nora",Gender:"Female",language:"no-no",description:"Norwegian Female Nora",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Henrik",Gender:"Male",language:"no-no",description:"Norwegian Male Henrik",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ewa",Gender:"Female",language:"pl-pl",description:"Polish Female Ewa",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zosia",Gender:"Female",language:"pl-pl",description:"Polish Female Zosia",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luciana",Gender:"Female",language:"pt-br",description:"Portuguese (Brazilian) Female Luciana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Felipe",Gender:"Male",language:"pt-br",description:"Portuguese (Brazilian) Male Felipe",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Joana",Gender:"Female",language:"pt-pt",description:"Portuguese Female Joana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Catarina",Gender:"Female",language:"pt-pt",description:"Portuguese Female Catarina",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ioana",Gender:"Female",language:"ro-ro",description:"Romanian Female Ioana",glang:"ro",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Milena",Gender:"Female",language:"ru-ru",description:"Russian Female Milena",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yuri",Gender:"Male",language:"ru-ru",description:"Russian Male Yuri",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Laura",Gender:"Female",language:"sk-sk",description:"Slovakian Female Laura",glang:"sk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carlos",Gender:"Male",language:"es-co",description:"Spanish (Columbian) Male Carlos",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Soledad",Gender:"Female",language:"es-co",description:"Spanish (Columbian) Female Soledad",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paulina",Gender:"Female",language:"es-mx",description:"Spanish (Mexican) Female Paulina",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Juan",Gender:"Male",language:"es-mx",description:"Spanish (Mexican) Male Juan",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jorge",Gender:"Male",language:"es-es",description:"Spanish (Castilian) Male Jorge",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Monica",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Female Monica",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alva",Gender:"Female",language:"sv-se",description:"Swedish Female Alva",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Oskar",Gender:"Male",language:"sv-se",description:"Swedish Male Oskar",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Kanya",Gender:"Female",language:"th-th",description:"Thai Female Kanya",glang:"th",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Cem",Gender:"Male",language:"tr-tr",description:"Turkish Male Cem",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yelda",Gender:"Female",language:"tr-tr",description:"Turkish Female Yelda",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Dariush",Gender:"Male",language:"fa-ir",glang:"fa",description:"Farsi Male Dariush",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmit",Gender:"Female",language:"he-il",glang:"he",description:"Hebrew Female Carmit",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lesya",Gender:"Female",language:"uk-ua",glang:"uk",description:"Ukrainian Female Lesya",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jordi",Gender:"Male",language:"ca-es",glang:"ca",description:"Catalan Male Jordi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lana",Gender:"Female",language:"hr-hr",description:"Croatian Female Lana",glang:"hr-hr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sinji_Ml",Gender:"Female",language:"yue-hk",description:"Cantonese Female Sinji",glang:"yue-hk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daria",Gender:"Female",language:"bg-bg",description:"Bulgarian Female Daria",glang:"bg-bg",vendor:"Nuance",SupportedEngines:["standard"]}],su=[{name:"Geraint",Gender:"Male",language:"en-gb-wls",description:"Welsh English Male Geraint",glang:"en",vendor:"Polly",SupportedEngines:["standard"]},{name:"Gwyneth",Gender:"Female",language:"cy-gb",description:"Welsh Female Gwyneth",glang:"cy",vendor:"Polly",SupportedEngines:["standard"]},{name:"Karl",Gender:"Male",language:"is-is",description:"Icelandic Male Karl",glang:"is",vendor:"Polly",SupportedEngines:["standard"]},{name:"Dora",Gender:"Female",language:"is-is",description:"Icelandic Female Dóra",glang:"is",vendor:"Polly",SupportedEngines:["standard"]}],ou=[{name:"Ceitidh",Gender:"Female",language:"gd",glang:"gd",description:"Gaelic (Scottish) Female Ceitidh",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Peig",Gender:"Female",language:"ga",glang:"ga",description:"Irish Female Peig",vendor:"Cereproc",SupportedEngines:["standard"]}],cu=[{name:"Aine",Gender:"Female",language:"ga",glang:"ga",description:"Irish (Ulster) female Áine - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]},{name:"t_Anna",Gender:"Female",language:"ga",glang:"ga",description:"Irish (Connemara) female Anna - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]},{name:"Caitlin",Gender:"Female",language:"ga",glang:"ga",description:"Irish (Munster) female Caitlin - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]},{name:"Macdara",Gender:"Male",language:"ga",glang:"ga",description:"Irish (Connemara) male Macdara - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]}];class uu{constructor(e,t,n){this.voiceByName={},this.voicesByGenderLang={Male:{},Female:{}},this.voicesByLang={},this.createVoiceMap(e,t,n)}createVoiceMap(e,t,n,i){let r=[...au];e&&r.push(...su),t&&r.push(...ou),n&&r.push(...cu);for(let e=0;e<r.length;e++)this.voiceByName[r[e].name]=r[e],null!=this.voicesByGenderLang[r[e].Gender]&&void 0!==this.voicesByGenderLang[r[e].Gender]||(this.voicesByGenderLang[r[e].Gender]={}),null!=this.voicesByGenderLang[r[e].Gender][r[e].language]&&void 0!==this.voicesByGenderLang[r[e].Gender][r[e].language]||(this.voicesByGenderLang[r[e].Gender][r[e].language]=[]),this.voicesByGenderLang[r[e].Gender][r[e].language].push(r[e])}getVoiceByGenderAndLang(e,t){return this.voicesByGenderLang[e][t]}getVoiceByName(e){return this.voiceByName[e]}getVoices(e=!1,t=!1,n=!1){let i=[...au];return e&&i.push(...su),t&&i.push(...ou),n&&i.push(...cu),i}}class lu{constructor(e="Ava?",t="50"){this.AUDIOMAKERSETTINGS={USER:"rwforgdocs4",SERVICEURL:"https://texthelpspeech.speechstream.net",SERVICEPATH:"Mp3Maker"},Object.freeze(this.CHECKITSETTINGS),this._mp3Path,this._filename,this._speed=t;const n=(new uu).getVoices(!0,!0,!0);if(this._voice=this._validateVoice(e),!(n.filter((t=>{if(t.name===e)return!0})).length>0)){let e=Ho.state.language.language.replace(/_/g,"-"),t=ru[e];void 0===t&&(t=ru["en-US"]),t.speechoptions.voice?this._voice=t.speechoptions.voice:this._voice="Ava?"}this._baseURL=this._calculatePath(this.AUDIOMAKERSETTINGS.SERVICEURL,this.AUDIOMAKERSETTINGS.SERVICEPATH)+"?userName="+this.AUDIOMAKERSETTINGS.USER+"&voiceName="+this._voice+"&speedValue="+t,this._events=new bi,this._events.initialise(),this._source=null}async convert(e,t,n){var i=this;const r=this._baseURL;this._filename=e,this._source=n;let a=await this.requestMP3(r,e,t);const s=a.statusFileLocation;""!=s&&(this._mp3Path=a.mp3Location,setTimeout((async function(){try{await i._statusChecker(s)}catch(e){}}),1e3))}_validateVoice(e){return"%3F"==e.slice(e.length-3)?e=decodeURIComponent(e):decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),"%3F"==e.slice(e.length-3)?e=decodeURIComponent(e):decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),e}_getServerVoice(){}_calculatePath(e,t){try{"/"!=e.charAt(e.length-1)&&(e+="/"),"/"!=t.charAt(t.length-1)&&(t+="/")}catch(e){}return e+t}async requestMP3(e,t,n){let i=`filename=${t}&text=${n=encodeURIComponent(n)}`;try{let t=await fetch(e,{headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:i,method:"POST",mode:"cors",credentials:"include"});return await t.json()}catch(e){console.log(e)}}async _statusChecker(e){var t=this,n=await this._requestStatusFile(e);try{100==n?this._events.dispatchStorageEvent("th-gotaudiofile",vi,{type:"th-gotaudiofile",file:this._mp3Path},this._source.sessionId,this._source.frameId):setTimeout((async function(){try{await t._statusChecker(e)}catch(e){}}),1e3)}catch(e){}}async _requestStatusFile(e){try{const t=await fetch(e,{method:"GET",mode:"cors"}),n=await t.json();if(null==n);else{if(""==n.error||" "==n.error)return this._events.dispatchStorageEvent("th-audioprogress",vi,{type:"th-audioprogress",value:n.progress},this._source.sessionId,this._source.frameId),n.progress;console.log(n.error)}}catch(e){console.log(e)}}}class du{static CallSimplifyService(e=!1,t,n,i,r,a,s){return new Promise((o=>{let c="https://rw4gc-simplify.texthelp.com/";e&&(c="https://rw4gc-simplify.dev.texthelp.com/");const u=du._userDataFromLicense(a);chrome.tabs.create({url:c,active:!0},(async function(e){const a=()=>{self.setTimeout((()=>{chrome.tabs.sendMessage(e.id,{type:"th-injectsimplify",text:n,url:i,lang:r,userInfo:u,title:t,feature:s},{frameId:0},(e=>{void 0===e||0!==e.indexOf("finished")?a():o()}))}),5e3)};a()}))}))}static _userDataFromLicense(e){try{if(void 0===e.user)throw new Error("Field: user");if(void 0===e.trial)throw new Error("Field: trial");if(void 0===e.unlimited&&(e.unlimited=!1),void 0===e.daysleft)throw new Error("Field: daysleft");let t=e.user.split("@")[0].replace("%",""),n=e.user.substring(t.length+1);return{user:e.user,emailDomain:n,trial:e.trial,unlimited:e.unlimited,daysleft:e.daysleft}}catch(e){throw new Error("Error getting the correct license fields: "+e.message)}}}var hu=(e,t,n)=>{const i={html:e.text.replace(/(?:\f\n|\f|\n)/g,"<br>"),documentTitle:e.title,loginType:t.loginType,url:n};chrome.tabs.create({url:"https://pra.texthelp.com/"},(e=>{const t={command:"th-practicereadingaloud",data:i},n=(i,r)=>{i===e.id&&"complete"===r.status&&(chrome.tabs.onUpdated.removeListener(n),chrome.tabs.sendMessage(i,t))};chrome.tabs.onUpdated.addListener(n),chrome.tabs.sendMessage(e.id,t)}))};class pu{constructor(){this.onAnalyticsViewEvent=e=>{try{let t=e.detail.parserName,n=Di.stateJSON,i={screenName:this.setScreenName(t.toLowerCase()),userId:n.license.user.toLowerCase()};this._analytics.sendAppView(i)}catch(e){}},this.onAnalyticsEvent=e=>{try{let t=[],n=Di.stateJSON,i=this._analytics.hashEmail(n.license.meta.user.toLowerCase()),r="",a=e.detail.parameters.customParams;if(void 0!==a){if(void 0!==a.docId){let e=this._analytics.hash({stringToHash:a.docId});t.push({t:"d",i:"1",value:e})}t.push({t:"d",i:"2",value:n.license.licensetype}),t.push({t:"d",i:"3",value:n.license.licensesubscription}),void 0!==a.voice&&t.push({t:"d",i:"4",value:a.voice}),void 0!==a.onLine&&t.push({t:"d",i:"5",value:a.onLine}),void 0!==a.hostName&&(r=a.hostName,t.push({t:"d",i:"6",value:r})),void 0!==a.language&&t.push({t:"d",i:"7",value:a.language}),void 0!==a.ruleId&&t.push({t:"d",i:"8",value:a.ruleId}),void 0!==a.toReplace&&t.push({t:"d",i:"9",value:a.toReplace}),void 0!==a.replacedWith&&t.push({t:"d",i:"10",value:a.replacedWith}),void 0!==a.suggestions&&Array.isArray(a.suggestions)&&t.push({t:"d",i:"11",value:a.suggestions.join(", ")}),void 0!==a.textLength&&t.push({t:"m",i:"1",value:a.textLength}),void 0!==a.responseTime&&t.push({t:"m",i:"2",value:a.responseTime}),void 0!==a.speed&&t.push({t:"m",i:"3",value:parseInt(a.speed)}),void 0!==a.numWords&&t.push({t:"m",i:"4",value:a.numWords});let e=parseInt(this._analytics._getVersion().replace(/\./g,""));t.push({t:"m",i:"5",value:e}),t.push({t:"d",i:"12",value:this._analytics.getUTCTimeStamp().toString()})}let s={eventCategory:e.detail.parameters.eventCategory,eventAction:i.deIdentifiedEmail,eventLabel:i.emailDomain,eventValue:-1,userId:i.deIdentifiedEmail,screenName:this.setScreenName(e.detail.parameters.customParams.screenName.toLowerCase()),hostName:r,customAttributes:t};this._analytics.sendEvent(s)}catch(e){}},this.applicationName="RW4GC",this.analyticsTrackingCode="UA-83720712-1",this._analytics=new r({applicationName:this.applicationName,analyticsTrackingCode:this.analyticsTrackingCode})}setScreenName(e){switch(e){case"gdocsparser":case"gdocsonlyparser":return"google docs";case"htmlparser":return"web";case"googleslidesparser":return"google slides";case"googleformsparser":return"google forms";case"mswordonlineparser":case"mswordonlineonlyparser":return"microsoft word online";default:return e.toLowerCase()}}}class gu{constructor(){this._accessToken="",this._audioBlob=null,this._fileId=null,this._title=null}decode(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var n,i,r,a,s,o=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),d=new Uint8Array(l);for(n=0;n<c;n+=4)i=t.indexOf(e[n]),r=t.indexOf(e[n+1]),a=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),d[u++]=i<<2|r>>4,d[u++]=(15&r)<<4|a>>2,d[u++]=(3&a)<<6|63&s;return l}async _setFolderPermissions(e){await this._driveFetch(`https://content.googleapis.com/drive/v3/files/${e}/permissions?fields=*&alt=json`,"POST",{body:JSON.stringify({role:"writer",type:"anyone",allowFileDiscovery:!1})})}async _fileExists(e){let t=await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${e}?fields=trashed`,"GET");if(200!==t.status)return!1;let{trashed:n}=await t.json();return!n}async createVoiceNote(e,t,n,i,r){if(this._audioBlob=new Blob([this.decode(e)],{type:"audio/ogg; codecs=opus"}),this._fileId=t,this._title=n,this._folderName=i,this._accessToken=await this._getAccessToken(),this._onVoiceNote=r,0===this._accessToken.length)return;let a=null;if(a=await this._getVoiceNoteFolderFromDoc(this._fileId),a)return a=await this.uploadAudioFile(this._audioBlob,a),void r(a);a=await this._getMyVoiceNoteFolder(),a=await this._createVoiceNoteFolder(this._title,a.folderId),await this._setFolderPermissions(a),a=await this.uploadAudioFile(this._audioBlob,a),this._onVoiceNote(a)}async _getAccessToken(){return new Promise((async function(e){chrome.identity.getAuthToken({interactive:!0,scopes:["https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"]},(async function(t){e(t||"")}))}))}async _driveFetch(t,n="GET",i={}){return await fetch(t,e({method:n,headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this._accessToken}`})},i))}uploadVoiceNote(e){}async getFileParentFolderID(){let e=await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${this._fileId}?fields=parents`,"GET"),t=await e.json();return this.parentFolderID=t.parents[0],t.parents[0]}async _checkFolderExist(e,t){let n=await this._driveFetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${e}' and mimeType%3D'application/vnd.google-apps.folder' and parents='${t}'`,"GET"),i=await n.json();return!!(i.files&&i.files.length>0)}async getFolderID(e,t){let n=await this._driveFetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${e}' and mimeType%3D'application/vnd.google-apps.folder' and parents='${t}'`,"GET"),i=await n.json();return this.currentFolderForNotes=i.files[0].id,i.files[0].id}async _createVoiceNoteFolder(e,t=null){let n={name:e,mimeType:"application/vnd.google-apps.folder"};t&&(n.parents=[t]);let i=await this._driveFetch("https://www.googleapis.com/drive/v3/files?supportsAllDrives=true","POST",{body:JSON.stringify(n)}),r=await i.json();return await this._driveFetch(`https://content.googleapis.com/drive/v3/files/${this._fileId}?alt=json`,"PATCH",{body:JSON.stringify({appProperties:{folderId:r.id}})}),r.id}async _deleteVoiceNoteConfigFile(e){return await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${e}`,"DELETE")}async _getMyVoiceNoteFolder(){if(this._config)return this._config;let e=await this._driveFetch("https://content.googleapis.com/drive/v3/files?q=name%3D%27TexthelpVoiceNoteConfig%27&spaces=appDataFolder&fields=files%2Fid%2Cfiles%2Fdescription%2Cfiles%2Ftrashed","GET"),t=await e.json();const{files:n}=t;if(n.length<1){const e=await this._createVoiceNoteFolder(this._folderName);return await this._createConfigFile(e),{folderId:e}}let{id:i,description:r,trashed:a}=n[0];if(await this._fileExists(r))return{folderId:r};await this._deleteVoiceNoteConfigFile(this._accessToken,i);const s=await this._createVoiceNoteFolder(this._folderName);return await this._createConfigFile(s),{folderId:s}}async _createConfigFile(e){let t=await this._driveFetch("https://www.googleapis.com/drive/v3/files","POST",{body:JSON.stringify({name:"TexthelpVoiceNoteConfig",parents:["appDataFolder"],description:e})});return await t.json()}async _getVoiceNoteFolderFromDoc(e){let t=await this._driveFetch(`https://content.googleapis.com/drive/v3/files/${e}?fields=appProperties`,"GET");if(404===t.status)return null;let n=await t.json();return n.appProperties&&await this._fileExists(n.appProperties.folderId)?n.appProperties.folderId:null}async uploadAudioFile(e,t){const n=new FormData;n.append("blob",e,"Voice Note");let i=await this._driveFetch("https://www.googleapis.com/upload/drive/v3/files?","POST",{headers:new Headers({Authorization:`Bearer ${this._accessToken}`}),body:n});return i=await i.json(),await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${i.id}?addParents=${t}`,"PATCH",{body:JSON.stringify({name:"Voice Note.ogg",mimeType:"audio/ogg; codecs=opus"})}),i.id}}function fu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vu=function(){function e(t,n,i,r){var a=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._senderId=t,this._messagingUrl="https://messaging.texthelp.com/",this._messagingCallback=void 0,"boolean"==typeof i?(!i&&(this._messagingUrl="https://th-messaging.dev.texthelp.com/"),this._messagingCallback=r):this._messagingCallback="function"==typeof i?i:r,this._lastMessage=void 0,this._waiting=!1,this._onMessageCallback=void 0,this._lastTopic=void 0,this._lastCallback=void 0,this._lastWaitTopic=void 0,this._application=n,this._GCMListen(),chrome.alarms.onAlarm.addListener((function(e){if("GCMKeepAlive"===e.name)void 0!==a._lastTopic&&a._registerTopic(a._lastTopic,void 0,!1,(function(){}))}))}return t=e,(n=[{key:"getLastMessage",value:function(e,t,n){var i=this,r=!1,a=void 0!==this._lastMessage;if(e!==this._lastTopic&&(t=!1,this._registerTopic(e,this._lastTopic,!0,(function(){}))),this._lastTopic=e,this._lastCallback=n,t&&a){try{"timed"===this._lastMessage.timetype&&0>this._expiryTimeMS(this._lastMessage,!0)&&(r=!0)}catch(e){r=!0}return void 0!==n&&n(r?void 0:this._lastMessage),void(void 0!==this._messagingCallback&&this._messagingCallback(this._lastMessage))}try{var s=`${this._messagingUrl}getlastmessage/v1`,o={method:"POST",body:JSON.stringify({message_topic:e,application:this._application}),cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._clientAuth}`}};fetch(s,o).then((function(e){e.json().then((function(e){var t;if(0<e.length){var a=e[0];t=i._parseMessageDoc(a)}if(i._lastMessage=t,void 0!==t&&void 0!==t.application&&t.application.toLowerCase()!==i._application&&n(void 0),r=!1,void 0===t)r=!0;else if("lockdown"!==t.application.toLowerCase())try{"timed"===i._lastMessage.timetype&&0>i._expiryTimeMS(i._lastMessage,!0)&&(r=!0)}catch(e){r=!0}void 0!==n&&n(r?void 0:t),void 0!==i._messagingCallback&&(r?i._messagingCallback(void 0):i._messagingCallback(t)),r||void 0===i._onMessageCallback||i._onMessageCallback(t)}))})).catch((function(){void 0!==n&&n(void 0),void 0!==i._messagingCallback&&i._messagingCallback(void 0)}))}catch(e){}}},{key:"onMessage",value:function(e){this._onMessageCallback=e}},{key:"manualMessage",value:function(e){try{var t=JSON.parse(e.data.message);this._parseMessage(t)}catch(e){console.log(e.message)}}},{key:"_parseMessageDoc",value:function(e){var t;try{var n={};if(n="string"==typeof e.message?JSON.parse(e.message):e.message,Object.prototype.hasOwnProperty.call(n,"application")||(n.application="rw4gc"),"lockdown"===n.application.toLowerCase())t={application:n.application,examSettings:n.examSettings};else{t={application:n.application};try{t.features=n["disabled-features"].reduce((function(e,t){return e[t]=0,e}),{})}catch(e){t.features={}}t.time=n.time,t.timetype=n.timetype}t.timestamp=e.post_date}catch(e){t=void 0}return t}},{key:"_expiryTimeMS",value:function(e,t){if(Number.isNaN(e.time))return 0;try{var n=new Date,i=new Date(e.timestamp),r=new Date(i.getTime()),a=60*parseFloat(e.time);r.setMinutes(r.getMinutes()+a);var s=r-n;return t&&0<s&&chrome.alarms.create("MessageExpired",{when:r.getTime()}),s}catch(e){return 0}}},{key:"_GCMKeepAlive",value:function(e){chrome.alarms.get("GCMKeepAlive",(function(t){void 0===t&&chrome.alarms.create("GCMKeepAlive",{periodInMinutes:e})}))}},{key:"_registerTest",value:function(){console.log(this._senderId),chrome.gcm.register([this._senderId],(function(e){void 0!==chrome.runtime.lastError&&console.log(chrome.runtime.lastError),console.log(`Old method id: ${e}`)})),chrome.instanceID.getToken({authorizedEntity:this._senderId,scope:"GCM"},(function(e){void 0!==chrome.runtime.lastError&&console.log(chrome.runtime.lastError),console.log(`New method id: ${e}`)}))}},{key:"_registerTopic",value:function(e,t,n,i){var r=this;chrome.storage.local.get("GCMRegistrationId",(function(t){var a=!1;chrome.instanceID.getToken({authorizedEntity:r._senderId,scope:"GCM"},(function(s){return void 0===chrome.runtime.lastError?n?(void 0!==t.id&&void 0!==t.topics&&t.id===s&&-1<t.topics.indexOf(token)&&(a=!0),void(a?i(t):void 0===t.id?r._registerIdWithService(s,e,(function(t){if(t){var n={id:s,topics:[e],lastModified:(new Date).toISOString()};chrome.storage.local.set({GCMRegistrationId:n}),i(n)}})):(void 0===t.topics?t.topics=[e]:t.topics.push(e),r._registerIdWithService(s,e,(function(e){e&&(e.lastModified=(new Date).toISOString(),chrome.storage.local.set({GCMRegistrationId:e}),i(e))}))))):void i({success:!0}):(console.log(chrome.runtime.lastError),void i(null))}))}))}},{key:"_GCMListen",value:function(){var e=this;chrome.gcm.onMessage.addListener((function(t){var n=JSON.parse(t.data.message);e._parseMessage(n)}))}},{key:"_parseMessage",value:function(e){if((void 0===e.message.application||e.message.application.toLowerCase()===this._application.toLowerCase())&&void 0!==e.message){var t=this._parseMessageDoc(e);this._lastMessage=t;var n=!1;if(void 0===t)n=!0;else if(void 0!==t.application&&"lockdown"!==t.application.toLowerCase())try{"timed"===this._lastMessage.timetype&&0>this._expiryTimeMS(this._lastMessage,!0)&&(n=!0)}catch(e){n=!0}n||void 0===this._messagingCallback||this._messagingCallback(t),n||void 0===this._onMessageCallback||this._onMessageCallback(t)}}},{key:"_registerIdWithService",value:function(e,t,n,i){var r=`${this._messagingUrl}registertoken/v1`,a={message_topic:t,google_token:e};void 0!==n&&(a.previous_topic=n);var s={method:"POST",body:JSON.stringify(a),cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._clientAuth}`}};fetch(r,s).then((function(e){e.json().then((function(e){void 0!==i&&i(e.success)})).catch((function(){void 0!==i&&i(!1)}))}))}},{key:"waiting",get:function(){return this._waiting}}])&&mu(t.prototype,n),i&&mu(t,i),e;var t,n,i}();class _u{constructor(e,t=!0){fu(this,"messagingInstance",void 0),this.storageEvents=new bi,this.messagingInstance=new vu("224182583415","rw4gc",!0,(e=>{e&&this.storageEvents.dispatchStorageEvent("th-datadesk-message",_i,{type:"th-datadesk-message",message:e.features})})),t&&this.messagingInstance.getLastMessage(e,!0,(e=>{e&&this.storageEvents.dispatchStorageEvent("th-datadesk-message",_i,{type:"th-datadesk-message",message:e.features})})),chrome.alarms.onAlarm.addListener((e=>{if("MessageExpired"===e.name)this.storageEvents.dispatchStorageEvent("th-datadesk-reset",_i,{type:"th-datadesk-reset"})}))}processMessage(e){this.messagingInstance.manualMessage(e)}}const yu={dataDesk:null},bu=(e,t,n)=>{try{if(yu.dataDesk)return yu.dataDesk;switch(e){case Kc.GROUP:case Kc.PREMIUM:case Kc.SINGLE:case Kc.UNLIMITED:yu.dataDesk=new _u(t,n)}}catch(e){console.info("Edge doesn't support chrome messaging.")}return yu.dataDesk};let Su=-1;const Eu=()=>{chrome.runtime.onMessage.addListener((async(e,t)=>{if(t.id===chrome.runtime.id&&e.command)switch(e.command.toLowerCase()){case"thswmslogoutactive":Su=parseInt(e.active);break;case"thswclosemslogout":Tu({url:["https://thzbf.texthelp.com/*"]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),-1===Su||isNaN(Su)||chrome.tabs.update(Su,{active:!0})}}))},Tu=e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}));!async function(){new ec;const e=new uc,n=new bi;chrome.runtime.onMessage.addListener((async(e,t,n)=>{if(t.id===chrome.runtime.id)return e.thtype&&"mathjax"===e.thtype?new Promise(((n,i)=>{let r=e.url,a={target:{tabId:t.tab.id,frameIds:[t.frameId]},files:[r.replace(`chrome-extension://${chrome.runtime.id}/`,"")]};chrome.scripting.executeScript(a,(e=>{n()}))})):void 0})),n.initialise();let i=null;const r=new pu;await Promise.all([Di.initialise(),Do.initialise(),Lo.initialise(),Bo.initialise(),Ho.initialise(),Vo.initialise()]);const a=e=>new Promise((t=>{chrome.storage.sync.get(e,(e=>{t(e)}))})),s=e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}));chrome.action.onClicked.addListener((async e=>{const t=void 0===Di.state.license.user;Xc(e,t,n);let i=await s({active:!0,currentWindow:!0});chrome.tabs.sendMessage(i[0].id,{command:"settoolbarVisible",visible:!0})})),chrome.runtime.onMessageExternal.addListener(((e,t,n)=>{if("enfolipbjmnmleonhhebhalojdpcpdoo"===t.id&&void 0!==e.command&&"GETSPEECHSETTINGS"===e.command){return n({voice:decodeURIComponent(Ho.stateJSON.speech.voice),speed:Ho.stateJSON.speech.speed}),!0}})),n.addEventListener("addVoiceNote",(async e=>{null===i&&(i=new gu),await i.createVoiceNote(e.detail.audioblob,e.detail.fileId,e.detail.title,e.detail.folderName,(async t=>{let i=`https://drive.google.com/uc?id=${t}`;n.dispatchStorageEvent("onVoiceNoteAdded",yi,{type:"th-onVoiceNoteAdded",linkToVoiceNote:i},e.detail.source.sessionId,e.detail.source.frameId)}))})),chrome.gcm.onMessage.addListener((e=>{try{if(void 0!==Di.stateJSON){((e,t,n)=>{let i=bu(e,t,!1);i&&i.processMessage(n)})(Di.stateJSON.license.licence_type,Di.stateJSON.user,e)}}catch(e){console.log(e)}})),chrome.alarms.onAlarm.addListener((e=>{if("MessageExpired"===e.name)n.dispatchStorageEvent("th-datadesk-reset",_i,{type:"th-datadesk-reset"})})),chrome.tabs.onActivated.addListener((e=>{chrome.tabs.sendMessage(e.tabId,{command:"setFrameActive"})}));n.addEventListener("getLicense",(async i=>{if(!Hc.licenseCheck||!Hc.licenseCheck._license){let r=await qc();Lo.setLicenseType(r);const a=await Jc(r,i.detail.productCode);let s=a.license;Di.license=s,Ho.state.driveInstall||"microsoft"!==a.authType&&(e.swAuthorizeForDriveInstall(t.GOOGLE),Ho.setDriveInstall(!0)),bu(s.licence_type,s.user,!0),i&&i.detail&&i.detail.returnevent&&n.dispatchStorageEvent(i.detail.returnevent,yi,{type:i.detail.returnevent},i.detail.source.sessionId,i.detail.source.frameId)}})),n.addEventListener("th-generateaudio",(async e=>{const t=Ho.state.speech.voice,n=Ho.state.speech.speed;new lu(t,n).convert("AudioMaker",e.detail.text,e.detail.source)})),n.addEventListener("th-datadesk-message",(async e=>{Do.features=e.detail.message})),n.addEventListener("th-datadesk-reset",(async e=>{Do.resetFeatures()})),n.addEventListener("th-screenshotreader-worker",(async e=>{((e,t)=>{let n={};const i="enfolipbjmnmleonhhebhalojdpcpdoo";chrome.management.get(i,(r=>{chrome.runtime.lastError?chrome.tabs.create({url:"https://chrome.google.com/webstore/detail/screenshot-reader/enfolipbjmnmleonhhebhalojdpcpdoo",active:!0}):(n.command="stopScreenShotReader",chrome.runtime.sendMessage(i,n),n.command="startScreenShotReader",n.voice=`${e}?`,n.speed=t,n.speechServerURL="https://rwforg.speechstream.net/SpeechServices/index.html",n.user="rwforgdocs6",chrome.runtime.sendMessage(i,n))}))})(e.detail.voice,e.detail.speed)})),n.addEventListener("th-practicereadingaloudtab",(async e=>{hu(e.detail.text,e.detail.options,e.detail.url)})),n.addEventListener("analyticsViewEvent",(async e=>{r.onAnalyticsViewEvent(e)})),n.addEventListener("analyticsEvent",(async e=>{r.onAnalyticsEvent(e)})),n.addEventListener("changeAccount",(async e=>{if(e.detail.logout){try{t[e.detail.loginType]===t.GOOGLE?await zc(t.MICROSOFT):await zc(t.GOOGLE)}catch(e){console.log(e)}try{Di.resetLicense(),await new Promise((e=>{setTimeout(e,300)}))}catch(e){console.log(e)}}let i=(await Jc(t[e.detail.loginType],null,e.detail.logout,e.detail.logout)).license;i?(Di.license=i,Lo.setLicenseType(t[e.detail.loginType]),n.dispatchStorageEvent("settoolbarVisible",mi,{visible:!0}),n.dispatchStorageEvent("account-changed",mi,{login:t[e.detail.loginType],user:i.meta.user}),yu.dataDesk=null,bu(i.licence_type,i.user,!0)):(n.dispatchStorageEvent("hideSettings",mi,{visible:!0}),console.log("no licence info after changing account"))})),n.addEventListener("microsoftLogout",(async()=>{n.dispatchStorageEvent("settoolbarVisible",mi,{visible:!1});try{await zc(t.MICROSOFT),Di.resetLicense(),n.dispatchStorageEvent("settoolbarVisible",mi,{visible:!1}),n.dispatchStorageEvent("account-changed",mi,{login:"",user:""})}catch(e){Di.resetLicense(),Lo.setLicenseType(t.DEFAULT)}})),n.addEventListener("th-opensimplifttab",(async e=>{const t=Ho.state.language.language,n=Ho.state.language.features;await du.CallSimplifyService(!1,e.detail.title,e.detail.text,e.detail.url,t,e.detail.license,n)})),n.addEventListener("th-websearch",(async e=>{if(chrome.search)return void chrome.search.query({disposition:"NEW_TAB",text:e.detail.text});let t=e.detail.text.split(" ");t.length<1||(t.length>100&&(t.length=100),chrome.tabs.create({url:"http://google.com/search?q="+encodeURIComponent(t.join(" "))}))})),Eu(),chrome.runtime.onMessage.addListener((async(e,t,n)=>{if(t.id===chrome.runtime.id&&e.command)if("th-inject"!==e.command)if("th-inject-frame"!==e.command)if("RW4GC_ACTION_CLICK"!==e.command)"th-getWindowId"!==e.command?"th-isEdge"!==e.command?"th-updateTabsFocus"!==e.command||chrome.tabs.sendMessage(t.tab.id,{command:"setFrameActive"}):n(Vc):n(t.tab.id);else{const e=await Qc();Xc(e)}else{if(t.tab.url.startsWith("chrome://")||""===t.tab.url)return;await(async(e,t,n)=>{await $c(e,"mathjax/getIfMathjaxNeeded.js"),await tu(e,t),Zc(e),nu(e,0,n)})(t.tab.id,t.tab.url,t.frameId)}else(async(e=null)=>{(e||(e=await Qc()))&&iu(e.id,e.url)})(t.tab)})),chrome.commands.onCommand.addListener((async e=>{let t=await s({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{command:"shortcutHandler",action:e})})),chrome.runtime.onInstalled.addListener((async e=>{if(chrome.identity.getProfileUserInfo((async e=>{if(e.email.length>0){let n=await qc();n||(n=t.GOOGLE),await(async(e,t,n)=>{let i=Wc(t,!1);return await i.getLicenseForAccount(e,t,n)})(e.email,n,!0)}})),"update"===e.reason){let e={},t=[],n={},i=await a("thRWFGSettings");i.thRWFGSettings&&(e=JSON.parse(i.thRWFGSettings)),i=await a("texthelpdictionaryItems"),i.texthelpdictionaryItems&&(t=i.texthelpdictionaryItems),i=await a("texthelpbar"),i.texthelpbar&&(n=i.texthelpbar.left.buttons),Ho.importV1Settings(e,t,n)}}))}()}));
